(function(t){var e={};function __webpack_require__(n){if(e[n]){return e[n].exports}var o=e[n]={i:n,l:false,exports:{}};t[n].call(o.exports,o,o.exports,__webpack_require__);o.l=true;return o.exports}__webpack_require__.m=t;__webpack_require__.c=e;__webpack_require__.d=function(t,e,n){if(!__webpack_require__.o(t,e)){Object.defineProperty(t,e,{enumerable:true,get:n})}};__webpack_require__.r=function(t){if(typeof Symbol!=="undefined"&&Symbol.toStringTag){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})}Object.defineProperty(t,"__esModule",{value:true})};__webpack_require__.t=function(t,e){if(e&1)t=__webpack_require__(t);if(e&8)return t;if(e&4&&typeof t==="object"&&t&&t.__esModule)return t;var n=Object.create(null);__webpack_require__.r(n);Object.defineProperty(n,"default",{enumerable:true,value:t});if(e&2&&typeof t!="string")for(var o in t)__webpack_require__.d(n,o,function(e){return t[e]}.bind(null,o));return n};__webpack_require__.n=function(t){var e=t&&t.__esModule?function getDefault(){return t["default"]}:function getModuleExports(){return t};__webpack_require__.d(e,"a",e);return e};__webpack_require__.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)};__webpack_require__.p="";return __webpack_require__(__webpack_require__.s=18)})([function(t,e,n){t.exports=n(5)(0)},function(t,e,n){t.exports=n(17)(1)},function(t,e){t.exports=angular},function(t,e,n){t.exports=n(5)(1)},function(t,e){t.exports=moment},function(t,e){t.exports=vendor_chunk},function(t,e,n){t.exports=n(5)(66)},function(t,e){t.exports='<div [ngClass]="dropDownContainerClass"\n    persoInfiniteScroll\n    (onScrollAction)="nextPage()"\n    [scrollPercent]="distance"\n    *ngIf="initiated">\n    <div [ngClass]="dropDownClass">\n        <ng-content></ng-content>\n    </div>\n</div>'},function(t,e){t.exports="<div persoPreventParentScroll>\n    <ng-content></ng-content>\n</div>"},function(t,e,n){t.exports=n(5)(7)},function(t,e,n){t.exports=n(5)(32)},function(t,e,n){t.exports=n(5)(246)},function(t,e,n){t.exports=n(5)(244)},function(t,e,n){var o={"./templates.js":14};function webpackContext(t){var e=webpackContextResolve(t);return n(e)}function webpackContextResolve(t){if(!n.o(o,t)){var e=new Error("Cannot find module '"+t+"'");e.code="MODULE_NOT_FOUND";throw e}return o[t]}webpackContext.keys=function webpackContextKeys(){return Object.keys(o)};webpackContext.resolve=webpackContextResolve;t.exports=webpackContext;webpackContext.id=13},function(t,e){angular.module("personalizationsmarteditTemplates",[]).run(["$templateCache",function(t){"use strict";t.put("web/features/personalizationsmartedit/combinedView/personalizationsmarteditCombinedViewComponentLightUpDecoratorTemplate.html",'<div data-ng-class="classForElement"\n'+'    class="pe-combined-view-component-letter">{{letterForElement}}</div>\n'+"<div data-ng-transclude></div>");t.put("web/features/personalizationsmartedit/componentLightUpDecorator/personalizationsmarteditComponentLightUpDecoratorTemplate.html","<div data-ng-transclude></div>");t.put("web/features/personalizationsmartedit/contextMenu/ShowActionList/personalizationsmarteditShowActionListTemplate.html",'<div class="pe-combinedview-ranking">\n'+'    <div class="pe-combinedview-ranking__info-layout">\n'+'        <div class="pe-combinedview-ranking__title"\n'+'            data-translate="personalization.modal.showactionlist.title"></div>\n'+'        <div class="perso__page-level-help-message"\n'+'            data-translate="personalization.modal.showactionlist.help.label"></div>\n'+"    </div>\n"+'    <div class="pe-combinedview-ranking__list-item"\n'+'        data-ng-repeat="item in $ctrl.selectedItems"\n'+'        data-ng-init="$ctrl.initItem(item)"\n'+'        data-ng-show="item.visible">\n'+'        <div class="pe-combinedview-ranking__letter-layout">\n'+'            <div data-ng-class="$ctrl.getClassForElement($index)"\n'+'                data-ng-bind="$ctrl.getLetterForElement($index)"></div>\n'+"        </div>\n"+'        <div class="pe-combinedview-ranking__names-layout">\n'+'            <div class="perso-wrap-ellipsis"\n'+'                data-ng-bind="item.customization.name"\n'+'                title="{{item.customization.name}}"></div>\n'+'            <div class="perso-wrap-ellipsis perso-tree__primary-data"\n'+'                data-ng-bind="item.variation.name"\n'+'                title="{{item.variation.name}}"></div>\n'+"        </div>\n"+'        <div class="pe-combinedview-ranking__icon">\n'+'            <span data-ng-if="!$ctrl.isCustomizationFromCurrentCatalog(item.customization)"\n'+'                class="perso__globe-icon sap-icon--globe"\n'+'                data-uib-tooltip="{{item.variation.catalogVersionNameL10N}}"\n'+'                data-tooltip-placement="top right"></span>\n'+"        </div>\n"+"    </div>\n"+"</div>");t.put("web/features/personalizationsmartedit/contextMenu/ShowComponentInfoList/personalizationsmarteditShowComponentInfoListTemplate.html",'<div class="pe-component-info">\n'+'    <div class="pe-component-info__info-layout">\n'+'        <div data-ng-show="!$ctrl.isPageBlocked">\n'+'            <div data-ng-show="!$ctrl.isPersonalizationAllowedInWorkflow">\n'+'                <div class="pe-component-info__title"\n'+'                    data-translate="personalization.modal.showcomponentinfolist.help.noactionsinworkflow.title"></div>\n'+'                <div class="perso__page-level-help-message"\n'+'                    data-translate="personalization.modal.showcomponentinfolist.help.noactionsinworkflow"></div>\n'+"            </div>\n"+'            <div data-ng-show="$ctrl.isContextualMenuInfoEnabled()">\n'+'                <div class="pe-component-info__title"\n'+'                    data-translate="personalization.modal.showcomponentinfolist.title"></div>\n'+'                <div class="perso__page-level-help-message"\n'+'                    data-ng-show="!$ctrl.isPersonalizationAllowedInWorkflow"\n'+'                    data-translate="personalization.modal.showcomponentinfolist.help.noactionsinworkflow.componentinfo"></div>\n'+'                <div class="perso__page-level-help-message"\n'+'                    data-ng-show="$ctrl.pagination.totalCount > 0 && $ctrl.isPersonalizationAllowedInWorkflow"\n'+'                    data-translate="personalization.modal.showcomponentinfolist.help.label"></div>\n'+'                <div class="perso__page-level-help-message"\n'+'                    data-ng-show="$ctrl.pagination.totalCount === 0 && $ctrl.isPersonalizationAllowedInWorkflow"\n'+'                    data-translate="personalization.modal.showcomponentinfolist.help.nocustomizations">\n'+"                </div>\n"+"            </div>\n"+"        </div>\n"+'        <div data-ng-show="$ctrl.isPageBlocked">\n'+'            <div class="pe-component-info__title"\n'+'                data-translate="personalization.modal.showcomponentinfolist.blocked.title"></div>\n'+'            <div class="perso__page-level-help-message"\n'+'                data-translate="personalization.modal.showcomponentinfolist.blocked.label"></div>\n'+"        </div>\n"+"    </div>\n"+'    <div class="perso__page-level-help-message pe-component-info__info-layout"\n'+'        data-ng-show="$ctrl.pagination.totalCount > 0 && $ctrl.isContextualMenuInfoEnabled()">\n'+'        <span data-translate="personalization.modal.showcomponentinfolist.help.numberofenabledcustomizations"></span>\n'+'        <span data-ng-bind="$ctrl.pagination.totalCount"></span>\n'+"    </div>\n"+"\n"+'    <div data-ng-show="$ctrl.pagination.totalCount > 0 && $ctrl.isContextualMenuInfoEnabled()">\n'+'        <personalization-infinite-scrolling [fetch-page]="$ctrl.getPage"\n'+'            [context]="$ctrl"\n'+"            [drop-down-container-class]=\"'pe-component-info__wrapper'\">\n"+"            <personalization-prevent-parent-scroll>\n"+"                <div data-ng-class=\"$ctrl.customizationVisible() ? 'pe-component-info__list-item':''\"\n"+'                    data-ng-repeat="item in $ctrl.actions">\n'+'                    <div class="pe-component-info__names-layout">\n'+'                        <div class="perso-wrap-ellipsis"\n'+'                            data-ng-bind="item.customizationName"\n'+'                            title="{{item.customizationName}}"></div>\n'+'                        <div class="perso-wrap-ellipsis perso-tree__primary-data"\n'+'                            data-ng-bind="item.variationName"\n'+'                            title="{{item.variationName}}"></div>\n'+"                    </div>\n"+"                    <div data-ng-class=\"$ctrl.customizationVisible() ? 'pe-component-info__icon':''\">\n"+"                        <span data-ng-class=\"$ctrl.customizationVisible()?'perso__globe-icon sap-icon--globe':''\"\n"+'                            data-ng-show="!$ctrl.isCustomizationFromCurrentCatalog(item.customization)"\n'+'                            data-tooltip-placement="top right"\n'+'                            data-uib-tooltip="{{item.customization.catalogVersionNameL10N}}"></span>\n'+"                    </div>\n"+"                </div>\n"+'                <div class="pe-spinner--inner"\n'+'                    data-ng-show="$ctrl.moreCustomizationsRequestProcessing">\n'+'                    <div class="spinner-md spinner-light"></div>\n'+"                </div>\n"+"            </personalization-prevent-parent-scroll>\n"+"        </personalization-infinite-scrolling>\n"+"    </div>\n"+"</div>");t.put("web/features/personalizationsmartedit/externalComponentDecorator/personalizationsmarteditExternalComponentDecoratorTemplate.html",'<div data-ng-class="{\n'+"    'cms-external-component-decorator': !ctrl.isExtenalSlot,\n"+"    'disabled-shared-slot-hovered': ctrl.active && !ctrl.isExtenalSlot}\">\n"+'    <div class="se-ctx-menu__overlay"\n'+'        data-ng-if="!ctrl.isExtenalSlot && ctrl.isReady">\n'+'        <span data-ng-if="!ctrl.active"\n'+"            data-y-popover\n"+"            data-placement=\"'bottom'\"\n"+'            data-template="ctrl.getTooltipTemplate()"\n'+"            data-trigger=\"'hover'\"\n"+'            class="sap-icon--globe se-ctx-menu-element__btn"></span>\n'+"    </div>\n"+'    <div class="se-wrapper-data"\n'+"        data-ng-transclude>\n"+"    </div>\n"+"</div>");t.put("web/features/personalizationsmartedit/sharedSlotDecorator/personalizationsmarteditSharedSlotDecoratorTemplate.html",'<div class="se-decorative-panel-wrapper">\n'+'    <div class="cmsx-ctx-wrapper1 se-slot-contextual-menu-level1">\n'+'        <div class="cmsx-ctx-wrapper2 se-slot-contextual-menu-level2">\n'+'            <div class="se-decorative-panel-area"\n'+'                data-ng-if="ctrl.active && ctrl.slotSharedFlag">\n'+'                <div class="se-decorator-panel-padding-center"></div>\n'+'                <div class="se-decorative-panel-slot-contextual-menu">\n'+'                    <div class="se-shared-slot-button-template"\n'+'                        data-ng-if="ctrl.slotSharedFlag">\n'+'                        <div class="se-slot-ctx-menu__dropdown-toggle-wrapper se-slot-ctx-menu__divider"\n'+"                            data-uib-dropdown\n"+"                            data-dropdown-append-to=\"'#smarteditoverlay'\"\n"+'                            data-auto-close="outsideClick"\n'+'                            data-is-open="ctrl.isPopupOpened">\n'+'                            <button type="button"\n'+"                                data-uib-dropdown-toggle\n"+'                                class="se-slot-ctx-menu__dropdown-toggle sap-icon--chain-link se-slot-ctx-menu__dropdown-toggle-icon"\n'+"                                data-ng-class=\"{'se-slot-ctx-menu__dropdown-toggle--open': ctrl.isPopupOpened}\"\n"+'                                id="sharedSlotButton-{{::ctrl.smarteditComponentId}}">\n'+"                            </button>\n"+'                            <div class="dropdown-menu dropdown-menu-right se-slot__dropdown-menu se-shared-slot__dropdown"\n'+"                                data-uib-dropdown-menu>\n"+'                                <div class="se-shared-slot__body">\n'+'                                    <div class="se-shared-slot__description"\n'+'                                        data-translate="personalization.slot.shared.popover.message"></div>\n'+"                                </div>\n"+"                            </div>\n"+"\n"+"                        </div>\n"+"                    </div>\n"+"                </div>\n"+"            </div>\n"+'            <div class="se-decoratorative-body-area">\n'+'                <div class="se-decorative-body__padding--left"\n'+'                    data-ng-class="{active: ctrl.active}"></div>\n'+"                <div data-ng-class=\"ctrl.active && ctrl.slotSharedFlag ? 'se-decorative-body__inner-border active' : ''\"></div>\n"+'                <div class="se-wrapper-data"\n'+"                    data-ng-transclude\n"+'                    data-ng-class="{active: ctrl.active}"></div>\n'+'                <div class="se-decorative-body__padding--right"\n'+'                    data-ng-class="{active: ctrl.active}"></div>\n'+"            </div>\n"+"        </div>\n"+"    </div>\n"+"</div>")}])},function(t,e,n){var o={"./templates.js":16};function webpackContext(t){var e=webpackContextResolve(t);return n(e)}function webpackContextResolve(t){if(!n.o(o,t)){var e=new Error("Cannot find module '"+t+"'");e.code="MODULE_NOT_FOUND";throw e}return o[t]}webpackContext.keys=function webpackContextKeys(){return Object.keys(o)};webpackContext.resolve=webpackContextResolve;t.exports=webpackContext;webpackContext.id=15},function(t,e){angular.module("personalizationcommonsTemplates",[]).run(["$templateCache",function(t){"use strict";t.put("web/features/personalizationcommons/dateTimePickerRange/dateTimePickerRangeTemplate.html",'<div class="pe-datetime-range">\n'+'    <div class="col-md-6 pe-datetime-range__from"\n'+"        data-ng-class=\"{'has-error': !$ctrl.isFromDateValid}\">\n"+'        <label for="customization-start-date"\n'+'            data-translate="personalization.modal.customizationvariationmanagement.basicinformationtab.details.startdate"\n'+'            class="fd-form__label perso__datetimepicker__label"></label>\n'+"        <y-help data-template=\"'<span data-translate=personalization.modal.customizationvariationmanagement.basicinformationtab.details.startdate.help></span>'\">\n"+"        </y-help>\n"+'        <div class="input-group se-date-field pe-date-field"\n'+'            id="date-picker-range-from"\n'+'            data-ng-show="$ctrl.isEditable">\n'+"            <input type='text'\n"+'                name="date_from_key"\n'+'                class="fd-form-control se-date-field--input pe-date-field__input"\n'+'                placeholder="{{ $ctrl.placeholderText | translate}}"\n'+'                data-ng-disabled="!$ctrl.isEditable"\n'+'                name="{{$ctrl.name}}"\n'+'                data-ng-model="$ctrl.dateFrom"\n'+'                id="customization-start-date" />\n'+'            <span class="input-group-addon se-date-field--button pe-datetime-range__picker"\n'+'                data-ng-show="$ctrl.isEditable">\n'+'                <span class="sap-icon--calendar pe-datetime-range__picker__icon"></span>\n'+"            </span>\n"+"        </div>\n"+'        <div class="input-group se-date-field pe-date-field"\n'+'            id="date-picker-range-from"\n'+'            data-ng-show="!$ctrl.isEditable">\n'+"            <input type='text'\n"+'                name="date_from_key"\n'+'                class="fd-form-control se-date-field--input pe-date-field__input "\n'+"                data-ng-class=\"{'pe-input--is-disabled': !$ctrl.isEditable}\"\n"+'                data-ng-model="$ctrl.dateFrom"\n'+"                data-date-formatter\n"+'                id="customization-start-date"\n'+'                data-ng-disabled="true"\n'+'                data-format-type="short">\n'+"        </div>\n"+'        <span data-ng-if="!$ctrl.isFromDateValid"\n'+'            class="help-block pe-datetime__error-msg pe-datetime__msg"\n'+'            data-translate="personalization.modal.customizationvariationmanagement.basicinformationtab.details.wrongdateformatfrom.description">\n'+"        </span>\n"+"    </div>\n"+'    <div class="col-md-6 pe-datetime-range__to"\n'+"        data-ng-class=\"{'has-error':!$ctrl.isToDateValid, 'has-warning':$ctrl.isEndDateInThePast}\">\n"+'        <label for="customization-end-date"\n'+'            data-translate="personalization.modal.customizationvariationmanagement.basicinformationtab.details.enddate"\n'+'            class="fd-form__label perso__datetimepicker__label"></label>\n'+"        <y-help data-template=\"'<span data-translate=personalization.modal.customizationvariationmanagement.basicinformationtab.details.enddate.help></span>'\">\n"+"        </y-help>\n"+'        <div class="input-group se-date-field pe-date-field"\n'+'            id="date-picker-range-to">\n'+"            <input type='text'\n"+'                name="date_to_key"\n'+'                class="fd-form-control se-date-field--input pe-date-field__input"\n'+'                placeholder="{{ $ctrl.placeholderText | translate}}"\n'+'                data-ng-disabled="!$ctrl.isEditable"\n'+'                name="{{$ctrl.name}}"\n'+'                data-ng-model="$ctrl.dateTo"\n'+'                id="customization-end-date" />\n'+'            <span class="input-group-addon se-date-field--button pe-datetime-range__picker"\n'+'                data-ng-show="$ctrl.isEditable">\n'+'                <span class="sap-icon--calendar pe-datetime-range__picker__icon"></span>\n'+"            </span>\n"+"        </div>\n"+'        <div class="input-group se-date-field pe-date-field"\n'+'            id="date-picker-range-to"\n'+'            data-ng-show="!$ctrl.isEditable">\n'+"            <input type='text'\n"+'                name="date_to_key"\n'+'                class="fd-form-control se-date-field--input pe-date-field__input "\n'+"                data-ng-class=\"{'pe-input--is-disabled': !$ctrl.isEditable}\"\n"+'                data-ng-model="$ctrl.dateTo"\n'+"                data-date-formatter\n"+'                id="customization-end-date"\n'+'                data-ng-disabled="true"\n'+'                data-format-type="short">\n'+"        </div>\n"+'        <span class="help-block pe-datetime__error-msg pe-datetime__msg"\n'+'            data-ng-if="!$ctrl.isToDateValid"\n'+'            data-translate="personalization.modal.customizationvariationmanagement.basicinformationtab.details.wrongdateformat.description">\n'+"        </span>\n"+'        <span data-ng-if="$ctrl.isEndDateInThePast"\n'+'            class="help-block pe-datetime__warning-msg pe-datetime__msg">\n'+'            <span data-translate="personalization.modal.customizationvariationmanagement.basicinformationtab.details.enddateinthepast.description"></span>\n'+"        </span>\n"+"    </div>\n"+"</div>");t.put("web/features/personalizationcommons/personalizationsmarteditScrollZone/personalizationsmarteditScrollZoneBottomTemplate.html",'<div class="perso__scrollzone perso__scrollzone--bottom"\n'+"    data-ng-class=\"$ctrl.isTransparent?'perso__scrollzone--transparent':'perso__scrollzone--normal'\"\n"+'    data-ng-show="$ctrl.scrollZoneVisible && $ctrl.scrollZoneBottom"\n'+'    data-ng-mouseenter="$ctrl.start=true;$ctrl.scrollBottom()"\n'+'    data-ng-mouseleave="$ctrl.stopScroll()">\n'+"</div>");t.put("web/features/personalizationcommons/personalizationsmarteditScrollZone/personalizationsmarteditScrollZoneTopTemplate.html",'<div class="perso__scrollzone perso__scrollzone--top"\n'+"    data-ng-class=\"$ctrl.isTransparent?'perso__scrollzone--transparent':'perso__scrollzone--normal'\"\n"+'    data-ng-show="$ctrl.scrollZoneVisible && $ctrl.scrollZoneTop"\n'+'    data-ng-mouseenter="$ctrl.start=true;$ctrl.scrollTop()"\n'+'    data-ng-mouseleave="$ctrl.stopScroll()">\n'+"</div>")}])},function(t,e){t.exports=smarteditcommons},function(t,e,n){"use strict";n.r(e);n.d(e,"Personalizationsmarteditmodule",(function(){return mt}));n.d(e,"Personalizationsmartedit",(function(){return ht}));var o=n(0);function importAll(t){t.keys().forEach((function(e){t(e)}))}function doImport(){importAll(n(13));importAll(n(15))}var i=n(1);var a=function(){function Personalization(){this.enabled=false}return Personalization}();var r=function(){function Customize(){this.enabled=false;this.selectedCustomization=null;this.selectedVariations=null;this.selectedComponents=null}return Customize}();var s=function(){function CombinedView(){this.enabled=false;this.selectedItems=null;this.customize=new r}return CombinedView}();var l=function(){function SeData(){this.pageId=null;this.seExperienceData=null;this.seConfigurationData=null}return SeData}();var c=n(2);var d=function(){function PersonalizationsmarteditContextUtils(){}PersonalizationsmarteditContextUtils.prototype.getContextObject=function(){return{personalization:new a,customize:new r,combinedView:new s,seData:new l}};PersonalizationsmarteditContextUtils.prototype.clearCustomizeContext=function(t){var e=t.getCustomize();e.enabled=false;e.selectedCustomization=null;e.selectedVariations=null;e.selectedComponents=null;t.setCustomize(e)};PersonalizationsmarteditContextUtils.prototype.clearCustomizeContextAndReloadPreview=function(t,e){var n=c["copy"](e.getCustomize().selectedVariations);this.clearCustomizeContext(e);if(c["isObject"](n)&&!c["isArray"](n)){t.removePersonalizationDataFromPreview()}};PersonalizationsmarteditContextUtils.prototype.clearCombinedViewCustomizeContext=function(t){var e=t.getCombinedView();e.customize.enabled=false;e.customize.selectedCustomization=null;e.customize.selectedVariations=null;e.customize.selectedComponents=null;(e.selectedItems||[]).forEach((function(t){delete t.highlighted}));t.setCombinedView(e)};PersonalizationsmarteditContextUtils.prototype.clearCombinedViewContext=function(t){var e=t.getCombinedView();e.enabled=false;e.selectedItems=null;t.setCombinedView(e)};PersonalizationsmarteditContextUtils.prototype.clearCombinedViewContextAndReloadPreview=function(t,e){var n=c["copy"](e.getCombinedView().enabled);var o=c["copy"](e.getCombinedView().selectedItems);this.clearCombinedViewContext(e);if(n&&o){t.removePersonalizationDataFromPreview()}};PersonalizationsmarteditContextUtils=o["__decorate"]([Object(i["SeInjectable"])()],PersonalizationsmarteditContextUtils);return PersonalizationsmarteditContextUtils}();var m=n(4);var p={provide:"PERSONALIZATION_DATE_FORMATS",useValue:{SHORT_DATE_FORMAT:"M/D/YY",MODEL_DATE_FORMAT:"YYYY-MM-DDTHH:mm:SSZ"}};var u=function(){PersonalizationsmarteditDateUtils.$inject=["$translate","DATE_CONSTANTS","PERSONALIZATION_DATE_FORMATS","isBlank"];function PersonalizationsmarteditDateUtils(t,e,n,o){this.$translate=t;this.DATE_CONSTANTS=e;this.PERSONALIZATION_DATE_FORMATS=n;this.isBlank=o}PersonalizationsmarteditDateUtils.prototype.formatDate=function(t,e){e=e||this.DATE_CONSTANTS.MOMENT_FORMAT;if(t){if(t.match&&t.match(/^(\d{4})\-(\d{2})\-(\d{2})T(\d{2}):(\d{2}):(\d{2})(\+|\-)(\d{4})$/)){t=t.slice(0,-2)+":"+t.slice(-2)}return m(new Date(t)).format(e)}else{return""}};PersonalizationsmarteditDateUtils.prototype.formatDateWithMessage=function(t,e){e=e||this.PERSONALIZATION_DATE_FORMATS.SHORT_DATE_FORMAT;if(t){return this.formatDate(t,e)}else{return this.$translate.instant("personalization.toolbar.pagecustomizations.nodatespecified")}};PersonalizationsmarteditDateUtils.prototype.isDateInThePast=function(t){if(this.isBlank(t)){return false}else{return m(t,this.DATE_CONSTANTS.MOMENT_FORMAT).isBefore()}};PersonalizationsmarteditDateUtils.prototype.isDateValidOrEmpty=function(t){return this.isBlank(t)||this.isDateValid(t)};PersonalizationsmarteditDateUtils.prototype.isDateValid=function(t){return m(t,this.DATE_CONSTANTS.MOMENT_FORMAT).isValid()};PersonalizationsmarteditDateUtils.prototype.isDateRangeValid=function(t,e){if(this.isBlank(t)||this.isBlank(e)){return true}else{return m(new Date(t)).isSameOrBefore(m(new Date(e)))}};PersonalizationsmarteditDateUtils.prototype.isDateStrFormatValid=function(t,e){e=e||this.DATE_CONSTANTS.MOMENT_FORMAT;if(this.isBlank(t)){return false}else{return m(t,e,true).isValid()}};PersonalizationsmarteditDateUtils=o["__decorate"]([Object(i["SeInjectable"])()],PersonalizationsmarteditDateUtils);return PersonalizationsmarteditDateUtils}();var C={provide:"PERSONALIZATION_MODEL_STATUS_CODES",useValue:{ENABLED:"ENABLED",DISABLED:"DISABLED"}};var h={provide:"PERSONALIZATION_VIEW_STATUS_MAPPING_CODES",useValue:{ALL:"ALL",ENABLED:"ENABLED",DISABLED:"DISABLED"}};var v={provide:"PERSONALIZATION_COMBINED_VIEW_CSS_MAPPING",useValue:{0:{borderClass:"personalizationsmarteditComponentSelected0",listClass:"personalizationsmarteditComponentSelectedList0"},1:{borderClass:"personalizationsmarteditComponentSelected1",listClass:"personalizationsmarteditComponentSelectedList1"},2:{borderClass:"personalizationsmarteditComponentSelected2",listClass:"personalizationsmarteditComponentSelectedList2"},3:{borderClass:"personalizationsmarteditComponentSelected3",listClass:"personalizationsmarteditComponentSelectedList3"},4:{borderClass:"personalizationsmarteditComponentSelected4",listClass:"personalizationsmarteditComponentSelectedList4"},5:{borderClass:"personalizationsmarteditComponentSelected5",listClass:"personalizationsmarteditComponentSelectedList5"},6:{borderClass:"personalizationsmarteditComponentSelected6",listClass:"personalizationsmarteditComponentSelectedList6"},7:{borderClass:"personalizationsmarteditComponentSelected7",listClass:"personalizationsmarteditComponentSelectedList7"},8:{borderClass:"personalizationsmarteditComponentSelected8",listClass:"personalizationsmarteditComponentSelectedList8"},9:{borderClass:"personalizationsmarteditComponentSelected9",listClass:"personalizationsmarteditComponentSelectedList9"},10:{borderClass:"personalizationsmarteditComponentSelected10",listClass:"personalizationsmarteditComponentSelectedList10"},11:{borderClass:"personalizationsmarteditComponentSelected11",listClass:"personalizationsmarteditComponentSelectedList11"},12:{borderClass:"personalizationsmarteditComponentSelected12",listClass:"personalizationsmarteditComponentSelectedList12"},13:{borderClass:"personalizationsmarteditComponentSelected13",listClass:"personalizationsmarteditComponentSelectedList13"},14:{borderClass:"personalizationsmarteditComponentSelected14",listClass:"personalizationsmarteditComponentSelectedList14"}}};var S={provide:"COMBINED_VIEW_TOOLBAR_ITEM_KEY",useValue:"personalizationsmartedit.container.combinedview.toolbar"};var z={provide:"CUSTOMIZE_VIEW_TOOLBAR_ITEM_KEY",useValue:"personalizationsmartedit.container.pagecustomizations.toolbar"};var f=function(){PersonalizationsmarteditUtils.$inject=["$translate","l10nFilter","PERSONALIZATION_MODEL_STATUS_CODES","PERSONALIZATION_VIEW_STATUS_MAPPING_CODES","PERSONALIZATION_COMBINED_VIEW_CSS_MAPPING","catalogService"];function PersonalizationsmarteditUtils(t,e,n,o,i,a){this.$translate=t;this.l10nFilter=e;this.PERSONALIZATION_MODEL_STATUS_CODES=n;this.PERSONALIZATION_VIEW_STATUS_MAPPING_CODES=o;this.PERSONALIZATION_COMBINED_VIEW_CSS_MAPPING=i;this.catalogService=a}PersonalizationsmarteditUtils.prototype.pushToArrayIfValueExists=function(t,e,n){if(n){t.push({key:e,value:n})}};PersonalizationsmarteditUtils.prototype.getVariationCodes=function(t){if(typeof t===undefined||t===null){return[]}var e=t.map((function(t){return t.code})).filter((function(t){return typeof t!=="undefined"}));return e};PersonalizationsmarteditUtils.prototype.getVariationKey=function(t,e){if(t===undefined||e===undefined){return[]}var n=e.map((function(e){return{variationCode:e.code,customizationCode:t,catalog:e.catalog,catalogVersion:e.catalogVersion}}));return n};PersonalizationsmarteditUtils.prototype.getSegmentTriggerForVariation=function(t){var e=t.triggers||[];var n=e.filter((function(t){return t.type==="segmentTriggerData"}));if(n.length===0){return{}}return n[0]};PersonalizationsmarteditUtils.prototype.isPersonalizationItemEnabled=function(t){return t.status===this.PERSONALIZATION_MODEL_STATUS_CODES.ENABLED};PersonalizationsmarteditUtils.prototype.getEnablementTextForCustomization=function(t,e){e=e||"personalization";if(this.isPersonalizationItemEnabled(t)){return this.$translate.instant(e+".customization.enabled")}else{return this.$translate.instant(e+".customization.disabled")}};PersonalizationsmarteditUtils.prototype.getEnablementTextForVariation=function(t,e){e=e||"personalization";if(this.isPersonalizationItemEnabled(t)){return this.$translate.instant(e+".variation.enabled")}else{return this.$translate.instant(e+".variation.disabled")}};PersonalizationsmarteditUtils.prototype.getEnablementActionTextForVariation=function(t,e){e=e||"personalization";if(this.isPersonalizationItemEnabled(t)){return this.$translate.instant(e+".variation.options.disable")}else{return this.$translate.instant(e+".variation.options.enable")}};PersonalizationsmarteditUtils.prototype.getActivityStateForCustomization=function(t){if(t.status===this.PERSONALIZATION_MODEL_STATUS_CODES.ENABLED){var e=new Date(t.enabledStartDate);var n=new Date(t.enabledEndDate);var o=m(e).isValid();var i=m(n).isValid();if(!o&&!i||o&&!i&&m().isAfter(e,"minute")||!o&&i&&m().isBefore(n,"minute")||m().isBetween(e,n,"minute","[]")){return"perso__status--enabled"}else{return"perso__status--ignore"}}else{return"perso__status--disabled"}};PersonalizationsmarteditUtils.prototype.getActivityStateForVariation=function(t,e){if(e.enabled){return this.getActivityStateForCustomization(t)}else{return"perso__status--disabled"}};PersonalizationsmarteditUtils.prototype.isItemVisible=function(t){return t.status!=="DELETED"};PersonalizationsmarteditUtils.prototype.getVisibleItems=function(t){var e=this;return t.filter((function(t){return e.isItemVisible(t)}))};PersonalizationsmarteditUtils.prototype.getValidRank=function(t,e,n){var o=t.indexOf(e);var i=n<0?-1:1;var a=o+n;while(a>=0&&a<t.length&&!this.isItemVisible(t[a])){a+=i}a=a>=t.length?t.length-1:a;a=a<0?0:a;return t[a].rank};PersonalizationsmarteditUtils.prototype.getStatusesMapping=function(){var t=[];t.push({code:this.PERSONALIZATION_VIEW_STATUS_MAPPING_CODES.ALL,text:"personalization.context.status.all",modelStatuses:[this.PERSONALIZATION_MODEL_STATUS_CODES.ENABLED,this.PERSONALIZATION_MODEL_STATUS_CODES.DISABLED]});t.push({code:this.PERSONALIZATION_VIEW_STATUS_MAPPING_CODES.ENABLED,text:"personalization.context.status.enabled",modelStatuses:[this.PERSONALIZATION_MODEL_STATUS_CODES.ENABLED]});t.push({code:this.PERSONALIZATION_VIEW_STATUS_MAPPING_CODES.DISABLED,text:"personalization.context.status.disabled",modelStatuses:[this.PERSONALIZATION_MODEL_STATUS_CODES.DISABLED]});return t};PersonalizationsmarteditUtils.prototype.getClassForElement=function(t){var e=t%Object.keys(this.PERSONALIZATION_COMBINED_VIEW_CSS_MAPPING).length;return this.PERSONALIZATION_COMBINED_VIEW_CSS_MAPPING[e].listClass};PersonalizationsmarteditUtils.prototype.getLetterForElement=function(t){var e=t%Object.keys(this.PERSONALIZATION_COMBINED_VIEW_CSS_MAPPING).length;return String.fromCharCode("a".charCodeAt(0)+e).toUpperCase()};PersonalizationsmarteditUtils.prototype.getCommerceCustomizationTooltip=function(t,e,n){var o=this;e=e||"";n=n||"\n";var i="";c["forEach"](t.commerceCustomizations,(function(t,a){i+=e+o.$translate.instant("personalization.modal.manager.commercecustomization."+a)+": "+t+n}));return i};PersonalizationsmarteditUtils.prototype.getCommerceCustomizationTooltipHTML=function(t){return this.getCommerceCustomizationTooltip(t,"<div>","</div>")};PersonalizationsmarteditUtils.prototype.isItemFromCurrentCatalog=function(t,e){var n=e.seExperienceData.catalogDescriptor;return t.catalog===n.catalogId&&t.catalogVersion===n.catalogVersion};PersonalizationsmarteditUtils.prototype.hasCommerceActions=function(t){return t.numberOfCommerceActions>0};PersonalizationsmarteditUtils.prototype.getCatalogVersionNameByUuid=function(t){var e=this;return this.catalogService.getCatalogVersionByUuid(t).then((function(t){return e.l10nFilter(t.catalogName)+" ("+t.version+")"}))};PersonalizationsmarteditUtils.prototype.getAndSetCatalogVersionNameL10N=function(t){this.getCatalogVersionNameByUuid(t.catalog+"/"+t.catalogVersion).then((function(e){t.catalogVersionNameL10N=e}))};PersonalizationsmarteditUtils.prototype.uniqueArray=function(t,e,n){n=n||"code";e.forEach((function(e){if(!t.some((function(t){return t[n]===e[n]}))){t.push(e)}}));return t};PersonalizationsmarteditUtils=o["__decorate"]([Object(i["SeInjectable"])()],PersonalizationsmarteditUtils);return PersonalizationsmarteditUtils}();window.__smartedit__.addDecoratorPayload("SeComponent","DateTimePickerRangeComponent",{templateUrl:"dateTimePickerRangeTemplate.html",inputs:["name: =","dateFrom: =","dateTo: =","isEditable: =","dateFormat: ="]});var P=function(){DateTimePickerRangeComponent.$inject=["DATE_CONSTANTS","personalizationsmarteditDateUtils","$element","$scope","languageService"];function DateTimePickerRangeComponent(t,e,n,o,i){this.DATE_CONSTANTS=t;this.personalizationsmarteditDateUtils=e;this.$element=n;this.$scope=o;this.languageService=i;this.placeholderText="personalization.commons.datetimepicker.placeholder";this.isFromDateValid=false;this.isToDateValid=false;this.isEndDateInThePast=false}DateTimePickerRangeComponent.prototype.$onInit=function(){this.actionsIfisEditable()};DateTimePickerRangeComponent.prototype.getDateOrDefault=function(t){try{return m(new Date(t))}catch(t){return false}};DateTimePickerRangeComponent.prototype.actionsIfisEditable=function(){var t=this;if(this.isEditable){this.getFromPickerNode().datetimepicker({format:this.DATE_CONSTANTS.MOMENT_FORMAT,showClear:true,showClose:true,useCurrent:false,keepInvalid:true,widgetPositioning:{vertical:"top"},locale:this.languageService.getBrowserLocale().split("-")[0]}).on("dp.change dp.hide",function(t){var e=this.personalizationsmarteditDateUtils.formatDate(t.date,undefined);if(this.personalizationsmarteditDateUtils.isDateValidOrEmpty(e)&&this.personalizationsmarteditDateUtils.isDateValidOrEmpty(this.dateTo)&&!this.personalizationsmarteditDateUtils.isDateRangeValid(e,this.dateTo)){e=c["copy"](this.dateTo)}this.dateFrom=e}.bind(this));this.getToPickerNode().datetimepicker({format:this.DATE_CONSTANTS.MOMENT_FORMAT,showClear:true,showClose:true,useCurrent:false,keepInvalid:true,widgetPositioning:{vertical:"top"},locale:this.languageService.getBrowserLocale().split("-")[0]}).on("dp.change dp.hide",function(t){var e=this.personalizationsmarteditDateUtils.formatDate(t.date,undefined);if(this.personalizationsmarteditDateUtils.isDateValidOrEmpty(e)&&this.personalizationsmarteditDateUtils.isDateValidOrEmpty(this.dateFrom)&&!this.personalizationsmarteditDateUtils.isDateRangeValid(this.dateFrom,e)){e=c["copy"](this.dateFrom)}this.dateTo=e}.bind(this));this.$scope.$watch("this.$ctrl.dateFrom",(function(){t.isFromDateValid=t.personalizationsmarteditDateUtils.isDateValidOrEmpty(t.dateFrom);if(t.personalizationsmarteditDateUtils.isDateStrFormatValid(t.dateFrom,t.DATE_CONSTANTS.MOMENT_FORMAT)){t.getToDatetimepicker().minDate(t.getMinToDate(t.dateFrom))}else{t.getToDatetimepicker().minDate(m())}}),true);this.$scope.$watch("this.$ctrl.dateTo",(function(){var e=t.personalizationsmarteditDateUtils.isDateValidOrEmpty(t.dateTo);if(e){t.isToDateValid=true;t.isEndDateInThePast=t.personalizationsmarteditDateUtils.isDateInThePast(t.dateTo)}else{t.isToDateValid=false;t.isEndDateInThePast=false}if(t.personalizationsmarteditDateUtils.isDateStrFormatValid(t.dateTo,t.DATE_CONSTANTS.MOMENT_FORMAT)){t.getFromDatetimepicker().maxDate(t.getDateOrDefault(t.dateTo))}else if(t.dateTo===""){t.getFromDatetimepicker().maxDate(false)}}),true)}};DateTimePickerRangeComponent.prototype.getMinToDate=function(t){if(!this.personalizationsmarteditDateUtils.isDateInThePast(t)){return this.getDateOrDefault(t)}else{return m()}};DateTimePickerRangeComponent.prototype.getFromPickerNode=function(){return this.$element.querySelectorAll("#date-picker-range-from")};DateTimePickerRangeComponent.prototype.getFromDatetimepicker=function(){return this.getFromPickerNode().datetimepicker().data("DateTimePicker")};DateTimePickerRangeComponent.prototype.getToPickerNode=function(){return this.$element.querySelectorAll("#date-picker-range-to")};DateTimePickerRangeComponent.prototype.getToDatetimepicker=function(){return this.getToPickerNode().datetimepicker().data("DateTimePicker")};DateTimePickerRangeComponent=o["__decorate"]([Object(i["SeComponent"])({templateUrl:"dateTimePickerRangeTemplate.html",inputs:["name: =","dateFrom: =","dateTo: =","isEditable: =","dateFormat: ="]})],DateTimePickerRangeComponent);return DateTimePickerRangeComponent}();window.__smartedit__.addDecoratorPayload("SeDirective","IsDateValidOrEmptyDirective",{require:"ngModel",selector:"[isdatevalidorempty]"});var _=function(){IsDateValidOrEmptyDirective.$inject=["personalizationsmarteditDateUtils"];function IsDateValidOrEmptyDirective(t){this.personalizationsmarteditDateUtils=t}IsDateValidOrEmptyDirective.prototype.isDateInThePast=function(t){return this.personalizationsmarteditDateUtils.isDateValidOrEmpty(t)};IsDateValidOrEmptyDirective=o["__decorate"]([Object(i["SeDirective"])({require:"ngModel",selector:"[isdatevalidorempty]"})],IsDateValidOrEmptyDirective);return IsDateValidOrEmptyDirective}();var g=function(){PaginationHelper.$inject=["initialData"];function PaginationHelper(t){if(t===void 0){t={}}this.count=t.count||0;this.page=t.page||0;this.totalCount=t.totalCount||0;this.totalPages=t.totalPages||0}PaginationHelper.prototype.reset=function(){this.count=50;this.page=-1;this.totalPages=1;this.totalCount=0};PaginationHelper.prototype.getCount=function(){return this.count};PaginationHelper.prototype.getPage=function(){return this.page};PaginationHelper.prototype.getTotalCount=function(){return this.totalCount};PaginationHelper.prototype.getTotalPages=function(){return this.totalPages};PaginationHelper=o["__decorate"]([Object(i["SeInjectable"])()],PaginationHelper);return PaginationHelper}();var I=function(){PersonalizationsmarteditMessageHandler.$inject=["alertService"];function PersonalizationsmarteditMessageHandler(t){this.alertService=t}PersonalizationsmarteditMessageHandler.prototype.sendInformation=function(t){this.alertService.showInfo(t)};PersonalizationsmarteditMessageHandler.prototype.sendError=function(t){this.alertService.showDanger(t)};PersonalizationsmarteditMessageHandler.prototype.sendWarning=function(t){this.alertService.showWarning(t)};PersonalizationsmarteditMessageHandler.prototype.sendSuccess=function(t){this.alertService.showSuccess(t)};PersonalizationsmarteditMessageHandler=o["__decorate"]([Object(i["SeInjectable"])()],PersonalizationsmarteditMessageHandler);return PersonalizationsmarteditMessageHandler}();var T=function(){function PersonalizationsmarteditCommerceCustomizationService(){this.nonCommerceActionTypes=["cxCmsActionData"];this.types=[]}PersonalizationsmarteditCommerceCustomizationService.prototype.isNonCommerceAction=function(t){return this.nonCommerceActionTypes.some((function(e){return e===t.type}))};PersonalizationsmarteditCommerceCustomizationService.prototype.isCommerceAction=function(t){return!this.isNonCommerceAction(t)};PersonalizationsmarteditCommerceCustomizationService.prototype.isTypeEnabled=function(t,e){return e!==undefined&&e!==null&&e[t.confProperty]===true};PersonalizationsmarteditCommerceCustomizationService.prototype.registerType=function(t){var e=t.type;var n=false;this.types.forEach((function(t){if(t.type===e){n=true}}));if(!n){this.types.push(t)}};PersonalizationsmarteditCommerceCustomizationService.prototype.getAvailableTypes=function(t){var e=this;return this.types.filter((function(n){return e.isTypeEnabled(n,t)}))};PersonalizationsmarteditCommerceCustomizationService.prototype.isCommerceCustomizationEnabled=function(t){var e=this.getAvailableTypes(t);return e.length>0};PersonalizationsmarteditCommerceCustomizationService.prototype.getNonCommerceActionsCount=function(t){return(t.actions||[]).filter(this.isNonCommerceAction,this).length};PersonalizationsmarteditCommerceCustomizationService.prototype.getCommerceActionsCountMap=function(t){var e={};(t.actions||[]).filter(this.isCommerceAction,this).forEach((function(t){var n=t.type.toLowerCase();var o=e[n];if(o===undefined){o=1}else{o+=1}e[n]=o}));return e};PersonalizationsmarteditCommerceCustomizationService.prototype.getCommerceActionsCount=function(t){return(t.actions||[]).filter(this.isCommerceAction,this).length};PersonalizationsmarteditCommerceCustomizationService=o["__decorate"]([Object(i["SeInjectable"])()],PersonalizationsmarteditCommerceCustomizationService);return PersonalizationsmarteditCommerceCustomizationService}();window.__smartedit__.addDecoratorPayload("SeComponent","PersonalizationsmarteditScrollZoneComponent",{inputs:["scrollZoneVisible","getElementToScroll: &","isTransparent","scrollZoneId"]});var E=function(){PersonalizationsmarteditScrollZoneComponent.$inject=["$scope","$timeout","$compile","yjQuery"];function PersonalizationsmarteditScrollZoneComponent(t,e,n,o){this.$scope=t;this.$timeout=e;this.$compile=n;this.yjQuery=o;this.scrollZoneTop=true;this.scrollZoneBottom=true;this.start=false;this.scrollZoneVisible=false;this.isTransparent=false;this.elementToScroll=null;this.scrollZoneId=""}PersonalizationsmarteditScrollZoneComponent.prototype.stopScroll=function(){this.start=false};PersonalizationsmarteditScrollZoneComponent.prototype.scrollTop=function(){var t=this;if(!this.start){return}this.elementToScroll=this.elementToScroll||this.getElementToScroll();this.scrollZoneTop=this.elementToScroll.scrollTop()<=2?false:true;this.scrollZoneBottom=true;this.elementToScroll.scrollTop(this.elementToScroll.scrollTop()-15);this.$timeout((function(){t.scrollTop()}),100)};PersonalizationsmarteditScrollZoneComponent.prototype.scrollBottom=function(){var t=this;if(!this.start){return}this.elementToScroll=this.elementToScroll||this.getElementToScroll();this.scrollZoneTop=true;var e=this.elementToScroll.get(0).scrollHeight-this.elementToScroll.scrollTop();this.scrollZoneBottom=Math.abs(e-this.elementToScroll.outerHeight())<2?false:true;this.elementToScroll.scrollTop(this.elementToScroll.scrollTop()+15);this.$timeout((function(){t.scrollBottom()}),100)};PersonalizationsmarteditScrollZoneComponent.prototype.$onChanges=function(t){if(t.scrollZoneVisible){this.start=t.scrollZoneVisible.currentValue;this.scrollZoneTop=true;this.scrollZoneBottom=true}};PersonalizationsmarteditScrollZoneComponent.prototype.$onInit=function(){var t=this.$compile('<div id="sliderTopScrollZone'+this.scrollZoneId+'" data-ng-include="\'personalizationsmarteditScrollZoneTopTemplate.html\'"></div>')(this.$scope);c["element"]("body").append(t);var e=this.$compile('<div id="sliderBottomScrollZone'+this.scrollZoneId+'" data-ng-include="\'personalizationsmarteditScrollZoneBottomTemplate.html\'"></div>')(this.$scope);c["element"]("body").append(e)};PersonalizationsmarteditScrollZoneComponent.prototype.$onDestroy=function(){var t=this;c["element"]("#sliderTopScrollZone"+this.scrollZoneId).scope().$destroy();c["element"]("#sliderTopScrollZone"+this.scrollZoneId).remove();c["element"]("#sliderBottomScrollZone"+this.scrollZoneId).scope().$destroy();c["element"]("#sliderBottomScrollZone"+this.scrollZoneId).remove();c["element"]("body").contents().each((function(e){if(e.nodeType===Node.COMMENT_NODE&&e.data.indexOf("personalizationsmarteditScrollZone")>-1){t.yjQuery(e).remove()}}))};PersonalizationsmarteditScrollZoneComponent=o["__decorate"]([Object(i["SeComponent"])({inputs:["scrollZoneVisible","getElementToScroll: &","isTransparent","scrollZoneId"]})],PersonalizationsmarteditScrollZoneComponent);return PersonalizationsmarteditScrollZoneComponent}();window.__smartedit__.addDecoratorPayload("SeDirective","PersonalizationCurrentElementDirective",{selector:"[personalization-current-element]"});var y=function(){PersonalizationCurrentElementDirective.$inject=["$scope","$element","$attrs"];function PersonalizationCurrentElementDirective(t,e,n){this.$scope=t;this.$element=e;this.$attrs=n}PersonalizationCurrentElementDirective.prototype.$postLink=function(){if(this.$attrs.personalizationCurrentElement){this.$scope.$parent.$eval(this.$attrs.personalizationCurrentElement)(this.$element.parent())}};PersonalizationCurrentElementDirective=o["__decorate"]([Object(i["SeDirective"])({selector:"[personalization-current-element]"})],PersonalizationCurrentElementDirective);return PersonalizationCurrentElementDirective}();window.__smartedit__.addDecoratorPayload("SeDirective","PersonalizationInfiniteScrollDirectiveOld",{selector:"[personalization-infinite-scroll]"});var b=function(){PersonalizationInfiniteScrollDirectiveOld.$inject=["$scope","$element","$attrs","$rootScope","yjQuery","$window","$timeout"];function PersonalizationInfiniteScrollDirectiveOld(t,e,n,o,i,a,r){this.$scope=t;this.$element=e;this.$attrs=n;this.$rootScope=o;this.yjQuery=i;this.$window=a;this.$timeout=r}PersonalizationInfiniteScrollDirectiveOld.prototype.$postLink=function(){var t=this;var e;var n;var o;var i;this.$window=c["element"](this.$window);o=0;if(this.$attrs.personalizationInfiniteScrollDistance!==null){this.$scope.$parent.$watch(this.$attrs.personalizationInfiniteScrollDistance,(function(t){o=parseInt(t,10);return o}))}i=true;e=false;if(this.$attrs.personalizationInfiniteScrollDisabled!==null){this.$scope.$parent.$watch(this.$attrs.personalizationInfiniteScrollDisabled,(function(t){i=!t;if(i&&e){e=false;return n()}}))}this.$rootScope.$on("refreshStart",(function(){t.$element.animate({scrollTop:"0"})}));n=function(){var n;var a;var r;var s;var l;if(t.$element.children().length<=0){return}n=t.yjQuery(t.$element.children()[0]);a=t.$element.offset().top+t.$element.height();l=n.offset().top+n.height();r=l-a;s=r<=t.$element.height()*o;if(s&&i){if(t.$rootScope.$$phase){return t.$scope.$parent.$eval(t.$attrs.personalizationInfiniteScroll)}else{return t.$scope.$parent.$apply(t.$attrs.personalizationInfiniteScroll)}}else if(s){e=true;return e}};this.$element.on("scroll",n);this.$scope.$parent.$on("$destroy",(function(){return t.$window.off("scroll",n)}));return this.$timeout((function(){if(t.$attrs.personalizationInfiniteScrollImmediateCheck){if(t.$scope.$parent.$eval(t.$attrs.personalizationInfiniteScrollImmediateCheck)){return n()}}else{return n()}}),0)};PersonalizationInfiniteScrollDirectiveOld=o["__decorate"]([Object(i["SeDirective"])({selector:"[personalization-infinite-scroll]"})],PersonalizationInfiniteScrollDirectiveOld);return PersonalizationInfiniteScrollDirectiveOld}();var A=function(){function PersonalizationsmarteditCommonsModule(){}PersonalizationsmarteditCommonsModule=o["__decorate"]([Object(i["SeModule"])({imports:["personalizationcommonsTemplates","smarteditServicesModule","yjqueryModule","l10nModule","alertServiceModule"],providers:[g,{provide:"PaginationHelper",useFactory:function(){return function(t){return new g(t)}}},u,d,p,C,h,v,S,z,f,I,T],declarations:[_,y,b,P,E]})],PersonalizationsmarteditCommonsModule);return PersonalizationsmarteditCommonsModule}();var x=n(3);var D=n(9);window.__smartedit__.addDecoratorPayload("Component","PersonalizationsmarteditInfiniteScrollingComponent",{selector:"personalization-infinite-scrolling",template:n(7)});var O=function(){function PersonalizationsmarteditInfiniteScrollingComponent(){this.distance=80;this.initiated=false}PersonalizationsmarteditInfiniteScrollingComponent.prototype.ngOnInit=function(){this.context=this.context||this;this.init()};PersonalizationsmarteditInfiniteScrollingComponent.prototype.ngOnChanges=function(){this.init()};PersonalizationsmarteditInfiniteScrollingComponent.prototype.nextPage=function(){this.fetchPage()};PersonalizationsmarteditInfiniteScrollingComponent.prototype.init=function(){var t=this.initiated;this.initiated=true;if(t){this.nextPage()}};o["__decorate"]([Object(x["Input"])()],PersonalizationsmarteditInfiniteScrollingComponent.prototype,"dropDownContainerClass",void 0);o["__decorate"]([Object(x["Input"])()],PersonalizationsmarteditInfiniteScrollingComponent.prototype,"dropDownClass",void 0);o["__decorate"]([Object(x["Input"])()],PersonalizationsmarteditInfiniteScrollingComponent.prototype,"distance",void 0);o["__decorate"]([Object(x["Input"])()],PersonalizationsmarteditInfiniteScrollingComponent.prototype,"context",void 0);o["__decorate"]([Object(x["Input"])()],PersonalizationsmarteditInfiniteScrollingComponent.prototype,"fetchPage",void 0);PersonalizationsmarteditInfiniteScrollingComponent=o["__decorate"]([Object(i["SeDowngradeComponent"])(),Object(x["Component"])({selector:"personalization-infinite-scrolling",template:n(7)})],PersonalizationsmarteditInfiniteScrollingComponent);return PersonalizationsmarteditInfiniteScrollingComponent}();var w=n(6);window.__smartedit__.addDecoratorPayload("Directive","PersonalizationInfiniteScrollDirective",{selector:"[persoInfiniteScroll]"});var N=function(){function PersonalizationInfiniteScrollDirective(t){this.element=t;this.scrollPercent=75;this.onScrollAction=new x["EventEmitter"]}PersonalizationInfiniteScrollDirective.prototype.ngOnInit=function(){var t=this;this.scrollEvent=Object(w["fromEvent"])(this.element.nativeElement,"scroll");this.subscription=this.scrollEvent.subscribe((function(e){if((e.target.scrollTop+e.target.offsetHeight)/e.target.scrollHeight>t.scrollPercent/100){t.onScrollAction.emit(null)}}))};PersonalizationInfiniteScrollDirective.prototype.ngOnDestroy=function(){if(this.subscription){this.subscription.unsubscribe()}};o["__decorate"]([Object(x["Input"])()],PersonalizationInfiniteScrollDirective.prototype,"scrollPercent",void 0);o["__decorate"]([Object(x["Output"])()],PersonalizationInfiniteScrollDirective.prototype,"onScrollAction",void 0);PersonalizationInfiniteScrollDirective=o["__decorate"]([Object(x["Directive"])({selector:"[persoInfiniteScroll]"}),o["__param"](0,Object(x["Inject"])(x["ElementRef"]))],PersonalizationInfiniteScrollDirective);return PersonalizationInfiniteScrollDirective}();window.__smartedit__.addDecoratorPayload("Directive","PersonalizationPreventParentScrollDirective",{selector:"[persoPreventParentScroll]"});var M=function(){function PersonalizationPreventParentScrollDirective(t){var e=this;this.element=t;this.mouseWheelEventHandler=function(t){return e.onMouseWheel(t)}}PersonalizationPreventParentScrollDirective.prototype.ngOnInit=function(){var t=this.element.nativeElement;t.addEventListener("mousewheel",this.mouseWheelEventHandler);t.addEventListener("DOMMouseScroll",this.mouseWheelEventHandler)};PersonalizationPreventParentScrollDirective.prototype.ngOnDestroy=function(){var t=this.element.nativeElement;t.removeEventListener("mousewheel",this.mouseWheelEventHandler);t.removeEventListener("DOMMouseScroll",this.mouseWheelEventHandler)};PersonalizationPreventParentScrollDirective.prototype.onMouseWheel=function(t){var e=this.element.nativeElement;var n=t.originalEvent&&(t.originalEvent.wheelDeltaY||t.originalEvent.wheelDelta);var o=-(t.deltaY||t.delta)||0;e.parentElement.parentElement.parentElement.scrollTop-=t.wheelDeltaY||n||t.wheelDelta||o;t.stopPropagation();t.preventDefault();t.returnValue=false};PersonalizationPreventParentScrollDirective=o["__decorate"]([Object(x["Directive"])({selector:"[persoPreventParentScroll]"}),o["__param"](0,Object(x["Inject"])(x["ElementRef"]))],PersonalizationPreventParentScrollDirective);return PersonalizationPreventParentScrollDirective}();window.__smartedit__.addDecoratorPayload("Component","PersonalizationPreventParentScrollComponent",{selector:"personalization-prevent-parent-scroll",template:n(8)});var V=function(){function PersonalizationPreventParentScrollComponent(){}PersonalizationPreventParentScrollComponent=o["__decorate"]([Object(i["SeDowngradeComponent"])(),Object(x["Component"])({selector:"personalization-prevent-parent-scroll",template:n(8)})],PersonalizationPreventParentScrollComponent);return PersonalizationPreventParentScrollComponent}();var R=function(){function PersonalizationsmarteditCommonsComponentsModule(){}PersonalizationsmarteditCommonsComponentsModule=o["__decorate"]([Object(x["NgModule"])({imports:[D["CommonModule"]],declarations:[N,M,O,V],entryComponents:[O,V],exports:[N,M,O,V]})],PersonalizationsmarteditCommonsComponentsModule);return PersonalizationsmarteditCommonsComponentsModule}();var $=n(20);var L=function(){BaseSiteHeaderInterceptor.$inject=["sharedDataService"];function BaseSiteHeaderInterceptor(t){this.sharedDataService=t}t=BaseSiteHeaderInterceptor;BaseSiteHeaderInterceptor.prototype.intercept=function(e,n){if(t.PERSONALIZATION_ENDPOINT.test(e.url)){return Object(w["from"])(this.sharedDataService.get("experience")).pipe(Object($["switchMap"])((function(o){if(o.catalogDescriptor.siteId){var i=e.clone({headers:e.headers.set(t.HEADER_NAME,o.catalogDescriptor.siteId)});return n.handle(i)}return n.handle(e)})))}else{return n.handle(e)}};var t;BaseSiteHeaderInterceptor.HEADER_NAME="Basesite";BaseSiteHeaderInterceptor.PERSONALIZATION_ENDPOINT=/\/personalizationwebservices/;BaseSiteHeaderInterceptor=t=o["__decorate"]([Object(x["Injectable"])()],BaseSiteHeaderInterceptor);return BaseSiteHeaderInterceptor}();var U={provide:"COMPONENT_CONTAINER_TYPE",useValue:"CxCmsComponentContainer"};var k={provide:"CONTAINER_SOURCE_ID_ATTR",useValue:"data-smartedit-container-source-id"};var j=function(){PersonalizationsmarteditComponentHandlerService.$inject=["componentHandlerService","yjQuery","CONTAINER_TYPE_ATTRIBUTE","CONTAINER_ID_ATTRIBUTE","TYPE_ATTRIBUTE","CONTENT_SLOT_TYPE","COMPONENT_CONTAINER_TYPE","CONTAINER_SOURCE_ID_ATTR"];function PersonalizationsmarteditComponentHandlerService(t,e,n,o,i,a,r,s){this.componentHandlerService=t;this.yjQuery=e;this.CONTAINER_TYPE_ATTRIBUTE=n;this.CONTAINER_ID_ATTRIBUTE=o;this.TYPE_ATTRIBUTE=i;this.CONTENT_SLOT_TYPE=a;this.COMPONENT_CONTAINER_TYPE=r;this.CONTAINER_SOURCE_ID_ATTR=s}PersonalizationsmarteditComponentHandlerService.prototype.getParentContainerForComponent=function(t){var e=t.closest("["+this.CONTAINER_TYPE_ATTRIBUTE+"="+this.COMPONENT_CONTAINER_TYPE+"]");return e};PersonalizationsmarteditComponentHandlerService.prototype.getParentContainerIdForComponent=function(t){var e=t.closest("["+this.CONTAINER_TYPE_ATTRIBUTE+"="+this.COMPONENT_CONTAINER_TYPE+"]");return e.attr(this.CONTAINER_ID_ATTRIBUTE)};PersonalizationsmarteditComponentHandlerService.prototype.getParentContainerSourceIdForComponent=function(t){var e=t.closest("["+this.CONTAINER_TYPE_ATTRIBUTE+"="+this.COMPONENT_CONTAINER_TYPE+"]");return e.attr(this.CONTAINER_SOURCE_ID_ATTR)};PersonalizationsmarteditComponentHandlerService.prototype.getParentSlotForComponent=function(t){var e=t.closest("["+this.TYPE_ATTRIBUTE+"="+this.CONTENT_SLOT_TYPE+"]");return e};PersonalizationsmarteditComponentHandlerService.prototype.getParentSlotIdForComponent=function(t){return this.componentHandlerService.getParentSlotForComponent(t)};PersonalizationsmarteditComponentHandlerService.prototype.getOriginalComponent=function(t,e){return this.componentHandlerService.getOriginalComponent(t,e)};PersonalizationsmarteditComponentHandlerService.prototype.isExternalComponent=function(t,e){return this.componentHandlerService.isExternalComponent(t,e)};PersonalizationsmarteditComponentHandlerService.prototype.getCatalogVersionUuid=function(t){return this.componentHandlerService.getCatalogVersionUuid(t)};PersonalizationsmarteditComponentHandlerService.prototype.getAllSlotsSelector=function(){return this.componentHandlerService.getAllSlotsSelector()};PersonalizationsmarteditComponentHandlerService.prototype.getFromSelector=function(t){return this.yjQuery(t)};PersonalizationsmarteditComponentHandlerService.prototype.getContainerSourceIdForContainerId=function(t){var e=this.getAllSlotsSelector();e+=" ["+this.CONTAINER_ID_ATTRIBUTE+'="'+t+'"]';var n=this.getFromSelector(e);return n[0]?n[0].getAttribute(this.CONTAINER_SOURCE_ID_ATTR):""};PersonalizationsmarteditComponentHandlerService=o["__decorate"]([Object(i["SeInjectable"])()],PersonalizationsmarteditComponentHandlerService);return PersonalizationsmarteditComponentHandlerService}();var F=function(){PersonalizationsmarteditCustomizeViewHelper.$inject=["personalizationsmarteditComponentHandlerService","lodash"];function PersonalizationsmarteditCustomizeViewHelper(t,e){this.personalizationsmarteditComponentHandlerService=t;this.lodash=e}PersonalizationsmarteditCustomizeViewHelper.prototype.getSourceContainersInfo=function(){var t=this;var e=this.personalizationsmarteditComponentHandlerService.getAllSlotsSelector();e+=" [data-smartedit-container-source-id]";var n=this.personalizationsmarteditComponentHandlerService.getFromSelector(e);var o=n.map((function(e,n){var o=t.personalizationsmarteditComponentHandlerService.getFromSelector(n);var i={containerId:t.personalizationsmarteditComponentHandlerService.getParentContainerIdForComponent(o),containerSourceId:t.personalizationsmarteditComponentHandlerService.getParentContainerSourceIdForComponent(o)};return i}));return this.lodash.countBy(o,"containerSourceId")};PersonalizationsmarteditCustomizeViewHelper=o["__decorate"]([Object(i["SeInjectable"])()],PersonalizationsmarteditCustomizeViewHelper);return PersonalizationsmarteditCustomizeViewHelper}();var B=function(){PersonalizationsmarteditContextService.$inject=["yjQuery","contextualMenuService","personalizationsmarteditContextServiceReverseProxy","personalizationsmarteditContextUtils"];function PersonalizationsmarteditContextService(t,e,n,o){this.yjQuery=t;this.contextualMenuService=e;this.personalizationsmarteditContextServiceReverseProxy=n;this.personalizationsmarteditContextUtils=o;var i=o.getContextObject();this.setPersonalization(i.personalization);this.setCustomize(i.customize);this.setCombinedView(i.combinedView);this.setSeData(i.seData)}PersonalizationsmarteditContextService.prototype.getPersonalization=function(){return this.personalization};PersonalizationsmarteditContextService.prototype.setPersonalization=function(t){this.personalization=t;this.contextualMenuService.refreshMenuItems()};PersonalizationsmarteditContextService.prototype.getCustomize=function(){return this.customize};PersonalizationsmarteditContextService.prototype.setCustomize=function(t){this.customize=t;this.contextualMenuService.refreshMenuItems()};PersonalizationsmarteditContextService.prototype.getCombinedView=function(){return this.combinedView};PersonalizationsmarteditContextService.prototype.setCombinedView=function(t){this.combinedView=t;this.contextualMenuService.refreshMenuItems()};PersonalizationsmarteditContextService.prototype.getSeData=function(){return this.seData};PersonalizationsmarteditContextService.prototype.setSeData=function(t){this.seData=t};PersonalizationsmarteditContextService.prototype.isCurrentPageActiveWorkflowRunning=function(){return this.personalizationsmarteditContextServiceReverseProxy.isCurrentPageActiveWorkflowRunning()};PersonalizationsmarteditContextService=o["__decorate"]([Object(i["SeInjectable"])()],PersonalizationsmarteditContextService);return PersonalizationsmarteditContextService}();var H=function(){PersonalizationsmarteditContextServiceProxy.$inject=["personalizationsmarteditContextService","crossFrameEventService"];function PersonalizationsmarteditContextServiceProxy(t,e){this.personalizationsmarteditContextService=t;this.crossFrameEventService=e}PersonalizationsmarteditContextServiceProxy.prototype.setPersonalization=function(t){this.personalizationsmarteditContextService.setPersonalization(t)};PersonalizationsmarteditContextServiceProxy.prototype.setCustomize=function(t){this.personalizationsmarteditContextService.setCustomize(t);this.crossFrameEventService.publish("PERSONALIZATION_CUSTOMIZE_CONTEXT_SYNCHRONIZED")};PersonalizationsmarteditContextServiceProxy.prototype.setCombinedView=function(t){this.personalizationsmarteditContextService.setCombinedView(t);this.crossFrameEventService.publish("PERSONALIZATION_COMBINEDVIEW_CONTEXT_SYNCHRONIZED")};PersonalizationsmarteditContextServiceProxy.prototype.setSeData=function(t){this.personalizationsmarteditContextService.setSeData(t)};PersonalizationsmarteditContextServiceProxy=o["__decorate"]([Object(i["GatewayProxied"])("setPersonalization","setCustomize","setCombinedView","setSeData"),Object(i["SeInjectable"])()],PersonalizationsmarteditContextServiceProxy);return PersonalizationsmarteditContextServiceProxy}();var Z=function(){function PersonalizationsmarteditContextServiceReverseProxy(){}PersonalizationsmarteditContextServiceReverseProxy.prototype.applySynchronization=function(){"proxyFunction";return undefined};PersonalizationsmarteditContextServiceReverseProxy.prototype.isCurrentPageActiveWorkflowRunning=function(){"proxyFunction";return undefined};PersonalizationsmarteditContextServiceReverseProxy=o["__decorate"]([Object(i["GatewayProxied"])("applySynchronization","isCurrentPageActiveWorkflowRunning"),Object(i["SeInjectable"])()],PersonalizationsmarteditContextServiceReverseProxy);return PersonalizationsmarteditContextServiceReverseProxy}();var W=function(){PersonalizationsmarteditContextualMenuService.$inject=["personalizationsmarteditContextService","personalizationsmarteditComponentHandlerService","personalizationsmarteditUtils","personalizationsmarteditContextMenuServiceProxy","crossFrameEventService","EVENTS","lodash"];function PersonalizationsmarteditContextualMenuService(t,e,n,o,i,a,r){this.personalizationsmarteditContextService=t;this.personalizationsmarteditComponentHandlerService=e;this.personalizationsmarteditUtils=n;this.personalizationsmarteditContextMenuServiceProxy=o;this.crossFrameEventService=i;this.EVENTS=a;this.lodash=r;this.isWorkflowRunningBoolean=true;this.init()}t=PersonalizationsmarteditContextualMenuService;PersonalizationsmarteditContextualMenuService.prototype.init=function(){var t=this;this.crossFrameEventService.subscribe(this.EVENTS.PAGE_CHANGE,(function(){t.updateWorkflowStatus()}));this.crossFrameEventService.subscribe(this.EVENTS.PAGE_UPDATED,(function(){t.updateWorkflowStatus()}));this.updateWorkflowStatus()};PersonalizationsmarteditContextualMenuService.prototype.refreshContext=function(){this.contextPersonalization=this.personalizationsmarteditContextService.getPersonalization();this.contextCustomize=this.personalizationsmarteditContextService.getCustomize();this.contextCombinedView=this.personalizationsmarteditContextService.getCombinedView();this.contextSeData=this.personalizationsmarteditContextService.getSeData()};PersonalizationsmarteditContextualMenuService.prototype.openDeleteAction=function(t){var e=this.lodash.isString(t.componentAttributes)?JSON.parse(t.componentAttributes):t.componentAttributes;var n={};n.containerId=t.containerId;n.containerSourceId=e.smarteditContainerSourceId;n.slotId=t.slotId;n.actionId=e.smarteditPersonalizationActionId||null;n.selectedVariationCode=e.smarteditPersonalizationVariationId||null;n.selectedCustomizationCode=e.smarteditPersonalizationCustomizationId||null;var o=e.smarteditCatalogVersionUuid.split("/");n.componentCatalog=o[0];n.componentCatalogVersion=o[1];var i=this.getSelectedCustomization(n.selectedCustomizationCode);n.catalog=i.catalog;n.catalogVersion=i.catalogVersion;n.slotsToRefresh=this.getSlotsToRefresh(e.smarteditContainerSourceId);this.personalizationsmarteditContextMenuServiceProxy.openDeleteAction(n)};PersonalizationsmarteditContextualMenuService.prototype.openAddAction=function(t){var e=this.lodash.isString(t.componentAttributes)?JSON.parse(t.componentAttributes):t.componentAttributes;var n={};n.componentType=t.componentType;n.componentId=t.componentId;n.containerId=t.containerId;n.containerSourceId=e.smarteditContainerSourceId;n.slotId=t.slotId;n.actionId=e.smarteditPersonalizationActionId||null;n.selectedVariationCode=this.getSelectedVariationCode();var o=e.smarteditCatalogVersionUuid.split("/");n.componentCatalog=o[0];var i=this.getSelectedCustomization();n.catalog=i.catalog;n.selectedCustomizationCode=i.code;var a=this.personalizationsmarteditComponentHandlerService.getParentSlotForComponent(t.element);var r=this.personalizationsmarteditComponentHandlerService.getCatalogVersionUuid(a).split("/");n.slotCatalog=r[0];n.slotsToRefresh=this.getSlotsToRefresh(e.smarteditContainerSourceId);n.slotsToRefresh.push(t.slotId);return this.personalizationsmarteditContextMenuServiceProxy.openAddAction(n)};PersonalizationsmarteditContextualMenuService.prototype.openEditAction=function(t){var e=this.lodash.isString(t.componentAttributes)?JSON.parse(t.componentAttributes):t.componentAttributes;var n={};n.componentType=t.componentType;n.componentId=t.componentId;n.containerId=t.containerId;n.containerSourceId=e.smarteditContainerSourceId;n.slotId=t.slotId;n.actionId=e.smarteditPersonalizationActionId||null;n.selectedVariationCode=e.smarteditPersonalizationVariationId||null;n.selectedCustomizationCode=e.smarteditPersonalizationCustomizationId||null;n.componentUuid=e.smarteditComponentUuid||null;n.slotsToRefresh=this.getSlotsToRefresh(e.smarteditContainerSourceId);return this.personalizationsmarteditContextMenuServiceProxy.openEditAction(n)};PersonalizationsmarteditContextualMenuService.prototype.openEditComponentAction=function(t){var e=this.lodash.isString(t.componentAttributes)?JSON.parse(t.componentAttributes):t.componentAttributes;var n={};n.smarteditComponentType=e.smarteditComponentType;n.smarteditComponentUuid=e.smarteditComponentUuid;n.smarteditCatalogVersionUuid=e.smarteditCatalogVersionUuid;return this.personalizationsmarteditContextMenuServiceProxy.openEditComponentAction(n)};PersonalizationsmarteditContextualMenuService.prototype.isCustomizeObjectValid=function(t){return this.lodash.isObject(t.selectedCustomization)&&this.lodash.isObject(t.selectedVariations)&&!this.lodash.isArray(t.selectedVariations)};PersonalizationsmarteditContextualMenuService.prototype.isContextualMenuEnabled=function(){return this.isCustomizeObjectValid(this.contextCustomize)||this.contextCombinedView.enabled&&this.isCustomizeObjectValid(this.contextCombinedView.customize)};PersonalizationsmarteditContextualMenuService.prototype.isElementHighlighted=function(t){if(this.contextCombinedView.enabled){return this.lodash.indexOf(this.contextCombinedView.customize.selectedComponents,t.componentAttributes.smarteditContainerSourceId)>-1}else{return this.lodash.indexOf(this.contextCustomize.selectedComponents,t.componentAttributes.smarteditContainerSourceId)>-1}};PersonalizationsmarteditContextualMenuService.prototype.isSlotInCurrentCatalog=function(t){var e=this.personalizationsmarteditComponentHandlerService.getParentSlotForComponent(t.element);var n=this.personalizationsmarteditComponentHandlerService.getCatalogVersionUuid(e);var o=this.contextSeData.seExperienceData.catalogDescriptor.catalogVersionUuid;return o===n};PersonalizationsmarteditContextualMenuService.prototype.isComponentInCurrentCatalog=function(t){var e=this.contextSeData.seExperienceData.catalogDescriptor.catalogVersionUuid;var n=t.componentAttributes.smarteditCatalogVersionUuid;return e===n};PersonalizationsmarteditContextualMenuService.prototype.isSelectedCustomizationFromCurrentCatalog=function(){var t=this.contextCustomize.selectedCustomization||this.contextCombinedView.customize.selectedCustomization;if(t){return this.personalizationsmarteditUtils.isItemFromCurrentCatalog(t,this.personalizationsmarteditContextService.getSeData())}return false};PersonalizationsmarteditContextualMenuService.prototype.isCustomizationFromCurrentCatalog=function(t){var e=this.contextCombinedView.selectedItems||[];var n=e.filter((function(e){return e.customization.code===t.componentAttributes.smarteditPersonalizationCustomizationId&&e.variation.code===t.componentAttributes.smarteditPersonalizationVariationId}));n=n.shift();if(n){return this.personalizationsmarteditUtils.isItemFromCurrentCatalog(n.customization,this.personalizationsmarteditContextService.getSeData())}return false};PersonalizationsmarteditContextualMenuService.prototype.isEditPersonalizationInWorkflowAllowed=function(e){var n=this.personalizationsmarteditContextService.getSeData().seConfigurationData||[];var o=n[t.EDIT_PERSONALIZATION_IN_WORKFLOW]===true;if(o){return e}else{return e&&!this.isWorkflowRunningBoolean}};PersonalizationsmarteditContextualMenuService.prototype.isPersonalizationAllowedInWorkflow=function(){this.refreshContext();return this.isEditPersonalizationInWorkflowAllowed(this.contextPersonalization.enabled)};PersonalizationsmarteditContextualMenuService.prototype.isContextualMenuAddItemEnabled=function(t){this.refreshContext();var e=this.isContextualMenuEnabled();e=e&&!this.isElementHighlighted(t);e=e&&this.isSlotInCurrentCatalog(t);e=e&&this.isSelectedCustomizationFromCurrentCatalog();return this.isEditPersonalizationInWorkflowAllowed(e)};PersonalizationsmarteditContextualMenuService.prototype.isContextualMenuEditItemEnabled=function(t){this.refreshContext();var e=this.contextPersonalization.enabled;e=e&&!this.lodash.isUndefined(t.componentAttributes.smarteditPersonalizationActionId);e=e&&this.isSlotInCurrentCatalog(t);e=e&&(this.isSelectedCustomizationFromCurrentCatalog()||this.isCustomizationFromCurrentCatalog(t));return this.isEditPersonalizationInWorkflowAllowed(e)};PersonalizationsmarteditContextualMenuService.prototype.isContextualMenuDeleteItemEnabled=function(t){return this.isContextualMenuEditItemEnabled(t)};PersonalizationsmarteditContextualMenuService.prototype.isContextualMenuShowActionListEnabled=function(t){this.refreshContext();var e=!this.lodash.isUndefined(t.componentAttributes.smarteditPersonalizationActionId);e=e&&this.contextCombinedView.enabled;e=e&&!this.contextCombinedView.customize.selectedCustomization;return e};PersonalizationsmarteditContextualMenuService.prototype.isContextualMenuInfoEnabled=function(){this.refreshContext();var t=this.contextPersonalization.enabled;t=t&&!this.lodash.isObject(this.contextCustomize.selectedVariations);t=t||this.lodash.isArray(this.contextCustomize.selectedVariations);t=t&&!this.contextCombinedView.enabled;return t};PersonalizationsmarteditContextualMenuService.prototype.isContextualMenuInfoItemEnabled=function(){var t=this.isContextualMenuInfoEnabled();return t||!this.isEditPersonalizationInWorkflowAllowed(this.contextPersonalization.enabled)};PersonalizationsmarteditContextualMenuService.prototype.isContextualMenuEditComponentItemEnabled=function(t){this.refreshContext();var e=this.contextPersonalization.enabled;e=e&&!this.contextCombinedView.enabled&&this.isComponentInCurrentCatalog(t);return e};PersonalizationsmarteditContextualMenuService.prototype.getSelectedVariationCode=function(){if(this.personalizationsmarteditContextService.getCombinedView().enabled){return this.personalizationsmarteditContextService.getCombinedView().customize.selectedVariations.code}return this.personalizationsmarteditContextService.getCustomize().selectedVariations.code};PersonalizationsmarteditContextualMenuService.prototype.getSelectedCustomization=function(t){if(this.personalizationsmarteditContextService.getCombinedView().enabled){var e=this.personalizationsmarteditContextService.getCombinedView().customize.selectedCustomization;if(!e&&t){e=this.personalizationsmarteditContextService.getCombinedView().selectedItems.filter((function(e){return e.customization.code===t}))[0].customization}return e}return this.personalizationsmarteditContextService.getCustomize().selectedCustomization};PersonalizationsmarteditContextualMenuService.prototype.getSlotsToRefresh=function(t){var e=this;var n=this.personalizationsmarteditComponentHandlerService.getAllSlotsSelector();n+=' [data-smartedit-container-source-id="'+t+'"]';var o=this.personalizationsmarteditComponentHandlerService.getFromSelector(n);var i=Array.prototype.slice.call(this.lodash.map(o,(function(t){return e.personalizationsmarteditComponentHandlerService.getParentSlotIdForComponent(e.personalizationsmarteditComponentHandlerService.getFromSelector(t))})));return i};PersonalizationsmarteditContextualMenuService.prototype.updateWorkflowStatus=function(){var t=this;this.personalizationsmarteditContextService.isCurrentPageActiveWorkflowRunning().then((function(e){t.isWorkflowRunningBoolean=e}))};var t;PersonalizationsmarteditContextualMenuService.EDIT_PERSONALIZATION_IN_WORKFLOW="personalizationsmartedit.editPersonalizationInWorkflow.enabled";PersonalizationsmarteditContextualMenuService=t=o["__decorate"]([Object(i["SeInjectable"])()],PersonalizationsmarteditContextualMenuService);return PersonalizationsmarteditContextualMenuService}();var Y={provide:"ACTIONS_DETAILS",useValue:"/personalizationwebservices/v1/catalogs/:catalogId/catalogVersions/:catalogVersion/actions"};var q=function(){PersonalizationsmarteditRestService.$inject=["restServiceFactory","personalizationsmarteditContextService","ACTIONS_DETAILS"];function PersonalizationsmarteditRestService(t,e,n){this.restServiceFactory=t;this.personalizationsmarteditContextService=e;this.ACTIONS_DETAILS=n}PersonalizationsmarteditRestService.prototype.extendRequestParamObjWithCatalogAwarePathVariables=function(t,e){e=e||{};var n=this.personalizationsmarteditContextService.getSeData().seExperienceData;var o={catalogId:e.catalog||n.catalogDescriptor.catalogId,catalogVersion:e.catalogVersion||n.catalogDescriptor.catalogVersion};t=c["extend"](t,o);return t};PersonalizationsmarteditRestService.prototype.getCxCmsAllActionsForContainer=function(t,e){var n;e=e||{};var o=this.restServiceFactory.get(this.ACTIONS_DETAILS);n={type:"CXCMSACTION",customizationStatus:"ENABLED",variationStatus:"ENABLED",catalogs:"ALL",needsTotal:true,containerId:t,pageSize:e.currentSize||25,currentPage:e.currentPage||0};n=this.extendRequestParamObjWithCatalogAwarePathVariables(n,undefined);return o.get(n)};PersonalizationsmarteditRestService=o["__decorate"]([Object(i["SeInjectable"])()],PersonalizationsmarteditRestService);return PersonalizationsmarteditRestService}();var G=function(){function PersonalizationsmarteditContextMenuServiceProxy(){}PersonalizationsmarteditContextMenuServiceProxy.prototype.openDeleteAction=function(t){"proxyFunction";return undefined};PersonalizationsmarteditContextMenuServiceProxy.prototype.openAddAction=function(t){"proxyFunction";return undefined};PersonalizationsmarteditContextMenuServiceProxy.prototype.openEditAction=function(t){"proxyFunction";return undefined};PersonalizationsmarteditContextMenuServiceProxy.prototype.openEditComponentAction=function(t){"proxyFunction";return undefined};PersonalizationsmarteditContextMenuServiceProxy=o["__decorate"]([Object(i["GatewayProxied"])("openDeleteAction","openAddAction","openEditAction","openEditComponentAction"),Object(i["SeInjectable"])()],PersonalizationsmarteditContextMenuServiceProxy);return PersonalizationsmarteditContextMenuServiceProxy}();var K=function(){function PersonalizationsmarteditServicesModule(){}PersonalizationsmarteditServicesModule=o["__decorate"]([Object(i["SeModule"])({imports:["smarteditServicesModule","yLoDashModule",A],providers:[j,F,B,H,Z,q,W,G,U,k,Y]})],PersonalizationsmarteditServicesModule);return PersonalizationsmarteditServicesModule}();window.__smartedit__.addDecoratorPayload("SeComponent","PersonalizationsmarteditShowComponentInfoListComponent",{templateUrl:"personalizationsmarteditShowComponentInfoListTemplate.html",inputs:["containerId"]});var Q=function(){PersonalizationsmarteditShowComponentInfoListComponent.$inject=["personalizationsmarteditContextService","personalizationsmarteditContextualMenuService","personalizationsmarteditUtils","personalizationsmarteditRestService","personalizationsmarteditMessageHandler","$translate","personalizationsmarteditComponentHandlerService","permissionService"];function PersonalizationsmarteditShowComponentInfoListComponent(t,e,n,o,i,a,r,s){this.personalizationsmarteditContextService=t;this.personalizationsmarteditContextualMenuService=e;this.personalizationsmarteditUtils=n;this.personalizationsmarteditRestService=o;this.personalizationsmarteditMessageHandler=i;this.$translate=a;this.personalizationsmarteditComponentHandlerService=r;this.permissionService=s}PersonalizationsmarteditShowComponentInfoListComponent.prototype.$onInit=function(){this.initPageSize=25;this.moreCustomizationsRequestProcessing=false;this.isContainerIdEmpty=!this.containerId;this.containerSourceId=this.isContainerIdEmpty?"":this.personalizationsmarteditComponentHandlerService.getContainerSourceIdForContainerId(this.containerId);this.pagination=new g({});this.pagination.reset();this.isPageBlocked=false;this.isPersonalizationAllowedInWorkflow=false;this.isPersonalizationBlockedOnPage();this.isPersonalizationAllowedWithWorkflow()};PersonalizationsmarteditShowComponentInfoListComponent.prototype.isCustomizationFromCurrentCatalog=function(t){if(t){return this.personalizationsmarteditUtils.isItemFromCurrentCatalog(t,this.personalizationsmarteditContextService.getSeData())}return false};PersonalizationsmarteditShowComponentInfoListComponent.prototype.isPersonalizationAllowedWithWorkflow=function(){this.isPersonalizationAllowedInWorkflow=this.personalizationsmarteditContextualMenuService.isPersonalizationAllowedInWorkflow()};PersonalizationsmarteditShowComponentInfoListComponent.prototype.isContextualMenuInfoEnabled=function(){return this.personalizationsmarteditContextualMenuService.isContextualMenuInfoEnabled()};PersonalizationsmarteditShowComponentInfoListComponent.prototype.customizationVisible=function(){if(this.actions){return!this.isContainerIdEmpty&&this.actions.length>0}return false};PersonalizationsmarteditShowComponentInfoListComponent.prototype.getCustomizationsFilterObject=function(){return{currentSize:this.initPageSize,currentPage:this.pagination.getPage()+1}};PersonalizationsmarteditShowComponentInfoListComponent.prototype.isPersonalizationBlockedOnPage=function(){var t=this;this.permissionService.isPermitted([{names:["se.personalization.page"]}]).then((function(e){return t.isPageBlocked=!e}))};PersonalizationsmarteditShowComponentInfoListComponent.prototype.getAllActionsAffectingContainerId=function(t,e){var n=this;return this.personalizationsmarteditRestService.getCxCmsAllActionsForContainer(t,e).then((function(t){n.actions=n.actions||[];var e=t.actions||{};for(var o=0,i=e;o<i.length;o++){var a=i[o];a.customization={};a.customization.catalog=a.actionCatalog;a.customization.catalogVersion=a.actionCatalogVersion;n.personalizationsmarteditUtils.getAndSetCatalogVersionNameL10N(a.customization)}n.personalizationsmarteditUtils.uniqueArray(n.actions,e||[]);n.pagination=new g(t.pagination);n.moreCustomizationsRequestProcessing=false}),(function(){n.personalizationsmarteditMessageHandler.sendError(n.$translate.instant("personalization.error.gettingactions"));n.moreCustomizationsRequestProcessing=false}))};PersonalizationsmarteditShowComponentInfoListComponent.prototype.addMoreItems=function(){if(this.pagination.getPage()<this.pagination.getTotalPages()-1&&!this.moreCustomizationsRequestProcessing&&!this.isContainerIdEmpty){this.moreCustomizationsRequestProcessing=true;this.getAllActionsAffectingContainerId(this.containerSourceId,this.getCustomizationsFilterObject())}};PersonalizationsmarteditShowComponentInfoListComponent.prototype.getPage=function(){this.context.addMoreItems()};PersonalizationsmarteditShowComponentInfoListComponent=o["__decorate"]([Object(i["SeComponent"])({templateUrl:"personalizationsmarteditShowComponentInfoListTemplate.html",inputs:["containerId"]})],PersonalizationsmarteditShowComponentInfoListComponent);return PersonalizationsmarteditShowComponentInfoListComponent}();var X=function(){function PersonalizationsmarteditShowComponentInfoListModule(){}PersonalizationsmarteditShowComponentInfoListModule=o["__decorate"]([Object(i["SeModule"])({imports:[A],declarations:[Q]})],PersonalizationsmarteditShowComponentInfoListModule);return PersonalizationsmarteditShowComponentInfoListModule}();window.__smartedit__.addDecoratorPayload("SeComponent","PersonalizationsmarteditShowActionListComponent",{templateUrl:"personalizationsmarteditShowActionListTemplate.html",inputs:["containerId"]});var J=function(){PersonalizationsmarteditShowActionListComponent.$inject=["personalizationsmarteditContextService","personalizationsmarteditUtils","personalizationsmarteditComponentHandlerService"];function PersonalizationsmarteditShowActionListComponent(t,e,n){this.personalizationsmarteditContextService=t;this.personalizationsmarteditUtils=e;this.personalizationsmarteditComponentHandlerService=n}PersonalizationsmarteditShowActionListComponent.prototype.$onInit=function(){this.selectedItems=this.personalizationsmarteditContextService.getCombinedView().selectedItems;this.containerSourceId=this.personalizationsmarteditComponentHandlerService.getContainerSourceIdForContainerId(this.containerId)};PersonalizationsmarteditShowActionListComponent.prototype.getLetterForElement=function(t){return this.personalizationsmarteditUtils.getLetterForElement(t)};PersonalizationsmarteditShowActionListComponent.prototype.getClassForElement=function(t){return this.personalizationsmarteditUtils.getClassForElement(t)};PersonalizationsmarteditShowActionListComponent.prototype.initItem=function(t){var e=this;t.visible=false;(t.variation.actions||[]).forEach((function(n){if(n.containerId&&n.containerId===e.containerSourceId){t.visible=true}}));this.personalizationsmarteditUtils.getAndSetCatalogVersionNameL10N(t.variation)};PersonalizationsmarteditShowActionListComponent.prototype.isCustomizationFromCurrentCatalog=function(t){return this.personalizationsmarteditUtils.isItemFromCurrentCatalog(t,this.personalizationsmarteditContextService.getSeData())};PersonalizationsmarteditShowActionListComponent=o["__decorate"]([Object(i["SeComponent"])({templateUrl:"personalizationsmarteditShowActionListTemplate.html",inputs:["containerId"]})],PersonalizationsmarteditShowActionListComponent);return PersonalizationsmarteditShowActionListComponent}();var tt=function(){function PersonalizationsmarteditShowActionListModule(){}PersonalizationsmarteditShowActionListModule=o["__decorate"]([Object(i["SeModule"])({imports:[A],declarations:[J]})],PersonalizationsmarteditShowActionListModule);return PersonalizationsmarteditShowActionListModule}();var et=function(){PersonalizationsmarteditCustomizeViewServiceProxy.$inject=["personalizationsmarteditCustomizeViewHelper"];function PersonalizationsmarteditCustomizeViewServiceProxy(t){this.personalizationsmarteditCustomizeViewHelper=t}PersonalizationsmarteditCustomizeViewServiceProxy.prototype.getSourceContainersInfo=function(){return this.personalizationsmarteditCustomizeViewHelper.getSourceContainersInfo()};PersonalizationsmarteditCustomizeViewServiceProxy=o["__decorate"]([Object(i["GatewayProxied"])("getSourceContainersInfo"),Object(i["SeInjectable"])()],PersonalizationsmarteditCustomizeViewServiceProxy);return PersonalizationsmarteditCustomizeViewServiceProxy}();var nt=function(){function PersonalizationsmarteditCustomizeViewModule(){}PersonalizationsmarteditCustomizeViewModule=o["__decorate"]([Object(i["SeModule"])({imports:[K],providers:[et]})],PersonalizationsmarteditCustomizeViewModule);return PersonalizationsmarteditCustomizeViewModule}();var ot=function(){function PersonalizationsmarteditContextMenuModule(){}PersonalizationsmarteditContextMenuModule=o["__decorate"]([Object(i["SeModule"])({imports:[K],providers:[G]})],PersonalizationsmarteditContextMenuModule);return PersonalizationsmarteditContextMenuModule}();var it=function(){PersonalizationsmarteditSharedSlotDecoratorController.$inject=["slotSharedService","$element"];function PersonalizationsmarteditSharedSlotDecoratorController(t,e){this.slotSharedService=t;this.$element=e}PersonalizationsmarteditSharedSlotDecoratorController.prototype.positionPanel=function(){var t=this.$element.find(".se-decorative-panel-area");var e=this.$element.find(".se-decoratorative-body-area");var n;var o=t.height();if(this.$element.offset().top<=o){var i=6;n=e.height()+i;e.css("margin-top",-(n+o))}else{n=-32}t.css("margin-top",n)};PersonalizationsmarteditSharedSlotDecoratorController.prototype.$onChanges=function(t){if(t.active&&t.active.currentValue){this.positionPanel();this.isPopupOpened=false}};PersonalizationsmarteditSharedSlotDecoratorController.prototype.$onInit=function(){var t=this;this.slotSharedFlag=false;this.slotSharedService.isSlotShared(this.smarteditComponentId).then((function(e){t.slotSharedFlag=e}))};PersonalizationsmarteditSharedSlotDecoratorController=o["__decorate"]([Object(i["SeInjectable"])()],PersonalizationsmarteditSharedSlotDecoratorController);return PersonalizationsmarteditSharedSlotDecoratorController}();var at=function(){function PersonalizationsmarteditSharedSlotDecoratorModule(){}PersonalizationsmarteditSharedSlotDecoratorModule=o["__decorate"]([Object(i["SeModule"])({imports:["slotSharedServiceModule"]})],PersonalizationsmarteditSharedSlotDecoratorModule);return PersonalizationsmarteditSharedSlotDecoratorModule}();c["module"](at.moduleName).directive("personalizationsmarteditSharedSlot",(function(){return{templateUrl:"personalizationsmarteditSharedSlotDecoratorTemplate.html",restrict:"C",transclude:true,replace:false,controller:it,controllerAs:"ctrl",scope:{},bindToController:{smarteditComponentId:"@",active:"<"}}}));var rt=function(){PersonalizationsmarteditComponentLightUpDecoratorController.$inject=["personalizationsmarteditContextService","personalizationsmarteditComponentHandlerService","crossFrameEventService","CONTAINER_SOURCE_ID_ATTR","OVERLAY_COMPONENT_CLASS","CONTAINER_TYPE_ATTRIBUTE","ID_ATTRIBUTE","TYPE_ATTRIBUTE","CATALOG_VERSION_UUID_ATTRIBUTE","$element","yjQuery"];function PersonalizationsmarteditComponentLightUpDecoratorController(t,e,n,o,i,a,r,s,l,c,d){this.personalizationsmarteditContextService=t;this.personalizationsmarteditComponentHandlerService=e;this.crossFrameEventService=n;this.CONTAINER_SOURCE_ID_ATTR=o;this.OVERLAY_COMPONENT_CLASS=i;this.CONTAINER_TYPE_ATTRIBUTE=a;this.ID_ATTRIBUTE=r;this.TYPE_ATTRIBUTE=s;this.CATALOG_VERSION_UUID_ATTRIBUTE=l;this.$element=c;this.yjQuery=d;this.CONTAINER_TYPE="CxCmsComponentContainer";this.ACTION_ID_ATTR="data-smartedit-personalization-action-id";this.PARENT_CONTAINER_SELECTOR='[class~="'+this.OVERLAY_COMPONENT_CLASS+'"]['+this.CONTAINER_SOURCE_ID_ATTR+"]["+this.CONTAINER_TYPE_ATTRIBUTE+'="'+this.CONTAINER_TYPE+'"]';this.PARENT_CONTAINER_WITH_ACTION_SELECTOR='[class~="'+this.OVERLAY_COMPONENT_CLASS+'"]['+this.CONTAINER_TYPE_ATTRIBUTE+'="'+this.CONTAINER_TYPE+'"]['+this.ACTION_ID_ATTR+"]";this.COMPONENT_SELECTOR="["+this.ID_ATTRIBUTE+"]["+this.CATALOG_VERSION_UUID_ATTRIBUTE+"]["+this.TYPE_ATTRIBUTE+"]"}PersonalizationsmarteditComponentLightUpDecoratorController.prototype.isComponentSelected=function(){var t=false;if(c["isArray"](this.personalizationsmarteditContextService.getCustomize().selectedVariations)){var e=this.personalizationsmarteditComponentHandlerService.getParentContainerIdForComponent(this.$element);t=this.yjQuery.inArray(e,this.personalizationsmarteditContextService.getCustomize().selectedComponents)>-1}return t};PersonalizationsmarteditComponentLightUpDecoratorController.prototype.isVariationComponentSelected=function(t){var e=false;var n=this.personalizationsmarteditContextService.getCustomize();if(n.selectedCustomization&&n.selectedVariations){var o=t.closest(this.PARENT_CONTAINER_WITH_ACTION_SELECTOR);e=o.length>0}return e};PersonalizationsmarteditComponentLightUpDecoratorController.prototype.calculate=function(){var t=this.$element.parent().closest(this.COMPONENT_SELECTOR);var e=t.closest(this.PARENT_CONTAINER_SELECTOR);e.toggleClass("perso__component-decorator",this.isVariationComponentSelected(t));e.toggleClass("hyicon hyicon-checkedlg perso__component-decorator-icon",this.isVariationComponentSelected(t));e.toggleClass("personalizationsmarteditComponentSelected",this.isComponentSelected())};PersonalizationsmarteditComponentLightUpDecoratorController.prototype.$onInit=function(){var t=this;this.unRegister=this.crossFrameEventService.subscribe("PERSONALIZATION_CUSTOMIZE_CONTEXT_SYNCHRONIZED",(function(){t.calculate()}));this.calculate()};PersonalizationsmarteditComponentLightUpDecoratorController.prototype.$onDestroy=function(){this.unRegister()};PersonalizationsmarteditComponentLightUpDecoratorController=o["__decorate"]([Object(i["SeInjectable"])()],PersonalizationsmarteditComponentLightUpDecoratorController);return PersonalizationsmarteditComponentLightUpDecoratorController}();var st=function(){function PersonalizationsmarteditComponentLightUpDecoratorModule(){}PersonalizationsmarteditComponentLightUpDecoratorModule=o["__decorate"]([Object(i["SeModule"])({imports:["yjqueryModule","personalizationsmarteditTemplates","personalizationsmarteditServicesModule","smarteditServicesModule"]})],PersonalizationsmarteditComponentLightUpDecoratorModule);return PersonalizationsmarteditComponentLightUpDecoratorModule}();c["module"](st.moduleName).directive("personalizationsmarteditComponentLightUp",(function(){return{templateUrl:"personalizationsmarteditComponentLightUpDecoratorTemplate.html",restrict:"C",transclude:true,replace:false,controller:rt,controllerAs:"ctrl",scope:{}}}));var lt=function(){PersonalizationsmarteditCombinedViewComponentLightUpDecoratorController.$inject=["$scope","personalizationsmarteditContextService","crossFrameEventService","PERSONALIZATION_COMBINED_VIEW_CSS_MAPPING","$element"];function PersonalizationsmarteditCombinedViewComponentLightUpDecoratorController(t,e,n,o,i){var a=this;this.$scope=t;this.personalizationsmarteditContextService=e;this.crossFrameEventService=n;this.PERSONALIZATION_COMBINED_VIEW_CSS_MAPPING=o;this.$element=i;var r=[];Object.keys(this.PERSONALIZATION_COMBINED_VIEW_CSS_MAPPING).forEach((function(t,e){r.push(a.PERSONALIZATION_COMBINED_VIEW_CSS_MAPPING[e].borderClass)}));this.allBorderClassess=r.join(" ");this.$scope.letterForElement="";this.$scope.classForElement=""}PersonalizationsmarteditCombinedViewComponentLightUpDecoratorController.prototype.calculate=function(){var t=this;var e=this.personalizationsmarteditContextService.getCombinedView();if(e.enabled){var n=this.$element.parent().closest('[class~="smartEditComponentX"][data-smartedit-container-source-id][data-smartedit-container-type="CxCmsComponentContainer"][data-smartedit-personalization-customization-id][data-smartedit-personalization-variation-id]');if(n.length>0){n.removeClass(this.allBorderClassess);(e.selectedItems||[]).forEach((function(e,o){var i=n.data().smarteditPersonalizationCustomizationId===e.customization.code;i=i&&n.data().smarteditPersonalizationVariationId===e.variation.code;var a=o%Object.keys(t.PERSONALIZATION_COMBINED_VIEW_CSS_MAPPING).length;if(i){n.addClass(t.PERSONALIZATION_COMBINED_VIEW_CSS_MAPPING[a].borderClass);t.$scope.letterForElement=String.fromCharCode("a".charCodeAt(0)+a).toUpperCase();t.$scope.classForElement=t.PERSONALIZATION_COMBINED_VIEW_CSS_MAPPING[a].listClass}}))}}};PersonalizationsmarteditCombinedViewComponentLightUpDecoratorController.prototype.$onInit=function(){var t=this;this.unRegister=this.crossFrameEventService.subscribe("PERSONALIZATION_COMBINEDVIEW_CONTEXT_SYNCHRONIZED",(function(){t.calculate()}));this.calculate()};PersonalizationsmarteditCombinedViewComponentLightUpDecoratorController.prototype.$onDestroy=function(){this.unRegister()};PersonalizationsmarteditCombinedViewComponentLightUpDecoratorController=o["__decorate"]([Object(i["SeInjectable"])()],PersonalizationsmarteditCombinedViewComponentLightUpDecoratorController);return PersonalizationsmarteditCombinedViewComponentLightUpDecoratorController}();var ct=function(){function PersonalizationsmarteditCombinedViewComponentLightUpDecoratorModule(){}PersonalizationsmarteditCombinedViewComponentLightUpDecoratorModule=o["__decorate"]([Object(i["SeModule"])({imports:["personalizationsmarteditTemplates","personalizationsmarteditServicesModule","personalizationsmarteditCommonsModule","smarteditServicesModule"]})],PersonalizationsmarteditCombinedViewComponentLightUpDecoratorModule);return PersonalizationsmarteditCombinedViewComponentLightUpDecoratorModule}();c["module"](ct.moduleName).directive("personalizationsmarteditCombinedViewComponentLightUp",(function(){return{templateUrl:"personalizationsmarteditCombinedViewComponentLightUpDecoratorTemplate.html",restrict:"C",transclude:true,replace:false,controller:lt,controllerAs:"ctrl",scope:{}}}));var dt=function(){function PersonalizationsmarteditExternalComponentDecoratorModule(){}PersonalizationsmarteditExternalComponentDecoratorModule=o["__decorate"]([Object(i["SeModule"])({imports:["personalizationsmarteditTemplates"]})],PersonalizationsmarteditExternalComponentDecoratorModule);return PersonalizationsmarteditExternalComponentDecoratorModule}();c["module"](dt.moduleName).directive("personalizationsmarteditExternalComponentDecorator",(function(){return{templateUrl:"personalizationsmarteditExternalComponentDecoratorTemplate.html",restrict:"C",transclude:true,replace:false,controller:"externalComponentDecoratorController",controllerAs:"ctrl",scope:{},bindToController:{active:"=",componentAttributes:"<"}}}));doImport();var mt=function(){function Personalizationsmarteditmodule(){}Personalizationsmarteditmodule=o["__decorate"]([Object(i["SeModule"])({imports:[tt,A,K,X,nt,ot,at,st,ct,dt,"personalizationsmarteditTemplates","decoratorServiceModule","smarteditServicesModule","yjqueryModule","externalComponentDecoratorModule","externalComponentButtonModule"],initialize:["yjQuery","domain","$q","personalizationsmarteditComponentHandlerService","personalizationsmarteditContextualMenuService","personalizationsmarteditContextServiceProxy","personalizationsmarteditCustomizeViewServiceProxy","personalizationsmarteditContextMenuServiceProxy","decoratorService","featureService",function(t,e,n,o,i,a,r,s,l,c){"ngInject";var loadCSS=function(e){var n=t("<link rel='stylesheet' type='text/css' href='"+e+"'>");t("head").append(n)};loadCSS(e+"/personalizationsmartedit/css/style.css");l.addMappings({"^.*Slot$":["personalizationsmarteditSharedSlot"]});l.addMappings({"^.*Component$":["personalizationsmarteditComponentLightUp","personalizationsmarteditCombinedViewComponentLightUp"]});l.addMappings({"^((?!Slot).)*$":["personalizationsmarteditExternalComponentDecorator"]});c.addDecorator({key:"personalizationsmarteditExternalComponentDecorator",nameI18nKey:"personalizationsmarteditExternalComponentDecorator",displayCondition:function(t,e){var i=o.getOriginalComponent(e,t);var a=o.getParentContainerForComponent(i);if(a.length>0&&a[0].attributes["data-smartedit-personalization-action-id"]){return n.when(false)}return n.when(o.isExternalComponent(e,t))}});c.addDecorator({key:"personalizationsmarteditComponentLightUp",nameI18nKey:"personalizationsmarteditComponentLightUp"});c.addDecorator({key:"personalizationsmarteditCombinedViewComponentLightUp",nameI18nKey:"personalizationsmarteditCombinedViewComponentLightUp"});c.addDecorator({key:"personalizationsmarteditSharedSlot",nameI18nKey:"personalizationsmarteditSharedSlot"});c.addContextualMenuButton({key:"personalizationsmartedit.context.show.action.list",i18nKey:"personalization.context.action.list.show",nameI18nKey:"personalization.context.action.list.show",regexpKeys:["^.*Component$"],condition:function(t){return i.isContextualMenuShowActionListEnabled(t)},action:{template:'<personalizationsmartedit-show-action-list data-container-id="ctrl.componentAttributes.smarteditContainerId"></personalizationsmartedit-show-action-list>'},displayClass:"showactionlistbutton",displayIconClass:"hyicon hyicon-combinedview cmsx-ctx__icon personalization-ctx__icon",displaySmallIconClass:"hyicon hyicon-combinedview cmsx-ctx__icon--small",permissions:["se.read.page"],priority:500});c.addContextualMenuButton({key:"personalizationsmartedit.context.info.action",i18nKey:"personalization.context.action.info",nameI18nKey:"personalization.context.action.info",regexpKeys:["^.*Component$"],condition:function(t){return i.isContextualMenuInfoItemEnabled()},action:{template:'<personalizationsmartedit-show-component-info-list data-container-id="ctrl.componentAttributes.smarteditContainerId"></personalizationsmartedit-show-component-info-list>'},displayClass:"infoactionbutton",displayIconClass:"hyicon hyicon-msginfo cmsx-ctx__icon personalization-ctx__icon",displaySmallIconClass:"hyicon hyicon-msginfo cmsx-ctx__icon--small",permissions:["se.edit.page"],priority:510});c.addContextualMenuButton({key:"personalizationsmartedit.context.add.action",i18nKey:"personalization.context.action.add",nameI18nKey:"personalization.context.action.add",regexpKeys:["^.*Component$"],condition:function(t){return i.isContextualMenuAddItemEnabled(t)},action:{callback:function(t,e){i.openAddAction(t)}},displayClass:"addactionbutton",displayIconClass:"hyicon hyicon-addlg cmsx-ctx__icon personalization-ctx__icon",displaySmallIconClass:"hyicon hyicon-addlg cmsx-ctx__icon--small",permissions:["se.edit.page"],priority:520});c.addContextualMenuButton({key:"personalizationsmartedit.context.component.edit.action",i18nKey:"personalization.context.component.action.edit",nameI18nKey:"personalization.context.component.action.edit",regexpKeys:["^.*Component$"],condition:function(t){return i.isContextualMenuEditComponentItemEnabled(t)},action:{callback:function(t,e){i.openEditComponentAction(t)}},displayClass:"editbutton",displayIconClass:"sap-icon--edit cmsx-ctx__icon",displaySmallIconClass:"sap-icon--edit cmsx-ctx__icon--small",permissions:["se.edit.page"],priority:530});c.addContextualMenuButton({key:"personalizationsmartedit.context.edit.action",i18nKey:"personalization.context.action.edit",nameI18nKey:"personalization.context.action.edit",regexpKeys:["^.*Component$"],condition:function(t){return i.isContextualMenuEditItemEnabled(t)},action:{callback:function(t,e){i.openEditAction(t)}},displayClass:"replaceactionbutton",displayIconClass:"hyicon hyicon-change cmsx-ctx__icon personalization-ctx__icon",displaySmallIconClass:"hyicon hyicon-change cmsx-ctx__icon--small",permissions:["se.edit.page"],priority:540});c.addContextualMenuButton({key:"personalizationsmartedit.context.delete.action",i18nKey:"personalization.context.action.delete",nameI18nKey:"personalization.context.action.delete",regexpKeys:["^.*Component$"],condition:function(t){return i.isContextualMenuDeleteItemEnabled(t)},action:{callback:function(t,e){i.openDeleteAction(t)}},displayClass:"removeactionbutton",displayIconClass:"hyicon hyicon-removelg cmsx-ctx__icon personalization-ctx__icon",displaySmallIconClass:"hyicon hyicon-removelg cmsx-ctx__icon--small",permissions:["se.edit.page"],priority:550})}]})],Personalizationsmarteditmodule);return Personalizationsmarteditmodule}();var pt=n(10);var ut=n(11);var Ct=n(12);var ht=function(){function Personalizationsmartedit(){}Personalizationsmartedit=o["__decorate"]([Object(i["SeEntryModule"])("personalizationsmarteditmodule"),Object(x["NgModule"])({imports:[pt["BrowserModule"],ut["UpgradeModule"],R],providers:[{provide:Ct["HTTP_INTERCEPTORS"],useClass:L,multi:true,deps:[i["ISharedDataService"]]}]})],Personalizationsmartedit);return Personalizationsmartedit}()},,function(t,e,n){t.exports=n(5)(65)}]);