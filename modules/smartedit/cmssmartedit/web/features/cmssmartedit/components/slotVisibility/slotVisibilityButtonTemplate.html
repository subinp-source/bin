<div
    class="se-slot-ctx-menu__dropdown-toggle-wrapper 
        se-slot-ctx-menu__dropdown-toggle-wrapper--slot-visibility 
        se-slot-ctx-menu__divider"
    data-uib-dropdown
    data-dropdown-append-to="'#smarteditoverlay'"
    data-ng-if="ctrl.buttonVisible"
    data-is-open="ctrl.isComponentListOpened"
>
    <button
        type="button"
        data-uib-dropdown-toggle
        class="se-slot-ctx-menu__dropdown-toggle--slot-visibility se-slot-ctx-menu__dropdown-toggle"
        data-ng-class="{'se-slot-ctx-menu__dropdown-toggle--open': ctrl.isComponentListOpened}"
        id="slot-visibility-button-{{::ctrl.slotId}}"
    >
        <span class="se-slot-ctx-menu__dropdown-toggle-icon sap-icon--hide"></span>
        <span class="se-slot-ctx-menu__dropdown-toggle-add-on"
            >{{ ::ctrl.hiddenComponentCount }}</span
        >
    </button>

    <div
        class="dropdown-menu dropdown-menu-right se-slot__dropdown-menu"
        data-uib-dropdown-menu
        data-ng-click="ctrl.onInsideClick($event)"
        role="menu"
        id="slot-visibility-list-{{::ctrl.slotId}}"
    >
        <div
            class="se-slot-contextual-menu__header"
            data-translate="se.cms.slotvisibility.list.title"
        ></div>

        <ul class="se-slot-visility__component-list">
            <li
                data-ng-repeat="component in ctrl.hiddenComponents track by $index"
                class="se-slot-visility__component-list-item"
            >
                <span
                    data-y-popover
                    data-ng-if="component.isExternal"
                    data-trigger="'hover'"
                    data-template="ctrl.getTemplateInfoForExternalComponent()"
                >
                    <slot-visibility-component
                        data-component="component"
                        data-component-id="{{::component.uid}}"
                        data-slot-id="{{::ctrl.slotId}}"
                    ></slot-visibility-component>
                </span>
                <slot-visibility-component
                    data-component="component"
                    data-ng-if="!component.isExternal"
                    data-component-id="{{::component.uid}}"
                    data-slot-id="{{::ctrl.slotId}}"
                ></slot-visibility-component>
            </li>
        </ul>
    </div>
</div>
