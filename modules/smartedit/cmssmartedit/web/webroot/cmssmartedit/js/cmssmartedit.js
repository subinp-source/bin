(function(e){var t={};function __webpack_require__(n){if(t[n]){return t[n].exports}var o=t[n]={i:n,l:false,exports:{}};e[n].call(o.exports,o,o.exports,__webpack_require__);o.l=true;return o.exports}__webpack_require__.m=e;__webpack_require__.c=t;__webpack_require__.d=function(e,t,n){if(!__webpack_require__.o(e,t)){Object.defineProperty(e,t,{enumerable:true,get:n})}};__webpack_require__.r=function(e){if(typeof Symbol!=="undefined"&&Symbol.toStringTag){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}Object.defineProperty(e,"__esModule",{value:true})};__webpack_require__.t=function(e,t){if(t&1)e=__webpack_require__(e);if(t&8)return e;if(t&4&&typeof e==="object"&&e&&e.__esModule)return e;var n=Object.create(null);__webpack_require__.r(n);Object.defineProperty(n,"default",{enumerable:true,value:e});if(t&2&&typeof e!="string")for(var o in e)__webpack_require__.d(n,o,function(t){return e[t]}.bind(null,o));return n};__webpack_require__.n=function(e){var t=e&&e.__esModule?function getDefault(){return e["default"]}:function getModuleExports(){return e};__webpack_require__.d(t,"a",t);return t};__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};__webpack_require__.p="";return __webpack_require__(__webpack_require__.s=89)})([function(e,t,n){e.exports=n(82)(1)},function(e,t,n){e.exports=n(7)(0)},function(e,t,n){"use strict";var o=n(19);var i=n.n(o);var r=n(20);n.d(t,"AssetsService",(function(){return r["a"]}));var s=n(21);n.d(t,"CMSModesService",(function(){return s["a"]}));var a=n(14);n.d(t,"TypePermissionsRestService",(function(){return a["a"]}));var c=n(22);n.d(t,"AttributePermissionsRestService",(function(){return c["a"]}));var l=n(23);n.d(t,"CMSTimeService",(function(){return l["a"]}));var d=n(24);var u=n(10);n.d(t,"IPageContentSlotsComponentsRestService",(function(){return u["a"]}));var p=n(25);n.d(t,"IComponentSharedService",(function(){return p["a"]}));var m=n(12);if(n.o(m,"CmsCommonsModule"))n.d(t,"CmsCommonsModule",(function(){return m["CmsCommonsModule"]}));if(n.o(m,"CmsConstantsModule"))n.d(t,"CmsConstantsModule",(function(){return m["CmsConstantsModule"]}));if(n.o(m,"CmsResourceLocationsModule"))n.d(t,"CmsResourceLocationsModule",(function(){return m["CmsResourceLocationsModule"]}));if(n.o(m,"ComponentService"))n.d(t,"ComponentService",(function(){return m["ComponentService"]}));if(n.o(m,"IContextAwareEditableItemService"))n.d(t,"IContextAwareEditableItemService",(function(){return m["IContextAwareEditableItemService"]}));if(n.o(m,"IPageService"))n.d(t,"IPageService",(function(){return m["IPageService"]}));if(n.o(m,"SlotStatus"))n.d(t,"SlotStatus",(function(){return m["SlotStatus"]}));if(n.o(m,"SynchronizationPanelModule"))n.d(t,"SynchronizationPanelModule",(function(){return m["SynchronizationPanelModule"]}));if(n.o(m,"SynchronizationService"))n.d(t,"SynchronizationService",(function(){return m["SynchronizationService"]}));if(n.o(m,"TYPES_RESOURCE_URI"))n.d(t,"TYPES_RESOURCE_URI",(function(){return m["TYPES_RESOURCE_URI"]}));if(n.o(m,"slotEvictionTag"))n.d(t,"slotEvictionTag",(function(){return m["slotEvictionTag"]}));var S=n(30);if(n.o(S,"CmsCommonsModule"))n.d(t,"CmsCommonsModule",(function(){return S["CmsCommonsModule"]}));if(n.o(S,"CmsConstantsModule"))n.d(t,"CmsConstantsModule",(function(){return S["CmsConstantsModule"]}));if(n.o(S,"CmsResourceLocationsModule"))n.d(t,"CmsResourceLocationsModule",(function(){return S["CmsResourceLocationsModule"]}));if(n.o(S,"ComponentService"))n.d(t,"ComponentService",(function(){return S["ComponentService"]}));if(n.o(S,"IContextAwareEditableItemService"))n.d(t,"IContextAwareEditableItemService",(function(){return S["IContextAwareEditableItemService"]}));if(n.o(S,"IPageService"))n.d(t,"IPageService",(function(){return S["IPageService"]}));if(n.o(S,"SlotStatus"))n.d(t,"SlotStatus",(function(){return S["SlotStatus"]}));if(n.o(S,"SynchronizationPanelModule"))n.d(t,"SynchronizationPanelModule",(function(){return S["SynchronizationPanelModule"]}));if(n.o(S,"SynchronizationService"))n.d(t,"SynchronizationService",(function(){return S["SynchronizationService"]}));if(n.o(S,"TYPES_RESOURCE_URI"))n.d(t,"TYPES_RESOURCE_URI",(function(){return S["TYPES_RESOURCE_URI"]}));if(n.o(S,"slotEvictionTag"))n.d(t,"slotEvictionTag",(function(){return S["slotEvictionTag"]}));var v=n(6);n.d(t,"CmsResourceLocationsModule",(function(){return v["c"]}));n.d(t,"TYPES_RESOURCE_URI",(function(){return v["g"]}));var h=n(39);n.d(t,"CmsConstantsModule",(function(){return h["a"]}));var f=n(40);n.d(t,"CmsCommonsModule",(function(){return f["a"]}));var g=n(41);if(n.o(g,"ComponentService"))n.d(t,"ComponentService",(function(){return g["ComponentService"]}));if(n.o(g,"IContextAwareEditableItemService"))n.d(t,"IContextAwareEditableItemService",(function(){return g["IContextAwareEditableItemService"]}));if(n.o(g,"IPageService"))n.d(t,"IPageService",(function(){return g["IPageService"]}));if(n.o(g,"SlotStatus"))n.d(t,"SlotStatus",(function(){return g["SlotStatus"]}));if(n.o(g,"SynchronizationPanelModule"))n.d(t,"SynchronizationPanelModule",(function(){return g["SynchronizationPanelModule"]}));if(n.o(g,"SynchronizationService"))n.d(t,"SynchronizationService",(function(){return g["SynchronizationService"]}));if(n.o(g,"slotEvictionTag"))n.d(t,"slotEvictionTag",(function(){return g["slotEvictionTag"]}))},function(e,t,n){"use strict";n.d(t,"c",(function(){return r}));n.d(t,"b",(function(){return s}));n.d(t,"a",(function(){return a}));n.d(t,"d",(function(){return c}));var o=n(83);var i=n.n(o);var r={UNAVAILABLE:"UNAVAILABLE",IN_SYNC:"IN_SYNC",NOT_SYNC:"NOT_SYNC",IN_PROGRESS:"IN_PROGRESS",SYNC_FAILED:"SYNC_FAILED"};var s={SLOW_POLLING_TIME:2e4,FAST_POLLING_TIME:4e3,SPEED_UP:"syncPollingSpeedUp",SLOW_DOWN:"syncPollingSlowDown",FAST_FETCH:"syncFastFetch",FETCH_SYNC_STATUS_ONCE:"fetchSyncStatusOnce"};var a={CATALOG_SYNCHRONIZED:"CATALOG_SYNCHRONIZED_EVENT"};var c;(function(e){e["Unavailable"]="UNAVAILABLE";e["InSync"]="IN_SYNC";e["NotSync"]="NOT_SYNC";e["InProgress"]="IN_PROGRESS";e["SyncFailed"]="SYNC_FAILED"})(c||(c={}))},function(e,t){e.exports=angular},function(e,t,n){e.exports=n(7)(1)},function(e,t,n){"use strict";n.d(t,"c",(function(){return M}));n.d(t,"a",(function(){return r}));n.d(t,"b",(function(){return s}));n.d(t,"g",(function(){return u}));n.d(t,"f",(function(){return m}));n.d(t,"d",(function(){return x["a"]}));n.d(t,"e",(function(){return w["a"]}));var o=n(1);var i=n(0);var r="CURRENT_CONTEXT_CATALOG";var s="CURRENT_CONTEXT_CATALOG_VERSION";var a="CURRENT_CONTEXT_SITE_ID";var c="CURRENT_PAGE_CONTEXT_CATALOG";var l="CURRENT_PAGE_CONTEXT_CATALOG_VERSION";var d="CURRENT_PAGE_CONTEXT_SITE_ID";var u="/cmswebservices/v1/types";var p="/cmswebservices/v1/sites/"+a+"/catalogs/"+r+"/versions/"+s+"/items";var m="/cmswebservices/v1/sites/"+d+"/catalogs/"+c+"/versions/"+l+"/pagescontentslotscomponents";var S="/cmswebservices/v1/catalogs/"+c+"/versions/"+l+"/pages/:pageUid/contentslots/:slotUid/typerestrictions";var v="/cmswebservices/v1/catalogs/"+c+"/versions/"+l+"/pages/:pageUid/typerestrictions";var h="/cmswebservices/v1/sites/"+a+"/catalogs/"+r+"/versions/"+s+"/pages";var f="/pages/:siteId/:catalogId/:catalogVersion";var g="/trashedpages/:siteId/:catalogId/:catalogVersion";var y="/cmswebservices/v1/sites/"+d+"/catalogs/"+c+"/versions/"+l+"/pagescontentslots";var _="/cmswebservices/v1/sites/:"+a+"/catalogs/:"+r+"/versions/:"+s+"/pagetemplates";var C="/navigations/:siteId/:catalogId/:catalogVersion";var E="/cmswebservices/v1/sites/:"+a+"/catalogs/:"+r+"/versions/:"+s+"/navigations";var b="/cmswebservices/v1/sites/:"+a+"/catalogs/:"+r+"/versions/:"+s+"/navigations/:navigationUid/entries";var I="/cmswebservices/v1/navigationentrytypes";var T="/cmswebservices/v1/sites/"+d+"/catalogs/"+c+"/versions/"+l+"/pagesrestrictions";var O="/cmswebservices/v1/sites/:siteUID/catalogs/:catalogId/versions/:catalogVersion/pagesrestrictions";var R="/cmswebservices/v1/restrictiontypes";var P="/cmswebservices/v1/pagetypesrestrictiontypes";var A="/cmswebservices/v1/pagetypes";var N="/cmssmarteditwebservices/v1/sites/"+d+"/catalogs/"+c+"/versions/"+l+"/synchronizations/versions/:target/pages/:pageUid";var D="/cmssmarteditwebservices/v1/sites/"+a+"/catalogs/"+r+"/versions/"+s+"/synchronizations/versions/:target";var M=function(){function CmsResourceLocationsModule(){}CmsResourceLocationsModule=o["__decorate"]([Object(i["SeModule"])({providers:[i["diNameUtils"].makeValueProvider({CONTEXT_SITE_ID:a}),i["diNameUtils"].makeValueProvider({CONTEXT_CATALOG:r}),i["diNameUtils"].makeValueProvider({CONTEXT_CATALOG_VERSION:s}),i["diNameUtils"].makeValueProvider({PAGE_CONTEXT_SITE_ID:d}),i["diNameUtils"].makeValueProvider({PAGE_CONTEXT_CATALOG:c}),i["diNameUtils"].makeValueProvider({PAGE_CONTEXT_CATALOG_VERSION:l}),i["diNameUtils"].makeValueProvider({TYPES_RESOURCE_URI:u}),i["diNameUtils"].makeValueProvider({ITEMS_RESOURCE_URI:p}),i["diNameUtils"].makeValueProvider({PAGES_CONTENT_SLOT_COMPONENT_RESOURCE_URI:m}),i["diNameUtils"].makeValueProvider({CONTENT_SLOT_TYPE_RESTRICTION_RESOURCE_URI:S}),i["diNameUtils"].makeValueProvider({CONTENT_SLOTS_TYPE_RESTRICTION_RESOURCE_URI:v}),i["diNameUtils"].makeValueProvider({PAGES_LIST_RESOURCE_URI:h}),i["diNameUtils"].makeValueProvider({PAGE_LIST_PATH:f}),i["diNameUtils"].makeValueProvider({TRASHED_PAGE_LIST_PATH:g}),i["diNameUtils"].makeValueProvider({PAGES_CONTENT_SLOT_RESOURCE_URI:y}),i["diNameUtils"].makeValueProvider({PAGE_TEMPLATES_URI:_}),i["diNameUtils"].makeValueProvider({NAVIGATION_MANAGEMENT_PAGE_PATH:C}),i["diNameUtils"].makeValueProvider({NAVIGATION_MANAGEMENT_RESOURCE_URI:E}),i["diNameUtils"].makeValueProvider({NAVIGATION_MANAGEMENT_ENTRIES_RESOURCE_URI:b}),i["diNameUtils"].makeValueProvider({NAVIGATION_MANAGEMENT_ENTRY_TYPES_RESOURCE_URI:I}),i["diNameUtils"].makeValueProvider({CONTEXTUAL_PAGES_RESTRICTIONS_RESOURCE_URI:T}),i["diNameUtils"].makeValueProvider({PAGES_RESTRICTIONS_RESOURCE_URI:O}),i["diNameUtils"].makeValueProvider({RESTRICTION_TYPES_URI:R}),i["diNameUtils"].makeValueProvider({PAGE_TYPES_RESTRICTION_TYPES_URI:P}),i["diNameUtils"].makeValueProvider({PAGE_TYPES_URI:A}),i["diNameUtils"].makeValueProvider({GET_PAGE_SYNCHRONIZATION_RESOURCE_URI:N}),i["diNameUtils"].makeValueProvider({POST_PAGE_SYNCHRONIZATION_RESOURCE_URI:D})]})],CmsResourceLocationsModule);return CmsResourceLocationsModule}();var x=n(9);var w=n(10)},function(e,t){e.exports=vendor_chunk},function(e,t,n){e.exports=n(7)(253)},function(e,t,n){"use strict";n.d(t,"c",(function(){return c}));n.d(t,"b",(function(){return l}));n.d(t,"a",(function(){return d}));var o=n(1);var i=n(8);var r=n.n(i);var s=n(0);var a=n.n(s);var c="/cmswebservices/v1/sites/"+s["CONTEXT_SITE_ID"]+"/cmsitems";var l=new s["EvictionTag"]({event:"CMSITEMS_UPDATE"});var d=function(){CmsitemsRestService.$inject=["restServiceFactory","catalogService"];function CmsitemsRestService(e,t){this.restServiceFactory=e;this.catalogService=t;this.cmsitemsUuidsUri="/cmswebservices/v1/sites/"+s["CONTEXT_SITE_ID"]+"/cmsitems/uuids";this.resource=e.get(c);this.versionedResource=e.get(c+"/:itemUuid");this.uuidsResource=e.get(this.cmsitemsUuidsUri)}CmsitemsRestService.prototype.create=function(e){var t=this;return this.catalogService.getCatalogVersionUUid().then((function(n){e.catalogVersion=e.catalogVersion||n;if(e.onlyOneRestrictionMustApply===undefined){e.onlyOneRestrictionMustApply=false}return t.resource.save(e)}))};CmsitemsRestService.prototype.getById=function(e){return this.resource.getById(e)};CmsitemsRestService.prototype.getByIdAndVersion=function(e,t){return this.versionedResource.get({itemUuid:e,versionId:t})};CmsitemsRestService.prototype.get=function(e){var t=this;return this.catalogService.retrieveUriContext().then((function(n){var o={catalogId:e.catalogId||n.CURRENT_CONTEXT_CATALOG,catalogVersion:e.catalogVersion||n.CURRENT_CONTEXT_CATALOG_VERSION};e=i["merge"](o,e);return t.restServiceFactory.get(c).get(e)}))};CmsitemsRestService.prototype.getByIds=function(e){var t=this;e=Array.from(new Set(e));return this.catalogService.getCatalogVersionUUid().then((function(n){return t.uuidsResource.save({catalogVersion:n,uuids:e})}))};CmsitemsRestService.prototype.update=function(e){return this.resource.update(e)};CmsitemsRestService.prototype.delete=function(e){return this.resource.remove({identifier:e})};var e,t,n,r,a,d,u,p,m;o["__decorate"]([Object(s["Cached"])({actions:[s["rarelyChangingContent"]],tags:[s["userEvictionTag"],l]}),o["__metadata"]("design:type",Function),o["__metadata"]("design:paramtypes",[String]),o["__metadata"]("design:returntype",typeof(e=typeof Promise!=="undefined"&&Promise)==="function"?e:Object)],CmsitemsRestService.prototype,"getById",null);o["__decorate"]([Object(s["Cached"])({actions:[s["rarelyChangingContent"]],tags:[s["userEvictionTag"],l]}),o["__metadata"]("design:type",Function),o["__metadata"]("design:paramtypes",[String,String]),o["__metadata"]("design:returntype",typeof(t=typeof Promise!=="undefined"&&Promise)==="function"?t:Object)],CmsitemsRestService.prototype,"getByIdAndVersion",null);o["__decorate"]([Object(s["Cached"])({actions:[s["rarelyChangingContent"]],tags:[s["userEvictionTag"],l]}),o["__metadata"]("design:type",Function),o["__metadata"]("design:paramtypes",[Object]),o["__metadata"]("design:returntype",typeof(n=typeof Promise!=="undefined"&&Promise)==="function"?n:Object)],CmsitemsRestService.prototype,"get",null);o["__decorate"]([Object(s["Cached"])({actions:[s["rarelyChangingContent"]],tags:[s["userEvictionTag"],l]}),o["__metadata"]("design:type",Function),o["__metadata"]("design:paramtypes",[Array]),o["__metadata"]("design:returntype",typeof(r=typeof Promise!=="undefined"&&Promise)==="function"?r:Object)],CmsitemsRestService.prototype,"getByIds",null);o["__decorate"]([Object(s["InvalidateCache"])(l),o["__metadata"]("design:type",Function),o["__metadata"]("design:paramtypes",[typeof(a=typeof T!=="undefined"&&T)==="function"?a:Object]),o["__metadata"]("design:returntype",typeof(d=typeof Promise!=="undefined"&&Promise)==="function"?d:Object)],CmsitemsRestService.prototype,"update",null);o["__decorate"]([Object(s["InvalidateCache"])(l),o["__metadata"]("design:type",Function),o["__metadata"]("design:paramtypes",[String]),o["__metadata"]("design:returntype",typeof(u=typeof Promise!=="undefined"&&Promise)==="function"?u:Object)],CmsitemsRestService.prototype,"delete",null);CmsitemsRestService=o["__decorate"]([Object(s["SeDowngradeService"])(),Object(s["OperationContextRegistered"])(c.replace(/CONTEXT_SITE_ID/,":CONTEXT_SITE_ID"),"CMS"),o["__metadata"]("design:paramtypes",[typeof(p=typeof s["RestServiceFactory"]!=="undefined"&&s["RestServiceFactory"])==="function"?p:Object,typeof(m=typeof s["ICatalogService"]!=="undefined"&&s["ICatalogService"])==="function"?m:Object])],CmsitemsRestService);return CmsitemsRestService}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var o=function(){function IPageContentSlotsComponentsRestService(){}IPageContentSlotsComponentsRestService.prototype.clearCache=function(){"proxyFunction"};IPageContentSlotsComponentsRestService.prototype.getSlotsToComponentsMapForPageUid=function(e){"proxyFunction";return null};IPageContentSlotsComponentsRestService.prototype.getComponentsForSlot=function(e){"proxyFunction";return null};return IPageContentSlotsComponentsRestService}()},function(e,t,n){e.exports=n(7)(250)},function(e,t,n){"use strict";var o=n(48);n.d(t,"IPageService",(function(){return o["a"]}));var i=n(26);var r=n.n(i);if(n.o(i,"CmsCommonsModule"))n.d(t,"CmsCommonsModule",(function(){return i["CmsCommonsModule"]}));if(n.o(i,"CmsConstantsModule"))n.d(t,"CmsConstantsModule",(function(){return i["CmsConstantsModule"]}));if(n.o(i,"CmsResourceLocationsModule"))n.d(t,"CmsResourceLocationsModule",(function(){return i["CmsResourceLocationsModule"]}));if(n.o(i,"ComponentService"))n.d(t,"ComponentService",(function(){return i["ComponentService"]}));if(n.o(i,"IContextAwareEditableItemService"))n.d(t,"IContextAwareEditableItemService",(function(){return i["IContextAwareEditableItemService"]}));if(n.o(i,"SlotStatus"))n.d(t,"SlotStatus",(function(){return i["SlotStatus"]}));if(n.o(i,"SynchronizationPanelModule"))n.d(t,"SynchronizationPanelModule",(function(){return i["SynchronizationPanelModule"]}));if(n.o(i,"SynchronizationService"))n.d(t,"SynchronizationService",(function(){return i["SynchronizationService"]}));if(n.o(i,"TYPES_RESOURCE_URI"))n.d(t,"TYPES_RESOURCE_URI",(function(){return i["TYPES_RESOURCE_URI"]}));if(n.o(i,"slotEvictionTag"))n.d(t,"slotEvictionTag",(function(){return i["slotEvictionTag"]}));var s=n(47);n.d(t,"slotEvictionTag",(function(){return s["a"]}));var a=n(27);n.d(t,"IContextAwareEditableItemService",(function(){return a["a"]}));var c=n(28);n.d(t,"ComponentService",(function(){return c["a"]}));var l=n(29);n.d(t,"SynchronizationService",(function(){return l["a"]}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var o=n(1);var i=n(4);var r=n.n(i);var s=n(11);var a=n(0);var c=n.n(a);var l=n(3);window.__smartedit__.addDecoratorPayload("SeComponent","SynchronizationPanelComponent",{templateUrl:"synchronizationPanelTemplate.html",inputs:["itemId","getSyncStatus","performSync","headerTemplateUrl","syncItems:=?","onSelectedItemsUpdate","onSyncStatusReady:&?","getApi:&?"]});var d=function(){SynchronizationPanelComponent.$inject=["logService","$attrs","translateService","alertService","systemEventService","timerService","crossFrameEventService","catalogService","l10nFilter","sharedDataService","waitDialogService"];function SynchronizationPanelComponent(e,t,n,o,i,r,s,a,c,d,u){var p=this;this.logService=e;this.$attrs=t;this.translateService=n;this.alertService=o;this.systemEventService=i;this.timerService=r;this.crossFrameEventService=s;this.catalogService=a;this.l10nFilter=c;this.sharedDataService=d;this.waitDialogService=u;this.isLoading=false;this.message=null;this.showItemList=true;this.disableList=false;this.syncPendingItems=[];this.selectedItems=[];this.refreshInterval=l["b"].SLOW_POLLING_TIME;this.api={selectAll:function(){if(p.syncStatus){p.syncStatus.selected=true;p.selectionChange(0)}else{throw new Error("Synchronization status is not available. The 'selectAll' function should be used with 'onSyncStatusReady' event.")}},displayItemList:function(e){p.showItemList=e},disableItemList:function(e){p.disableList=e},setMessage:function(e){p.message=e},disableItem:null}}SynchronizationPanelComponent.prototype.$onInit=function(){var e=this;this.syncItems=function(){var t=e.getRows().filter((function(e){return e.selected})).map((function(e){var t=e.itemId,n=e.itemType;return{itemId:t,itemType:n}}));Array.prototype.push.apply(e.syncPendingItems,t.map((function(e){return e.itemId})));if(e.selectedItems.length){e.waitDialogService.showWaitModal("se.sync.synchronizing");return e.performSync(t).then((function(){e.refreshInterval=l["b"].FAST_POLLING_TIME;e.resynchTimer.restart(e.refreshInterval);e.systemEventService.publishAsync(l["b"].SPEED_UP,e.itemId)}),(function(){e.logService.warn("[synchronizationPanel] - Could not perform synchronization.");e.waitDialogService.hideWaitModal()}))}else{return Promise.resolve()}};if(typeof this.getApi==="function"){this.getApi({$api:this.api})}this.unsubscribeFastFetch=this.crossFrameEventService.subscribe(l["b"].FAST_FETCH,(function(t,n){return e.fetchSyncStatus(t,n)}));this.fetchSyncStatus();this.resynchTimer=this.timerService.createTimer((function(){return e.fetchSyncStatus()}),this.refreshInterval);this.resynchTimer.start()};SynchronizationPanelComponent.prototype.$onDestroy=function(){this.resynchTimer.teardown();this.unsubscribeFastFetch();this.systemEventService.publishAsync(l["b"].SLOW_DOWN,this.itemId)};SynchronizationPanelComponent.prototype.$postLink=function(){this.showSyncButton=a["stringUtils"].isBlank(this.$attrs.syncItems)};SynchronizationPanelComponent.prototype.getRows=function(){return this.syncStatus?[this.syncStatus].concat(this.syncStatus.selectedDependencies):[]};SynchronizationPanelComponent.prototype.selectionChange=function(e){this.syncStatus.selectedDependencies.forEach((function(t){t.selected=e===0&&t.status!==l["d"].InSync&&!t.isExternal?true:t.selected}));this.selectedItems=this.getRows().filter((function(e){return e.selected}));if(this.onSelectedItemsUpdate){this.onSelectedItemsUpdate(this.selectedItems)}};SynchronizationPanelComponent.prototype.preserveSelection=function(e){var t=(e||[]).map((function(e){return e.itemId}),[]);this.getRows().forEach((function(e){e.selected=t.indexOf(e.itemId)>-1&&e.status!==l["d"].InSync}))};SynchronizationPanelComponent.prototype.isDisabled=function(e){if(this.disableList||this.api.disableItem&&this.api.disableItem(e)){return true}return e!==this.syncStatus&&this.syncStatus.selected||e.status===l["d"].InSync};SynchronizationPanelComponent.prototype.isSyncButtonDisabled=function(){return this.disableList||this.selectedItems.length===0||this.syncPendingItems.length!==0};SynchronizationPanelComponent.prototype.isInSync=function(e){return e.status===l["d"].InSync};SynchronizationPanelComponent.prototype.isOutOfSync=function(e){return e.status===l["d"].NotSync};SynchronizationPanelComponent.prototype.isInProgress=function(e){return e.status===l["d"].InProgress};SynchronizationPanelComponent.prototype.isSyncFailed=function(e){return e.status===l["d"].SyncFailed};SynchronizationPanelComponent.prototype.hasHelp=function(e){return e.dependentItemTypesOutOfSync&&e.dependentItemTypesOutOfSync.length>0};SynchronizationPanelComponent.prototype.buildInfoTemplate=function(e){var t=this;if(e&&e.dependentItemTypesOutOfSync&&!e.isExternal){var n=e.dependentItemTypesOutOfSync.reduce((function(e,n){e+="<div>"+t.translateService.instant(n.i18nKey)+"</div>";return e}),"");return n?"<div>"+n+"</div>":""}else if(e.isExternal){return e.catalogVersionNameTemplate}return""};SynchronizationPanelComponent.prototype.fetchSyncStatus=function(e,t){return o["__awaiter"](this,void 0,Promise,(function(){var e,n,i;return o["__generator"](this,(function(o){switch(o.label){case 0:if(t&&t.itemId!==this.itemId){return[2]}this.isLoading=true;return[4,this.getSyncStatus(this.itemId)];case 1:e=o.sent();return[4,this.sharedDataService.get("experience")];case 2:n=o.sent();i=e.catalogVersionUuid;this.syncStatus=e;this.preserveSelection(this.selectedItems);this.selectionChange();this._updateStatus();this.markExternalComponents(i,this.getRows());this.setTemplateExternalCatalogVersionName(n,this.getRows());if(this.syncPendingItems.length===0){this.refreshInterval=l["b"].SLOW_POLLING_TIME;this.resynchTimer.restart(this.refreshInterval);this.systemEventService.publishAsync(l["b"].SLOW_DOWN,this.itemId)}if(typeof this.onSyncStatusReady==="function"){this.onSyncStatusReady({$syncStatus:e})}this.isLoading=false;return[2]}}))}))};SynchronizationPanelComponent.prototype.markExternalComponents=function(e,t){t.forEach((function(t){t.isExternal=t.catalogVersionUuid!==e}))};SynchronizationPanelComponent.prototype.getInfoTitle=function(e){if(!e.isExternal){return"se.cms.synchronization.panel.update.title"}return""};SynchronizationPanelComponent.prototype.getTemplateInfoForExternalComponent=function(){return"<div>"+this.translateService.instant("se.cms.synchronization.slot.external.component")+"</div>"};SynchronizationPanelComponent.prototype.setTemplateExternalCatalogVersionName=function(e,t){return o["__awaiter"](this,void 0,Promise,(function(){var n,i,r,s;return o["__generator"](this,(function(o){switch(o.label){case 0:n=0,i=t;o.label=1;case 1:if(!(n<i.length))return[3,4];r=i[n];r.catalogVersionNameTemplate="<span></span>";return[4,this.catalogService.getCatalogVersionByUuid(r.catalogVersionUuid,e.siteDescriptor.uid)];case 2:s=o.sent();r.catalogVersionNameTemplate="<div>"+this.l10nFilter(s.catalogName)+"</div>";o.label=3;case 3:n++;return[3,1];case 4:return[2]}}))}))};SynchronizationPanelComponent.prototype._updateStatus=function(){var e=this;var t=false;var n="";var o=this.syncPendingItems.length;this.getRows().forEach((function(i){var r=e.syncPendingItems.indexOf(i.itemId);if(r>-1&&i.status===l["d"].SyncFailed){n=" "+n+i.itemId;t=true}if(r>-1&&i.status!==l["d"].InProgress&&i.status!==l["d"].NotSync){e.syncPendingItems.splice(r,1)}var s=o&&e.syncPendingItems.length===0;if(s||o===0){if(s){e.systemEventService.publishAsync(a["EVENT_CONTENT_CATALOG_UPDATE"]);o=0}e.waitDialogService.hideWaitModal()}if(i.status===l["d"].InProgress&&e.syncPendingItems.indexOf(i.itemId)===-1){e.syncPendingItems.push(i.itemId)}}));if(t){this.alertService.showDanger({message:this.translateService.instant("se.cms.synchronization.panel.failure.message",{items:n})})}};var e,t,n,r,c,d,u,p,m,S,v;SynchronizationPanelComponent=o["__decorate"]([Object(a["SeComponent"])({templateUrl:"synchronizationPanelTemplate.html",inputs:["itemId","getSyncStatus","performSync","headerTemplateUrl","syncItems:=?","onSelectedItemsUpdate","onSyncStatusReady:&?","getApi:&?"]}),o["__metadata"]("design:paramtypes",[typeof(e=typeof a["LogService"]!=="undefined"&&a["LogService"])==="function"?e:Object,typeof(t=typeof i!=="undefined"&&i["IAttributes"])==="function"?t:Object,typeof(n=typeof s["TranslateService"]!=="undefined"&&s["TranslateService"])==="function"?n:Object,typeof(r=typeof a["IAlertService"]!=="undefined"&&a["IAlertService"])==="function"?r:Object,typeof(c=typeof a["SystemEventService"]!=="undefined"&&a["SystemEventService"])==="function"?c:Object,typeof(d=typeof a["TimerService"]!=="undefined"&&a["TimerService"])==="function"?d:Object,typeof(u=typeof a["CrossFrameEventService"]!=="undefined"&&a["CrossFrameEventService"])==="function"?u:Object,typeof(p=typeof a["ICatalogService"]!=="undefined"&&a["ICatalogService"])==="function"?p:Object,typeof(m=typeof a["L10nFilterFn"]!=="undefined"&&a["L10nFilterFn"])==="function"?m:Object,typeof(S=typeof a["ISharedDataService"]!=="undefined"&&a["ISharedDataService"])==="function"?S:Object,typeof(v=typeof a["IWaitDialogService"]!=="undefined"&&a["IWaitDialogService"])==="function"?v:Object])],SynchronizationPanelComponent);return SynchronizationPanelComponent}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var o=n(1);var i=n(0);var r=n.n(i);var s;(function(e){e["CREATE"]="create";e["READ"]="read";e["CHANGE"]="change";e["REMOVE"]="remove"})(s||(s={}));var a=function(){TypePermissionsRestService.$inject=["$log","sessionService","restServiceFactory"];function TypePermissionsRestService(e,t,n){this.$log=e;this.sessionService=t;this.URI="/permissionswebservices/v1/permissions/principals/:user/types";this.resource=n.get(this.URI)}TypePermissionsRestService.prototype.hasCreatePermissionForTypes=function(e){return this._getPermissionsForTypesAndName(e,s.CREATE)};TypePermissionsRestService.prototype.hasReadPermissionForTypes=function(e){return this._getPermissionsForTypesAndName(e,s.READ)};TypePermissionsRestService.prototype.hasUpdatePermissionForTypes=function(e){return this._getPermissionsForTypesAndName(e,s.CHANGE)};TypePermissionsRestService.prototype.hasDeletePermissionForTypes=function(e){return this._getPermissionsForTypesAndName(e,s.REMOVE)};TypePermissionsRestService.prototype.hasAllPermissionsForTypes=function(e){var t=this;var n={};return this._getAllPermissionsForTypes(e).then((function(e){return e.reduce((function(e,n){if(n.permissions){e[n.id]={};e[n.id][s.READ]=t._getPermissionByNameAndResult(n,s.READ);e[n.id][s.CHANGE]=t._getPermissionByNameAndResult(n,s.CHANGE);e[n.id][s.CREATE]=t._getPermissionByNameAndResult(n,s.CREATE);e[n.id][s.REMOVE]=t._getPermissionByNameAndResult(n,s.REMOVE)}return e}),n)}))};TypePermissionsRestService.prototype._getPermissionByNameAndResult=function(e,t){return JSON.parse(e.permissions.find((function(e){return e.key===t})).value)};TypePermissionsRestService.prototype._getPermissionsForTypesAndName=function(e,t){var n=this;return this._getAllPermissionsForTypes(e).then((function(e){return e.reduce((function(e,o){if(o.permissions){e[o.id]=n._getPermissionByNameAndResult(o,t)}return e}),{})}))};TypePermissionsRestService.prototype._getAllPermissionsForTypes=function(e){var t=this;if(e.length<=0){return Promise.resolve([])}return this.sessionService.getCurrentUsername().then((function(n){if(!n){return[]}return t.resource.get({user:n,types:e.join(","),permissionNames:s.CREATE+","+s.CHANGE+","+s.READ+","+s.REMOVE}).then((function(e){return e.permissionsList||[]}),(function(n){if(n){t.$log.error("TypePermissionsRestService - no composed types "+e+" exist")}return Promise.reject(n)}))}))};var e,t,n,r;o["__decorate"]([Object(i["Cached"])({actions:[i["rarelyChangingContent"]],tags:[i["authorizationEvictionTag"]]}),o["__metadata"]("design:type",Function),o["__metadata"]("design:paramtypes",[Array]),o["__metadata"]("design:returntype",typeof(e=typeof Promise!=="undefined"&&Promise)==="function"?e:Object)],TypePermissionsRestService.prototype,"_getAllPermissionsForTypes",null);TypePermissionsRestService=o["__decorate"]([Object(i["SeInjectable"])(),o["__metadata"]("design:paramtypes",[typeof(t=typeof angular!=="undefined"&&angular.ILogService)==="function"?t:Object,typeof(n=typeof i["ISessionService"]!=="undefined"&&i["ISessionService"])==="function"?n:Object,typeof(r=typeof i["IRestServiceFactory"]!=="undefined"&&i["IRestServiceFactory"])==="function"?r:Object])],TypePermissionsRestService);return TypePermissionsRestService}()},function(e,t,n){"use strict";var o=function isOldIE(){var e;return function memorize(){if(typeof e==="undefined"){e=Boolean(window&&document&&document.all&&!window.atob)}return e}}();var i=function getTarget(){var e={};return function memorize(t){if(typeof e[t]==="undefined"){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement){try{n=n.contentDocument.head}catch(e){n=null}}e[t]=n}return e[t]}}();var r=[];function getIndexByIdentifier(e){var t=-1;for(var n=0;n<r.length;n++){if(r[n].identifier===e){t=n;break}}return t}function modulesToDom(e,t){var n={};var o=[];for(var i=0;i<e.length;i++){var s=e[i];var a=t.base?s[0]+t.base:s[0];var c=n[a]||0;var l="".concat(a," ").concat(c);n[a]=c+1;var d=getIndexByIdentifier(l);var u={css:s[1],media:s[2],sourceMap:s[3]};if(d!==-1){r[d].references++;r[d].updater(u)}else{r.push({identifier:l,updater:addStyle(u,t),references:1})}o.push(l)}return o}function insertStyleElement(e){var t=document.createElement("style");var o=e.attributes||{};if(typeof o.nonce==="undefined"){var r=true?n.nc:undefined;if(r){o.nonce=r}}Object.keys(o).forEach((function(e){t.setAttribute(e,o[e])}));if(typeof e.insert==="function"){e.insert(t)}else{var s=i(e.insert||"head");if(!s){throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.")}s.appendChild(t)}return t}function removeStyleElement(e){if(e.parentNode===null){return false}e.parentNode.removeChild(e)}var s=function replaceText(){var e=[];return function replace(t,n){e[t]=n;return e.filter(Boolean).join("\n")}}();function applyToSingletonTag(e,t,n,o){var i=n?"":o.media?"@media ".concat(o.media," {").concat(o.css,"}"):o.css;if(e.styleSheet){e.styleSheet.cssText=s(t,i)}else{var r=document.createTextNode(i);var a=e.childNodes;if(a[t]){e.removeChild(a[t])}if(a.length){e.insertBefore(r,a[t])}else{e.appendChild(r)}}}function applyToTag(e,t,n){var o=n.css;var i=n.media;var r=n.sourceMap;if(i){e.setAttribute("media",i)}else{e.removeAttribute("media")}if(r&&btoa){o+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")}if(e.styleSheet){e.styleSheet.cssText=o}else{while(e.firstChild){e.removeChild(e.firstChild)}e.appendChild(document.createTextNode(o))}}var a=null;var c=0;function addStyle(e,t){var n;var o;var i;if(t.singleton){var r=c++;n=a||(a=insertStyleElement(t));o=applyToSingletonTag.bind(null,n,r,false);i=applyToSingletonTag.bind(null,n,r,true)}else{n=insertStyleElement(t);o=applyToTag.bind(null,n,t);i=function remove(){removeStyleElement(n)}}o(e);return function updateStyle(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap){return}o(e=t)}else{i()}}}e.exports=function(e,t){t=t||{};if(!t.singleton&&typeof t.singleton!=="boolean"){t.singleton=o()}e=e||[];var n=modulesToDom(e,t);return function update(e){e=e||[];if(Object.prototype.toString.call(e)!=="[object Array]"){return}for(var o=0;o<n.length;o++){var i=n[o];var s=getIndexByIdentifier(i);r[s].references--}var a=modulesToDom(e,t);for(var c=0;c<n.length;c++){var l=n[c];var d=getIndexByIdentifier(l);if(r[d].references===0){r[d].updater();r.splice(d,1)}}n=a}}},function(e,t,n){"use strict";e.exports=function(e){var t=[];t.toString=function toString(){return this.map((function(t){var n=cssWithMappingToString(t,e);if(t[2]){return"@media ".concat(t[2]," {").concat(n,"}")}return n})).join("")};t.i=function(e,n,o){if(typeof e==="string"){e=[[null,e,""]]}var i={};if(o){for(var r=0;r<this.length;r++){var s=this[r][0];if(s!=null){i[s]=true}}}for(var a=0;a<e.length;a++){var c=[].concat(e[a]);if(o&&i[c[0]]){continue}if(n){if(!c[2]){c[2]=n}else{c[2]="".concat(n," and ").concat(c[2])}}t.push(c)}};return t};function cssWithMappingToString(e,t){var n=e[1]||"";var o=e[3];if(!o){return n}if(t&&typeof btoa==="function"){var i=toComment(o);var r=o.sources.map((function(e){return"/*# sourceURL=".concat(o.sourceRoot||"").concat(e," */")}));return[n].concat(r).concat([i]).join("\n")}return[n].join("\n")}function toComment(e){var t=btoa(unescape(encodeURIComponent(JSON.stringify(e))));var n="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(t);return"/*# ".concat(n," */")}},function(e,t){},function(e,t){e.exports=moment},function(e,t){},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var o=function(){function AssetsService(e){this.TEST_ASSETS_KEY="testAssets";this.TEST_ASSETS_SRC="/web/webroot";this.PROD_ASSETS_SRC="/cmssmartedit";this.$injector=e}AssetsService.prototype.getAssetsRoot=function(){var e=false;if(this.getInjector().has(this.TEST_ASSETS_KEY)){var t=this.getInjector().get(this.TEST_ASSETS_KEY);e=typeof t==="boolean"?t:false}return e?this.TEST_ASSETS_SRC:this.PROD_ASSETS_SRC};AssetsService.prototype.getInjector=function(){return this.$injector};AssetsService.$inject=["$injector"];return AssetsService}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var o=n(1);var i=n(0);var r=n.n(i);var s=function(){CMSModesService.$inject=["perspectiveService"];function CMSModesService(e){this.perspectiveService=e}e=CMSModesService;CMSModesService.prototype.isVersioningPerspectiveActive=function(){return this.perspectiveService.getActivePerspectiveKey().then((function(t){return t===e.VERSIONING_PERSPECTIVE_KEY}))};var e;CMSModesService.BASIC_PERSPECTIVE_KEY="se.cms.perspective.basic";CMSModesService.ADVANCED_PERSPECTIVE_KEY="se.cms.perspective.advanced";CMSModesService.VERSIONING_PERSPECTIVE_KEY="se.cms.perspective.versioning";CMSModesService=e=o["__decorate"]([Object(i["SeInjectable"])(),o["__metadata"]("design:paramtypes",[Object])],CMSModesService);return CMSModesService}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var o=n(1);var i=n(8);var r=n.n(i);var s=n(0);var a=n.n(s);var c;(function(e){e["READ"]="read";e["CHANGE"]="change"})(c||(c={}));var l=function(){AttributePermissionsRestService.$inject=["restServiceFactory","sessionService","$q","$log","lodash"];function AttributePermissionsRestService(e,t,n,o,i){this.sessionService=t;this.$q=n;this.$log=o;this.lodash=i;this.ATTRIBUTE_PERMISSIONS_URI="/permissionswebservices/v1/permissions/principals/:user/attributes";this.attributePermissionsRestService=e.get(this.ATTRIBUTE_PERMISSIONS_URI)}AttributePermissionsRestService.prototype.hasReadPermissionOnAttributesInType=function(e,t){return this.getPermissionsForAttributesAndNameByType(e,t,c.READ)};AttributePermissionsRestService.prototype.hasChangePermissionOnAttributesInType=function(e,t){return this.getPermissionsForAttributesAndNameByType(e,t,c.CHANGE)};AttributePermissionsRestService.prototype.getPermissionsForAttributesAndNameByType=function(e,t,n){var o=t.map((function(t){return e+"."+t}));return this.getPermissionsForAttributesAndName(o,n).then((function(t){return t[e]}))};AttributePermissionsRestService.prototype.getPermissionsForAttributesAndName=function(e,t){var n=this;return this.getAllPermissionsForAttributes(e).then((function(o){var i=n.concatPermissionsNotFound(e,o);return i.reduce((function(e,o){if(o.permissions){var i=n.parsePermissionsResultId(o.id);if(!e[i.type]){e[i.type]={}}e[i.type][i.attribute]=n.getPermissionByNameFromResult(o,t)}return e}),{})}))};AttributePermissionsRestService.prototype.parsePermissionsResultId=function(e){var t=e.split(".");if(t.length!==2){throw new Error("AttributePermissionsRestService - Received invalid attribute permissions")}return{type:t[0],attribute:t[1]}};AttributePermissionsRestService.prototype.getPermissionByNameFromResult=function(e,t){return JSON.parse(e.permissions.find((function(e){return e.key===t})).value)};AttributePermissionsRestService.prototype.concatPermissionsNotFound=function(e,t){var n=t.map((function(e){return e.id}));var o=this.lodash.difference(e,n);return t.concat(o.map((function(e){return{id:e,permissions:[{key:c.READ,value:"false"},{key:c.CHANGE,value:"false"}]}})))};AttributePermissionsRestService.prototype.getAllPermissionsForAttributes=function(e){var t=this;if(e.length<=0){return this.$q.when([])}return this.$q.resolve(this.sessionService.getCurrentUsername()).then((function(n){if(!n){return[]}return t.$q.when(t.attributePermissionsRestService.get({user:n,attributes:e.join(","),permissionNames:c.CHANGE+","+c.READ}).then((function(e){return e.permissionsList||[]}),(function(n){if(n){t.$log.error("AttributePermissionsRestService - couldn't retrieve attribute permissions "+e)}return t.$q.reject(n)})))}))};var e,t,n,r,a,l;o["__decorate"]([Object(s["Cached"])({actions:[s["rarelyChangingContent"]],tags:[s["authorizationEvictionTag"]]}),o["__metadata"]("design:type",Function),o["__metadata"]("design:paramtypes",[Array]),o["__metadata"]("design:returntype",typeof(e=typeof angular!=="undefined"&&angular.IPromise)==="function"?e:Object)],AttributePermissionsRestService.prototype,"getAllPermissionsForAttributes",null);AttributePermissionsRestService=o["__decorate"]([Object(s["SeInjectable"])(),o["__metadata"]("design:paramtypes",[typeof(t=typeof s["IRestServiceFactory"]!=="undefined"&&s["IRestServiceFactory"])==="function"?t:Object,typeof(n=typeof s["ISessionService"]!=="undefined"&&s["ISessionService"])==="function"?n:Object,typeof(r=typeof angular!=="undefined"&&angular.IQService)==="function"?r:Object,typeof(a=typeof angular!=="undefined"&&angular.ILogService)==="function"?a:Object,typeof(l=typeof i!=="undefined"&&i["LoDashStatic"])==="function"?l:Object])],AttributePermissionsRestService);return AttributePermissionsRestService}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var o=n(1);var i=n(18);var r=n.n(i);var s=n(0);var a=n.n(s);var c=function(){CMSTimeService.$inject=["$translate"];function CMSTimeService(e){this.$translate=e}CMSTimeService.prototype.getTimeAgo=function(e){var t=Math.floor(i["duration"](e).asDays());var n=Math.floor(i["duration"](e).asHours());if(t>=1){return t+" "+this.$translate.instant("se.cms.actionitem.page.workflow.action.started.days.ago")}else if(n>=1){return n+" "+this.$translate.instant("se.cms.actionitem.page.workflow.action.started.hours.ago")}return"<1 "+this.$translate.instant("se.cms.actionitem.page.workflow.action.started.hours.ago")};var e,t;CMSTimeService=o["__decorate"]([Object(s["SeInjectable"])(),o["__metadata"]("design:paramtypes",[typeof(t=typeof angular!=="undefined"&&(e=angular.translate)!==void 0&&e.ITranslateService)==="function"?t:Object])],CMSTimeService);return CMSTimeService}()},function(e,t,n){"use strict";var o=n(1);var i=n(5);var r=n(49);var s=n(90);var a=n(0);var c=n.n(a);var l=n(2);var d=function(){VersionExperienceInterceptor.$inject=["sharedDataService"];function VersionExperienceInterceptor(e){this.sharedDataService=e}e=VersionExperienceInterceptor;VersionExperienceInterceptor.prototype.intercept=function(t,n){if(this.isGET(t)&&this.isPreviewDataTypeResourceEndpoint(t.url)){return Object(r["from"])(this.sharedDataService.get("experience")).pipe(Object(s["switchMap"])((function(o){if(o.versionId){var i=t.clone({url:t.url.replace(e.MODE_DEFAULT,e.MODE_PREVIEW_VERSION)});return n.handle(i)}else{return n.handle(t)}})))}else{return n.handle(t)}};VersionExperienceInterceptor.prototype.isGET=function(e){return e.method==="GET"};VersionExperienceInterceptor.prototype.isPreviewDataTypeResourceEndpoint=function(t){return t.indexOf(l["TYPES_RESOURCE_URI"])>-1&&t.indexOf(e.PREVIEW_DATA_TYPE)>-1};var e,t;VersionExperienceInterceptor.MODE_DEFAULT="DEFAULT";VersionExperienceInterceptor.MODE_PREVIEW_VERSION="PREVIEWVERSION";VersionExperienceInterceptor.PREVIEW_DATA_TYPE="PreviewData";VersionExperienceInterceptor=e=o["__decorate"]([Object(i["Injectable"])(),o["__metadata"]("design:paramtypes",[typeof(t=typeof a["ISharedDataService"]!=="undefined"&&a["ISharedDataService"])==="function"?t:Object])],VersionExperienceInterceptor);return VersionExperienceInterceptor}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var o=function(){function IComponentSharedService(){}IComponentSharedService.prototype.isComponentShared=function(e){"proxyFunction";return null};return IComponentSharedService}()},function(e,t){},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var o=function(){function IContextAwareEditableItemService(){}IContextAwareEditableItemService.prototype.isItemEditable=function(e){"proxyFunction";return null};return IContextAwareEditableItemService}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var o=n(1);var i=n(0);var r=n.n(i);var s=n(6);var a=function(){ComponentService.$inject=["restServiceFactory","cmsitemsRestService","catalogService","pageInfoService","pageContentSlotsComponentsRestService"];function ComponentService(e,t,n,o,i){this.restServiceFactory=e;this.cmsitemsRestService=t;this.catalogService=n;this.pageInfoService=o;this.pageContentSlotsComponentsRestService=i;var r="/cmssmarteditwebservices/v1/catalogs/:catalogId/versions/:catalogVersion/pages/:pageId/types";this.pageComponentTypesRestService=this.restServiceFactory.get(r);this.restServiceForAddExistingComponent=this.restServiceFactory.get(s["f"])}ComponentService.prototype.createNewComponent=function(e,t){var n={name:e.name,slotId:e.targetSlotId,pageId:e.pageId,position:e.position,typeCode:e.componentType,itemtype:e.componentType,catalogVersion:e.catalogVersionUuid,uid:"",uuid:""};if(typeof t==="object"){for(var o in t){if(t.hasOwnProperty(o)){n[o]=t[o]}}}else if(t){throw new Error("ComponentService.createNewComponent() - Illegal componentPayload - ["+t+"]")}return this.cmsitemsRestService.create(n)};ComponentService.prototype.updateComponent=function(e){return this.cmsitemsRestService.update(e)};ComponentService.prototype.addExistingComponent=function(e,t,n,o){return this.restServiceForAddExistingComponent.save({pageId:e,slotId:n,componentId:t,position:o})};ComponentService.prototype.getSupportedComponentTypesForCurrentPage=function(e){return this.pageComponentTypesRestService.get(e)};ComponentService.prototype.loadComponentItem=function(e){return this.cmsitemsRestService.getById(e)};ComponentService.prototype.loadPagedComponentItems=function(e,t,n){var o=this;return this.catalogService.retrieveUriContext().then((function(i){var r={pageSize:t,currentPage:n,mask:e,sort:"name",typeCode:"AbstractCMSComponent",catalogId:i[s["a"]],catalogVersion:i[s["b"]],itemSearchParams:""};return o.cmsitemsRestService.get(r)}))};ComponentService.prototype.loadPagedComponentItemsByCatalogVersion=function(e){var t={pageSize:e.pageSize,currentPage:e.page,mask:e.mask,sort:"name",typeCode:"AbstractCMSComponent",catalogId:e.catalogId,catalogVersion:e.catalogVersion,itemSearchParams:""};return this.cmsitemsRestService.get(t)};ComponentService.prototype.getSlotsForComponent=function(e){return o["__awaiter"](this,void 0,Promise,(function(){var t,n;return o["__generator"](this,(function(o){switch(o.label){case 0:t=[];return[4,this._getContentSlotsForComponents()];case 1:n=o.sent();Object.keys(n).forEach((function(o){if(n[o].find((function(t){return t.uuid===e}))){t.push(o)}}));return[2,t]}}))}))};ComponentService.prototype._getContentSlotsForComponents=function(){return o["__awaiter"](this,void 0,Promise,(function(){var e,t;return o["__generator"](this,(function(n){switch(n.label){case 0:return[4,this.pageInfoService.getPageUID()];case 1:e=n.sent();return[4,this.pageContentSlotsComponentsRestService.getSlotsToComponentsMapForPageUid(e)];case 2:t=n.sent();return[2,t]}}))}))};var e,t,n,r,a,c;o["__decorate"]([Object(i["Cached"])({actions:[i["rarelyChangingContent"]],tags:[i["pageChangeEvictionTag"]]}),o["__metadata"]("design:type",Function),o["__metadata"]("design:paramtypes",[Object]),o["__metadata"]("design:returntype",typeof(e=typeof Promise!=="undefined"&&Promise)==="function"?e:Object)],ComponentService.prototype,"getSupportedComponentTypesForCurrentPage",null);ComponentService=o["__decorate"]([Object(i["SeInjectable"])(),o["__metadata"]("design:paramtypes",[typeof(t=typeof i["RestServiceFactory"]!=="undefined"&&i["RestServiceFactory"])==="function"?t:Object,typeof(n=typeof s["d"]!=="undefined"&&s["d"])==="function"?n:Object,typeof(r=typeof i["ICatalogService"]!=="undefined"&&i["ICatalogService"])==="function"?r:Object,typeof(a=typeof i["IPageInfoService"]!=="undefined"&&i["IPageInfoService"])==="function"?a:Object,typeof(c=typeof s["e"]!=="undefined"&&s["e"])==="function"?c:Object])],ComponentService);return ComponentService}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var o=n(1);var i=n(11);var r=n(0);var s=n.n(r);var a=n(3);var c=5e3;var l=function(){SynchronizationService.$inject=["restServiceFactory","timerService","translateService","alertService","authenticationService","crossFrameEventService"];function SynchronizationService(e,t,n,o,i,r){this.restServiceFactory=e;this.timerService=t;this.translateService=n;this.alertService=o;this.authenticationService=i;this.crossFrameEventService=r;this.BASE_URL="/cmswebservices";this.SYNC_JOB_INFO_BY_TARGET_URI="/cmswebservices/v1/catalogs/:catalog/synchronizations/targetversions/:target";this.SYNC_JOB_INFO_BY_SOURCE_AND_TARGET_URI="/cmswebservices/v1/catalogs/:catalog/versions/:source/synchronizations/versions/:target";this.intervalHandle={};this.syncRequested=[];this.syncJobInfoByTargetRestService=this.restServiceFactory.get(this.SYNC_JOB_INFO_BY_TARGET_URI);this.syncJobInfoBySourceAndTargetRestService=this.restServiceFactory.get(this.SYNC_JOB_INFO_BY_SOURCE_AND_TARGET_URI,"catalog")}SynchronizationService.prototype.updateCatalogSync=function(e){return o["__awaiter"](this,void 0,Promise,(function(){var t,n,i,r;return o["__generator"](this,(function(o){switch(o.label){case 0:t=this._getJobKey(e.catalogId,e.sourceCatalogVersion,e.targetCatalogVersion);this.addCatalogSyncRequest(t);o.label=1;case 1:o.trys.push([1,3,,4]);return[4,this.syncJobInfoBySourceAndTargetRestService.save({catalog:e.catalogId,source:e.sourceCatalogVersion,target:e.targetCatalogVersion})];case 2:n=o.sent();return[2,n];case 3:i=o.sent();r=this.translateService.instant("sync.running.error.msg",{catalogName:e.name});if(i.statusText==="Conflict"){this.alertService.showDanger({message:r})}return[2,null];case 4:return[2]}}))}))};SynchronizationService.prototype.getCatalogSyncStatus=function(e){if(e.sourceCatalogVersion){return this.getSyncJobInfoBySourceAndTarget(e)}else{return this.getLastSyncJobInfoByTarget(e)}};SynchronizationService.prototype.getSyncJobInfoBySourceAndTarget=function(e){return this.syncJobInfoBySourceAndTargetRestService.get({catalog:e.catalogId,source:e.sourceCatalogVersion,target:e.targetCatalogVersion})};SynchronizationService.prototype.getLastSyncJobInfoByTarget=function(e){return this.syncJobInfoByTargetRestService.get({catalog:e.catalogId,target:e.targetCatalogVersion})};SynchronizationService.prototype.startAutoGetSyncData=function(e,t){var n=this;var o=e.catalogId,i=e.sourceCatalogVersion,r=e.targetCatalogVersion;var s=this._getJobKey(o,i,r);var a=this.timerService.createTimer((function(){return n._autoSyncCallback(e,t,s)}),c);a.start();this.intervalHandle[s]=a};SynchronizationService.prototype.stopAutoGetSyncData=function(e){var t=this._getJobKey(e.catalogId,e.sourceCatalogVersion,e.targetCatalogVersion);if(this.intervalHandle[t]){if(this.syncRequested.indexOf(t)>-1){this.intervalHandle[t].discardWhenNextSynced=true}else{this.intervalHandle[t].stop();this.intervalHandle[t]=undefined}}};SynchronizationService.prototype._autoSyncCallback=function(e,t,n){return o["__awaiter"](this,void 0,Promise,(function(){var i,r,s;return o["__generator"](this,(function(o){switch(o.label){case 0:return[4,this.authenticationService.isAuthenticated(this.BASE_URL)];case 1:i=o.sent();if(!i){this.stopAutoGetSyncData(e)}return[4,this.getCatalogSyncStatus(e)];case 2:r=o.sent();s=this.syncRequestedCallback(e)(r);t(s);if(!this.intervalHandle[n]){this.startAutoGetSyncData(e,t)}return[2]}}))}))};SynchronizationService.prototype.syncRequestedCallback=function(e){var t=this;var n=this._getJobKey(e.catalogId,e.sourceCatalogVersion,e.targetCatalogVersion);return function(o){if(t.catalogSyncInProgress(n)){if(t.catalogSyncFinished(o)){t.removeCatalogSyncRequest(n);t.crossFrameEventService.publish(a["a"].CATALOG_SYNCHRONIZED,e)}if(t.intervalHandle[n].discardWhenNextSynced&&t.catalogSyncFinished(o)||t.catalogSyncAborted(o)){t.intervalHandle[n].stop();t.intervalHandle[n]=undefined;t.removeCatalogSyncRequest(n)}}return o}};SynchronizationService.prototype.catalogSyncInProgress=function(e){return this.syncRequested.indexOf(e)>-1};SynchronizationService.prototype.catalogSyncFinished=function(e){return e.syncStatus==="FINISHED"};SynchronizationService.prototype.catalogSyncAborted=function(e){return e.syncStatus==="ABORTED"};SynchronizationService.prototype.removeCatalogSyncRequest=function(e){var t=this.syncRequested.indexOf(e);if(t>-1){this.syncRequested.splice(t,1)}};SynchronizationService.prototype.addCatalogSyncRequest=function(e){if(this.syncRequested.indexOf(e)===-1){this.syncRequested.push(e)}};SynchronizationService.prototype._getJobKey=function(e,t,n){return e+"_"+t+"_"+n};var e,t,n,s,l,d;SynchronizationService=o["__decorate"]([Object(r["SeDowngradeService"])(),Object(r["OperationContextRegistered"])("/cmswebservices/v1/catalogs/:catalog/synchronizations/targetversions/:target",r["OPERATION_CONTEXT"].CMS),Object(r["OperationContextRegistered"])("/cmswebservices/v1/catalogs/:catalog/versions/:source/synchronizations/versions/:target",r["OPERATION_CONTEXT"].CMS),o["__metadata"]("design:paramtypes",[typeof(e=typeof r["RestServiceFactory"]!=="undefined"&&r["RestServiceFactory"])==="function"?e:Object,typeof(t=typeof r["TimerService"]!=="undefined"&&r["TimerService"])==="function"?t:Object,typeof(n=typeof i["TranslateService"]!=="undefined"&&i["TranslateService"])==="function"?n:Object,typeof(s=typeof r["IAlertService"]!=="undefined"&&r["IAlertService"])==="function"?s:Object,typeof(l=typeof r["IAuthenticationService"]!=="undefined"&&r["IAuthenticationService"])==="function"?l:Object,typeof(d=typeof r["CrossFrameEventService"]!=="undefined"&&r["CrossFrameEventService"])==="function"?d:Object])],SynchronizationService);return SynchronizationService}()},function(e,t,n){"use strict";var o=n(31);var i=n.n(o);var r=n(17);var s=n.n(r);var a=n(32);var c=n.n(a);var l=n(33);var d=n.n(l);if(n.o(l,"CmsCommonsModule"))n.d(t,"CmsCommonsModule",(function(){return l["CmsCommonsModule"]}));if(n.o(l,"CmsConstantsModule"))n.d(t,"CmsConstantsModule",(function(){return l["CmsConstantsModule"]}));if(n.o(l,"CmsResourceLocationsModule"))n.d(t,"CmsResourceLocationsModule",(function(){return l["CmsResourceLocationsModule"]}));if(n.o(l,"ComponentService"))n.d(t,"ComponentService",(function(){return l["ComponentService"]}));if(n.o(l,"IContextAwareEditableItemService"))n.d(t,"IContextAwareEditableItemService",(function(){return l["IContextAwareEditableItemService"]}));if(n.o(l,"IPageService"))n.d(t,"IPageService",(function(){return l["IPageService"]}));if(n.o(l,"SlotStatus"))n.d(t,"SlotStatus",(function(){return l["SlotStatus"]}));if(n.o(l,"SynchronizationPanelModule"))n.d(t,"SynchronizationPanelModule",(function(){return l["SynchronizationPanelModule"]}));if(n.o(l,"SynchronizationService"))n.d(t,"SynchronizationService",(function(){return l["SynchronizationService"]}));if(n.o(l,"TYPES_RESOURCE_URI"))n.d(t,"TYPES_RESOURCE_URI",(function(){return l["TYPES_RESOURCE_URI"]}));if(n.o(l,"slotEvictionTag"))n.d(t,"slotEvictionTag",(function(){return l["slotEvictionTag"]}));var u=n(34);var p=n(35);n.d(t,"SlotStatus",(function(){return p["a"]}));var m=n(36);var S=n.n(m);if(n.o(m,"CmsCommonsModule"))n.d(t,"CmsCommonsModule",(function(){return m["CmsCommonsModule"]}));if(n.o(m,"CmsConstantsModule"))n.d(t,"CmsConstantsModule",(function(){return m["CmsConstantsModule"]}));if(n.o(m,"CmsResourceLocationsModule"))n.d(t,"CmsResourceLocationsModule",(function(){return m["CmsResourceLocationsModule"]}));if(n.o(m,"ComponentService"))n.d(t,"ComponentService",(function(){return m["ComponentService"]}));if(n.o(m,"IContextAwareEditableItemService"))n.d(t,"IContextAwareEditableItemService",(function(){return m["IContextAwareEditableItemService"]}));if(n.o(m,"IPageService"))n.d(t,"IPageService",(function(){return m["IPageService"]}));if(n.o(m,"SynchronizationPanelModule"))n.d(t,"SynchronizationPanelModule",(function(){return m["SynchronizationPanelModule"]}));if(n.o(m,"SynchronizationService"))n.d(t,"SynchronizationService",(function(){return m["SynchronizationService"]}));if(n.o(m,"TYPES_RESOURCE_URI"))n.d(t,"TYPES_RESOURCE_URI",(function(){return m["TYPES_RESOURCE_URI"]}));if(n.o(m,"slotEvictionTag"))n.d(t,"slotEvictionTag",(function(){return m["slotEvictionTag"]}));var v=n(37);var h=n.n(v);var f=n(38);var g=n.n(f);if(n.o(f,"CmsCommonsModule"))n.d(t,"CmsCommonsModule",(function(){return f["CmsCommonsModule"]}));if(n.o(f,"CmsConstantsModule"))n.d(t,"CmsConstantsModule",(function(){return f["CmsConstantsModule"]}));if(n.o(f,"CmsResourceLocationsModule"))n.d(t,"CmsResourceLocationsModule",(function(){return f["CmsResourceLocationsModule"]}));if(n.o(f,"ComponentService"))n.d(t,"ComponentService",(function(){return f["ComponentService"]}));if(n.o(f,"IContextAwareEditableItemService"))n.d(t,"IContextAwareEditableItemService",(function(){return f["IContextAwareEditableItemService"]}));if(n.o(f,"IPageService"))n.d(t,"IPageService",(function(){return f["IPageService"]}));if(n.o(f,"SynchronizationPanelModule"))n.d(t,"SynchronizationPanelModule",(function(){return f["SynchronizationPanelModule"]}));if(n.o(f,"SynchronizationService"))n.d(t,"SynchronizationService",(function(){return f["SynchronizationService"]}));if(n.o(f,"TYPES_RESOURCE_URI"))n.d(t,"TYPES_RESOURCE_URI",(function(){return f["TYPES_RESOURCE_URI"]}));if(n.o(f,"slotEvictionTag"))n.d(t,"slotEvictionTag",(function(){return f["slotEvictionTag"]}))},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){"use strict";var o;(function(e){e["ContentPage"]="ContentPage";e["CategoryPage"]="CategoryPage";e["ProductPage"]="ProductPage";e["EmailPage"]="EmailPage"})(o||(o={}));var i;(function(e){e["ACTIVE"]="ACTIVE";e["DELETED"]="DELETED"})(i||(i={}));var r;(function(e){e["APPROVED"]="APPROVED";e["CHECK"]="CHECK";e["UNAPPROVED"]="UNAPPROVED"})(r||(r={}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var o;(function(e){e["TEMPLATE"]="TEMPLATE";e["PAGE"]="PAGE";e["OVERRIDE"]="OVERRIDE"})(o||(o={}))},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var o=n(1);var i=n(0);var r=n.n(i);var s=n(3);var a=function(){function CmsConstantsModule(){}CmsConstantsModule=o["__decorate"]([Object(i["SeModule"])({providers:[i["diNameUtils"].makeValueProvider({DEFAULT_SYNCHRONIZATION_STATUSES:s["c"]}),i["diNameUtils"].makeValueProvider({DEFAULT_SYNCHRONIZATION_POLLING:s["b"]}),i["diNameUtils"].makeValueProvider({DEFAULT_SYNCHRONIZATION_EVENT:s["a"]})]})],CmsConstantsModule);return CmsConstantsModule}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var o=n(1);var i=n(5);var r=n(6);var s=function(){function CmsCommonsModule(){}CmsCommonsModule=o["__decorate"]([Object(i["NgModule"])({providers:[r["d"]]})],CmsCommonsModule);return CmsCommonsModule}()},function(e,t,n){"use strict";var o=n(42);if(n.o(o,"ComponentService"))n.d(t,"ComponentService",(function(){return o["ComponentService"]}));if(n.o(o,"IContextAwareEditableItemService"))n.d(t,"IContextAwareEditableItemService",(function(){return o["IContextAwareEditableItemService"]}));if(n.o(o,"IPageService"))n.d(t,"IPageService",(function(){return o["IPageService"]}));if(n.o(o,"SlotStatus"))n.d(t,"SlotStatus",(function(){return o["SlotStatus"]}));if(n.o(o,"SynchronizationPanelModule"))n.d(t,"SynchronizationPanelModule",(function(){return o["SynchronizationPanelModule"]}));if(n.o(o,"SynchronizationService"))n.d(t,"SynchronizationService",(function(){return o["SynchronizationService"]}));if(n.o(o,"slotEvictionTag"))n.d(t,"slotEvictionTag",(function(){return o["slotEvictionTag"]}))},function(e,t,n){"use strict";var o=n(3);var i=n(13);var r=n(43);n.d(t,"SynchronizationPanelModule",(function(){return r["a"]}));var s=n(44);var a=n.n(s);if(n.o(s,"ComponentService"))n.d(t,"ComponentService",(function(){return s["ComponentService"]}));if(n.o(s,"IContextAwareEditableItemService"))n.d(t,"IContextAwareEditableItemService",(function(){return s["IContextAwareEditableItemService"]}));if(n.o(s,"IPageService"))n.d(t,"IPageService",(function(){return s["IPageService"]}));if(n.o(s,"SlotStatus"))n.d(t,"SlotStatus",(function(){return s["SlotStatus"]}));if(n.o(s,"SynchronizationService"))n.d(t,"SynchronizationService",(function(){return s["SynchronizationService"]}));if(n.o(s,"slotEvictionTag"))n.d(t,"slotEvictionTag",(function(){return s["slotEvictionTag"]}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var o=n(1);var i=n(0);var r=n.n(i);var s=n(13);var a=function(){function SynchronizationPanelModule(){}SynchronizationPanelModule=o["__decorate"]([Object(i["SeModule"])({imports:[i["YHelpModule"]],declarations:[s["a"]]})],SynchronizationPanelModule);return SynchronizationPanelModule}()},function(e,t){},function(e,t){},function(e,t){e.exports='<div\n    class="sync-indicator-decorator"\n    [ngClass]="syncStatus.status"\n    [attr.sync-status]="syncStatus.status"\n>\n    <ng-content class="se-wrapper-data"></ng-content>\n</div>\n'},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var o=n(0);var i=new o["EvictionTag"]({event:"WORKFLOW_FINISHED_EVENT"});var r=new o["EvictionTag"]({event:"WORKFLOW_TASKS_MENU_OPENED_EVENT"});var s=new o["EvictionTag"]({event:"SLOT_UPDATE_EVENT"})},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var o=function(){function IPageService(){}IPageService.prototype.getPageById=function(e){"proxyFunction";return null};IPageService.prototype.getPageByUuid=function(e){"proxyFunction";return null};IPageService.prototype.getCurrentPageInfo=function(){"proxyFunction";return null};IPageService.prototype.getCurrentPageInfoByVersion=function(e){"proxyFunction";return null};IPageService.prototype.isPagePrimary=function(e){"proxyFunction";return null};IPageService.prototype.isPagePrimaryWithContext=function(e,t){"proxyFunction";return null};IPageService.prototype.getPrimaryPage=function(e){"proxyFunction";return null};IPageService.prototype.primaryPageForPageTypeExists=function(e,t){"proxyFunction";return null};IPageService.prototype.getPaginatedPrimaryPagesForPageType=function(e,t,n){"proxyFunction";return null};IPageService.prototype.getVariationPages=function(e){"proxyFunction";return null};IPageService.prototype.updatePageById=function(e,t){"proxyFunction";return null};IPageService.prototype.forcePageApprovalStatus=function(e){"proxyFunction";return null};IPageService.prototype.isPageApproved=function(e){"proxyFunction";return null};IPageService.prototype.buildUriContextForCurrentPage=function(){"proxyFunction";return null};return IPageService}()},function(e,t,n){e.exports=n(7)(66)},function(e,t,n){e.exports=n(7)(32)},function(e,t,n){e.exports=n(7)(246)},function(e,t,n){var o={"./components/externalComponent/externalComponentButton.js":53,"./components/externalComponent/externalComponentDecorator.js":54,"./components/slotShared/slotSharedButton.js":55,"./components/slotSharedDisabled/externalSlotDisabledDecorator.js":56,"./components/slotSharedDisabled/sharedSlotDisabledDecorator.js":57,"./components/slotSharedDisabled/slotDisabledComponent.js":58,"./components/slotUnshared/slotUnsharedButton.js":59,"./components/slotVisibility/hiddenComponentMenu/hiddenComponentMenu.js":60,"./components/slotVisibility/slotVisibilityButton.js":61,"./components/slotVisibility/slotVisibilityComponent.js":62,"./components/synchronize/slots/slotSyncButton.js":63,"./services/componentInfoService.js":64,"./services/componentVisibilityAlertService.js":65,"./services/contextualMenuDropdownService.js":66,"./services/dragAndDrop/componentEditingFacadeService.js":67,"./services/dragAndDrop/slotRestrictionsService.js":68,"./services/editorEnablerService.js":69,"./services/pageContentSlotsService.js":70,"./services/removeComponentService.js":71,"./services/slotSharedService.js":72,"./services/slotSynchronizationService.js":73,"./services/slotUnsharedService.js":74,"./services/slotVisibilityService.js":75,"./templates.js":76};function webpackContext(e){var t=webpackContextResolve(e);return n(t)}function webpackContextResolve(e){if(!n.o(o,e)){var t=new Error("Cannot find module '"+e+"'");t.code="MODULE_NOT_FOUND";throw t}return o[e]}webpackContext.keys=function webpackContextKeys(){return Object.keys(o)};webpackContext.resolve=webpackContextResolve;e.exports=webpackContext;webpackContext.id=52},function(e,t){angular.module("externalComponentButtonModule",["smarteditServicesModule"]).controller("externalComponentButtonController",["l10nFilter","catalogService",function(e,t){this.$onInit=function(){this.isReady=false;return t.getCatalogVersionByUuid(this.catalogVersionUuid).then(function(t){this.catalogVersion=e(t.catalogName)+" ("+t.version+")";this.isReady=true}.bind(this))}}]).component("externalComponentButton",{templateUrl:"externalComponentButtonTemplate.html",controller:"externalComponentButtonController",controllerAs:"ctrl",bindings:{catalogVersionUuid:"<"}})},function(e,t){angular.module("externalComponentDecoratorModule",["functionsModule","cmsSmarteditServicesModule","yPopoverModule"]).controller("externalComponentDecoratorController",["$element","$translate","$log","l10nFilter","CONTENT_SLOT_TYPE","componentHandlerService","catalogService","cMSModesService",function(e,t,n,o,i,r,s,a){this.$onInit=function(){var t=r.getParentSlotForComponent(e);this.isExtenalSlot=r.isExternalComponent(t,i);this.isReady=false;a.isVersioningPerspectiveActive().then(function(e){this.isVersioningPerspective=e;s.getCatalogVersionByUuid(this.componentAttributes.smarteditCatalogVersionUuid).then(function(e){this.catalogVersionText=o(e.catalogName)+" ("+e.version+")";this.isReady=true}.bind(this),function(){n.error("externalComponentDecorator - cannot find catalog version for uuid",this.componentAttributes.smarteditCatalogVersionUuid)}.bind(this))}.bind(this))};this.getTooltipTemplate=function(){return"<div class='external-component-decorator__tooltip'>"+t.instant("se.cms.from.external.catalog.version",{catalogVersion:this.catalogVersionText})+"</div>"}}]).directive("externalComponentDecorator",(function(){return{templateUrl:"externalComponentDecoratorTemplate.html",restrict:"C",transclude:true,replace:false,controller:"externalComponentDecoratorController",controllerAs:"ctrl",scope:{},bindToController:{active:"=",componentAttributes:"<"}}}))},function(e,t){angular.module("slotSharedButtonModule",["slotSharedServiceModule","translationServiceModule","smarteditServicesModule","seConstantsModule","hasOperationPermissionModule"]).controller("slotSharedButtonController",["slotSharedService","$window","crossFrameEventService","EVENT_OUTER_FRAME_CLICKED",function(e,t,n,o){this.slotSharedFlag=false;this.buttonName="slotSharedButton";this.isPopupOpened=false;this.isPopupOpenedPreviousValue=false;this.$onInit=function(){this.slotAttributes={smarteditComponentId:this.componentAttributes.smarteditComponentId,contentSlotUuid:this.componentAttributes.smarteditComponentUuid,componentType:this.componentAttributes.smarteditComponentType,catalogVersionUuid:this.componentAttributes.smarteditCatalogVersionUuid};e.isSlotShared(this.slotId).then(function(e){this.slotSharedFlag=e}.bind(this));this.unregFn=n.subscribe(o,function(){this.isPopupOpened=false}.bind(this))};this.$doCheck=function(){if(this.isPopupOpenedPreviousValue!==this.isPopupOpened){this.setRemainOpen({button:this.buttonName,remainOpen:this.isPopupOpened});this.isPopupOpenedPreviousValue=this.isPopupOpened}};this.convertToNonSharedSlotAndCloneComponents=function(){e.convertSharedSlotToNonSharedSlot(this.slotAttributes,true).then(function(){this.isPopupOpened=false;t.location.reload()}.bind(this))};this.convertToNonSharedSlotAndRemoveComponents=function(){e.convertSharedSlotToNonSharedSlot(this.slotAttributes,false).then(function(){this.isPopupOpened=false;t.location.reload()}.bind(this))};this.$onDestroy=function(){this.unregFn()}}]).component("slotSharedButton",{templateUrl:"slotSharedButtonTemplate.html",controller:"slotSharedButtonController",controllerAs:"ctrl",bindings:{setRemainOpen:"&",slotId:"@",componentAttributes:"<"}})},function(e,t){angular.module("externalSlotDisabledDecoratorModule",["slotDisabledDecoratorModule"]).directive("externalSlotDisabledDecorator",(function(){return{templateUrl:"externalSlotDisabledDecoratorTemplate.html",transclude:true,restrict:"C",controllerAs:"ctrl",controller:function(){},scope:{},bindToController:{active:"=",componentAttributes:"<"}}}))},function(e,t){angular.module("sharedSlotDisabledDecoratorModule",["slotDisabledDecoratorModule"]).directive("sharedSlotDisabledDecorator",(function(){return{templateUrl:"sharedSlotDisabledDecoratorTemplate.html",transclude:true,restrict:"C",controllerAs:"ctrl",controller:function(){},scope:{},bindToController:{active:"=",componentAttributes:"<"}}}))},function(e,t){angular.module("slotDisabledDecoratorModule",["yPopoverModule","cmsSmarteditServicesModule"]).controller("slotDisabledComponentController",["$translate","pageInfoService","catalogService","l10nFilter","cMSModesService",function(e,t,n,o,i){var r="se.cms.sharedslot.decorator.label";var s="se.cms.externalsharedslot.decorator.label";var a="se.cms.versioning.shared.slot.from.label";var c="se.cms.versioning.global.shared.slot.from.label";var l={GLOBE:"hyicon-globe",LOCK:"hyicon-lock",HOVERED:"hyicon-linked"};this.$onInit=function(){this.isReady=false;this._checkIfSlotIsInherited();this._getSourceCatalogName();this._isVersioningPerspectiveActive()};this._checkIfSlotIsInherited=function(){var e=this.componentAttributes.smarteditCatalogVersionUuid;t.getCatalogVersionUUIDFromPage().then(function(t){this.isExternalSlot=e!==t}.bind(this))};this._getSourceCatalogName=function(){var e=this.componentAttributes.smarteditCatalogVersionUuid;n.getCatalogVersionByUuid(e).then(function(e){this.catalogName=e.catalogName}.bind(this))};this._isVersioningPerspectiveActive=function(){i.isVersioningPerspectiveActive().then(function(e){this.isVersioningPerspective=e;this.isReady=true}.bind(this))};this.getPopoverMessage=function(){var t;if(this.isVersioningPerspective){t=this.isExternalSlot?c:a}else{t=this.isExternalSlot?s:r}var n={catalogName:o(this.catalogName),slotId:this.componentAttributes.smarteditComponentId};return e.instant(t,n)};this.getSlotIconClass=function(){var e="";if(this.active){e=this.isExternalSlot?l.GLOBE:l.HOVERED}else if(this.isExternalSlot!==undefined){e=this.isExternalSlot?l.GLOBE:l.HOVERED}return e};this.getOuterSlotClass=function(){return this.getSlotIconClass()===l.GLOBE?"disabled-shared-slot__icon--outer-globe":""}.bind(this)}]).component("slotDisabledComponent",{templateUrl:"slotDisabledTemplate.html",controller:"slotDisabledComponentController",controllerAs:"ctrl",bindings:{active:"=",componentAttributes:"<"}})},function(e,t){angular.module("slotUnsharedButtonModule",["slotUnsharedServiceModule","translationServiceModule","confirmationModalServiceModule","smarteditServicesModule","seConstantsModule","hasOperationPermissionModule"]).controller("slotUnsharedButtonController",["$scope","$window","EVENT_OUTER_FRAME_CLICKED","slotUnsharedService","confirmationModalService","crossFrameEventService",function(e,t,n,o,i,r){this.revertToSharedSlot=function(){var e={title:"se.cms.slot.unshared.revert.to.shared.title",templateUrl:"revertToSharedSlotConfirmationTemplate.html"};i.confirm(e).then(function(){o.revertToSharedSlot(this.slotUuid).then(function(){this.isPopupOpened=false;t.location.reload()}.bind(this))}.bind(this))};this.$onInit=function(){this.slotUnsharedFlag=false;this.buttonName="slotUnsharedButton";this.isPopupOpened=false;this.isPopupOpenedOldValue=this.isPopupOpened;o.isSlotUnshared(this.slotUid).then(function(e){this.slotUnsharedFlag=e}.bind(this));this.unregFn=r.subscribe(n,function(){this.isPopupOpened=false}.bind(this))};this.$doCheck=function(){if(this.isPopupOpenedOldValue!==this.isPopupOpened){this.isPopupOpenedOldValue=this.isPopupOpened;this.setRemainOpen({button:this.buttonName,remainOpen:this.isPopupOpened})}};this.$onDestroy=function(){this.unregFn()}}]).component("slotUnsharedButton",{templateUrl:"slotUnsharedButtonTemplate.html",controller:"slotUnsharedButtonController",controllerAs:"ctrl",bindings:{setRemainOpen:"&",slotUuid:"@",slotUid:"@"}})},function(e,t){angular.module("hiddenComponentMenuModule",["yPopupOverlayModule","yLoDashModule"]).constant("HIDDEN_COMPONENT_OPENED_EVENT","HIDDEN_COMPONENT_OPENED_EVENT").controller("hiddenComponentMenuController",["lodash","hiddenComponentMenuService","systemEventService","componentHandlerService","HIDDEN_COMPONENT_OPENED_EVENT","CONTENT_SLOT_TYPE",function(e,t,n,o,i,r){this.$onInit=function(){var s=o.getOriginalComponent(this.slotId,r);this.slotUuid=o.getUuid(s);t.getItemsForHiddenComponent(this.component,this.slotId).then(function(t){this.configuration=e.cloneDeep(t.configuration);this.configuration.slotUuid=this.slotUuid;this.menuItems=e.cloneDeep(t.buttons)}.bind(this));this.unRegRemoveComponentOpenedEvent=n.subscribe(i,this.onOtherMenuOpening)};this.$onDestroy=function(){this.unRegRemoveComponentOpenedEvent()};this.popupConfig={templateUrl:"hiddenComponentMenuItemsTemplate.html",halign:"left",valign:"bottom",legacyController:{alias:"ctrl",value:function(){return this}.bind(this)}};this.onButtonClick=function(e){e.stopPropagation();this.isMenuOpen=!this.isMenuOpen;if(this.isMenuOpen){n.publishAsync(i,{componentId:this.component.uid,slotId:this.slotId})}}.bind(this);this.onMenuHide=function(){this.isMenuOpen=false}.bind(this);this.onOtherMenuOpening=function(e,t){var n=this.component.uid===t.componentId;var o=this.slotId===t.slotId;if(!n||!o){this.isMenuOpen=false}}.bind(this);this.executeItemCallback=function(e,t){if(e.action){e.action.callback(this.configuration,t);this.isMenuOpen=false}}}]).component("hiddenComponentMenu",{templateUrl:"hiddenComponentMenuTemplate.html",transclude:false,controller:"hiddenComponentMenuController",controllerAs:"ctrl",bindings:{component:"<",slotId:"<"}})},function(e,t){angular.module("slotVisibilityButtonModule",["cmssmarteditTemplates","slotVisibilityServiceModule","slotVisibilityComponentModule","seConstantsModule"]).controller("slotVisibilityButtonController",["slotVisibilityService","$scope","sharedDataService","$translate","crossFrameEventService","EVENT_OUTER_FRAME_CLICKED",function(e,t,n,o,i,r){this.buttonName="slotVisibilityButton";this.eyeOnImageClass="sap-icon--show";this.eyeOffImageClass="sap-icon--hide";this.eyeImageClass=this.eyeOffImageClass;this.buttonVisible=false;this.hiddenComponents=[];this.isComponentListOpened=false;t.$watch("ctrl.isComponentListOpened",function(e,t){this.eyeImageClass=e?this.eyeOnImageClass:this.eyeOffImageClass;if(e!==t){this.setRemainOpen({button:this.buttonName,remainOpen:this.isComponentListOpened})}}.bind(this));this.markExternalComponents=function(e,t){t.forEach((function(t){t.isExternal=t.catalogVersion!==e.pageContext.catalogVersionUuid}))};this.getTemplateInfoForExternalComponent=function(){return"<div>"+o.instant("se.cms.slotvisibility.external.component")+"</div>"};this.onInsideClick=function(e){e.stopPropagation()};this.$onInit=function(){e.getHiddenComponents(this.slotId).then(function(e){n.get("experience").then(function(t){this.hiddenComponents=e;this.markExternalComponents(t,this.hiddenComponents);this.hiddenComponentCount=e.length;if(this.hiddenComponentCount>0){this.buttonVisible=true}}.bind(this))}.bind(this));this.unregFn=i.subscribe(r,function(){this.isComponentListOpened=false}.bind(this))};this.$onDestroy=function(){this.unregFn()}}]).component("slotVisibilityButton",{templateUrl:"slotVisibilityButtonTemplate.html",transclude:true,controller:"slotVisibilityButtonController",controllerAs:"ctrl",bindings:{setRemainOpen:"&",slotId:"@",initButton:"@"}})},function(e,t){angular.module("slotVisibilityComponentModule",["componentVisibilityAlertServiceModule","cmsSmarteditServicesModule","hiddenComponentMenuModule"]).controller("slotVisibilityComponentController",["$injector","componentVisibilityAlertService","editorModalService","catalogService","catalogVersionPermissionService","componentSharedService","domain",function(e,t,n,o,i,r,s){this.openEditorModal=function(){n.openAndRerenderSlot(this.component.typeCode,this.component.uuid,"visible").then(function(e){t.checkAndAlertOnComponentVisibility({itemId:e.uuid,itemType:e.itemtype,catalogVersion:e.catalogVersion,restricted:e.restricted,slotId:this.slotId,visible:e.visible})}.bind(this))};this.$onInit=function(){this.isReady=false;this.imageRoot=s+"/cmssmartedit/images";r.isComponentShared(this.component).then(function(e){this.isSharedComponent=e}.bind(this));o.getCatalogVersionByUuid(this.component.catalogVersion).then(function(e){i.hasWritePermission(e.catalogId,e.version).then(function(e){this.readOnly=!e||this.component.isExternal;this.componentVisibilitySwitch=this.component.visible?"se.cms.component.visibility.status.on":"se.cms.component.visibility.status.off";this.componentRestrictionsCount="("+(this.component.restrictions?this.component.restrictions.length:0)+")";this.isReady=true}.bind(this))}.bind(this))}}]).component("slotVisibilityComponent",{templateUrl:"slotVisibilityComponentTemplate.html",transclude:false,controller:"slotVisibilityComponentController",controllerAs:"ctrl",bindings:{component:"=",slotId:"@",componentId:"@"}})},function(e,t){angular.module("slotSyncButtonModule",["slotSynchronizationServiceModule","seConstantsModule","cmsComponentsModule"]).controller("slotSyncButtonController",["$scope","$translate","SYNCHRONIZATION_POLLING","SYNCHRONIZATION_STATUSES","EVENT_OUTER_FRAME_CLICKED","catalogService","slotSynchronizationService","pageInfoService","crossFrameEventService",function(e,t,n,o,i,r,s,a,c){e.$watch("ctrl.isPopupOpened",function(){this.setRemainOpen({button:this.buttonName,remainOpen:this.isPopupOpened})}.bind(this));this.statusIsInSync=function(e){return e.status&&e.status===o.IN_SYNC};this.getSyncStatus=function(){a.getPageUUID().then(function(e){s.getSyncStatus(e,this.slotId).then(function(e){this.isSlotInSync=this.statusIsInSync(e);this.newPageIsNotSynchronized=!e.lastSyncStatus;this.ready=true}.bind(this))}.bind(this))}.bind(this);this.updateStatus=function(e,t){var n=(t.selectedDependencies||[]).concat(t.sharedDependencies||[]).find(function(e){return e.itemId===this.slotId}.bind(this))||{};this.isSlotInSync=this.statusIsInSync(n)};var l=this.getSyncStatus;this.$onInit=function(){this.buttonName="slotSyncButton";this.isPopupOpened=false;this.newPageIsNotSynchronized=false;this.ready=false;this.isSlotInSync=true;this.getSyncStatus();this.unRegisterSyncPolling=c.subscribe(n.FAST_FETCH,l);this.newPageIsNotSynchronizedTemplate="<div class='se-popover--inner-content'>"+t.instant("se.cms.slot.sync.from.page.level")+"</div>";this.unregFn=c.subscribe(i,function(){this.isPopupOpened=false}.bind(this))};this.$onDestroy=function(){this.unRegisterSyncPolling();this.unregFn()}}]).component("slotSyncButton",{templateUrl:"slotSyncButtonTemplate.html",controller:"slotSyncButtonController",controllerAs:"ctrl",bindings:{setRemainOpen:"&",slotId:"@"}})},function(e,t){angular.module("componentInfoServiceModule",["yLoDashModule","cmsSmarteditServicesModule"]).service("componentInfoService",["$log","$q","yjQuery","lodash","crossFrameEventService","cmsitemsRestService","UUID_ATTRIBUTE","EVENTS","OVERLAY_RERENDERED_EVENT","COMPONENT_CREATED_EVENT","COMPONENT_UPDATED_EVENT","COMPONENT_REMOVED_EVENT",function(e,t,n,o,i,r,s,a,c,l,d,u){var p={};var m={};this.getById=function(e,n){if(!n&&!p[e]&&!document.querySelectorAll("["+s+"='"+e+"']").length){n=true}if(p[e]){return t.when(p[e])}else if(n){return r.getById(e).then(function(t){this._resolvePromises(t);return p[e]}.bind(this),function(t){this._rejectPromises([e],t);throw t}.bind(this))}else{var o=m[e]||t.defer();if(!m[e]){m[e]=o}return o.promise}};this._resolvePromises=function(e){(e.response?e.response:[e]).forEach((function(e){p[e.uuid]=e;if(m[e.uuid]){m[e.uuid].resolve(e);delete m[e.uuid]}}))};this._rejectPromises=function(t,n){e.error("componentInfoService:: getById error:",n.message);t.forEach((function(e){if(m[e]){m[e].reject(n);delete m[e]}}))};this._getComponentsDataByUUIDs=function(e){r.getByIds(e).then(this._resolvePromises,function(t){this._rejectPromises(e,t)}.bind(this))};this._onComponentsAddedToOverlay=function(e){var t=o.map(e,(function(e){return n(e).attr(s)})).filter((function(e){return!o.includes(Object.keys(p),e)}));if(t.length){this._getComponentsDataByUUIDs(t)}};this._onComponentsRemovedFromOverlay=function(e){e.filter((function(e){return!n.find("["+s+"='"+n(e).attr(s)+"']").length})).filter((function(e){return o.includes(Object.keys(p),n(e).attr(s))})).map((function(e){return n(e).attr(s)})).forEach((function(e){delete p[e]}))};this._forceAddComponent=function(e){this._resolvePromises({response:[e]})};this._forceRemoveComponent=function(e){delete p[e.uuid]};this._isComponentCached=function(e){return!!p[e]};this._clearCache=function(){p={};m={}};i.subscribe(c,function(e,t){if(t){if(t.addedComponents&&t.addedComponents.length){this._onComponentsAddedToOverlay(t.addedComponents)}if(t.removedComponents&&t.removedComponents.length){this._onComponentsRemovedFromOverlay(t.removedComponents)}}}.bind(this));this._onComponentAdded=function(e,t){this._forceAddComponent(t)};this._onComponentRemoved=function(e,t){this._forceRemoveComponent(t)};i.subscribe(l,this._onComponentAdded.bind(this));i.subscribe(d,this._onComponentAdded.bind(this));i.subscribe(u,this._onComponentRemoved.bind(this));i.subscribe(a.PAGE_CHANGE,this._clearCache.bind(this));i.subscribe(a.USER_HAS_CHANGED,this._clearCache.bind(this))}])},function(e,t){angular.module("componentVisibilityAlertServiceModule",["componentVisibilityAlertServiceInterfaceModule"]).factory("componentVisibilityAlertService",["ComponentVisibilityAlertServiceInterface","extend","gatewayProxy",function(e,t,n){var ComponentVisibilityAlertService=function(){this.gatewayId="ComponentVisibilityAlertService";n.initForService(this,["checkAndAlertOnComponentVisibility"])};ComponentVisibilityAlertService=t(e,ComponentVisibilityAlertService);return new ComponentVisibilityAlertService}])},function(e,t){angular.module("contextualMenuDropdownServiceModule",["contextualMenuDecoratorModule","smarteditServicesModule"]).run(["contextualMenuDropdownService",function(e){e._registerIsOpenEvent()}]).service("contextualMenuDropdownService",["systemEventService","CTX_MENU_DROPDOWN_IS_OPEN","CLOSE_CTX_MENU","DRAG_AND_DROP_EVENTS",function(e,t,n,o){var i;this._registerIsOpenEvent=function(){e.subscribe(t,function(){this._registerDragStarted()}.bind(this))};this._registerDragStarted=function(){i=e.subscribe(o.DRAG_STARTED,this._triggerCloseOperation)};this._triggerCloseOperation=function(){e.publishAsync(n);if(i){i()}}.bind(this)}])},function(e,t){angular.module("componentEditingFacadeModule",["alertServiceModule","componentVisibilityAlertServiceModule","cmsSmarteditServicesModule","smarteditServicesModule","slotVisibilityServiceModule","translationServiceModule","functionsModule"]).constant("COMPONENT_CREATED_EVENT","COMPONENT_CREATED_EVENT").constant("COMPONENT_UPDATED_EVENT","COMPONENT_UPDATED_EVENT").service("componentEditingFacade",["$log","$q","$translate","copy","componentService","systemEventService","crossFrameEventService","pageInfoService","restServiceFactory","editorModalService","renderService","alertService","PAGES_CONTENT_SLOT_COMPONENT_RESOURCE_URI","componentVisibilityAlertService","slotVisibilityService","sharedDataService","COMPONENT_CREATED_EVENT","COMPONENT_UPDATED_EVENT","EVENT_SMARTEDIT_COMPONENT_UPDATED",function(e,t,n,o,i,r,s,a,c,l,d,u,p,m,S,v,h,f,g){var y;function _generateAndAlertSuccessMessage(e,t){u.showSuccess({message:"se.cms.draganddrop.success",messagePlaceholders:{sourceComponentId:e,targetSlotId:t}})}function _generateAndAlertErrorMessage(e,t,n,o){if(n&&n.error&&n.error.errors&&n.error.errors.length>0){u.showDanger({message:"se.cms.draganddrop.error",messagePlaceholders:{sourceComponentId:e,targetSlotId:t,detailedError:n.error.errors[0].message}})}else if(o){u.showDanger(o)}}function _renderSlots(n,o,i,r){return d.renderSlots(n).then((function(){return S.reloadSlotsInfo().then((function(){if(r){_generateAndAlertSuccessMessage(o,i)}return t.when()}),(function(n){e.error("componentEditingFacadeModule._renderSlots::slotVisibilityService.reloadSlotsInfo");e.error(n);return t.reject(n)}))}),(function(n){e.error("componentEditingFacadeModule._renderSlots::renderService.renderSlots - targetSlotId:",i);e.error(n);_generateAndAlertErrorMessage(o,i,n);return t.reject(n)}))}this.addNewComponentToSlot=function(e,t,n,o){var i={smarteditComponentType:n,catalogVersionUuid:t};return l.open(i,e.targetSlotUUId,o).then((function(t){m.checkAndAlertOnComponentVisibility({itemId:t.uuid,itemType:t.itemtype,catalogVersion:t.catalogVersion,restricted:t.restricted,slotId:e.targetSlotId,visible:t.visible});s.publish(h,t);return _renderSlots([e.targetSlotId],t.uid,e.targetSlotId,true)}))};this.addExistingComponentToSlot=function(e,n,o){return a.getPageUID().then((function(a){return i.addExistingComponent(a,n.componentId,e,o).then((function(){return i.loadComponentItem(n.componentUuid).then((function(t){m.checkAndAlertOnComponentVisibility({itemId:n.componentUuid,itemType:n.componentType,catalogVersion:t.catalogVersion,restricted:t.restricted,slotId:e,visible:t.visible});r.publish(f,t);s.publish(g,{componentId:n.componentId,componentType:n.componentType,componentUuid:n.componentUuid,requiresReplayingDecorators:true});return _renderSlots(e,n.componentId,e,true)}),(function(o){_generateAndAlertErrorMessage(n.componentId,e,o);return t.reject()}))}),(function(o){_generateAndAlertErrorMessage(n.componentId,e,o);return t.reject()}))}))};this.cloneExistingComponentToSlot=function(e){return i.loadComponentItem(e.dragInfo.componentUuid).then((function(t){return v.get("experience").then((function(i){var r=o(t);r.componentUuid=r.uuid;r.cloneComponent=true;r.catalogVersion=i.pageContext.catalogVersionUuid;r.name=n.instant("se.cms.component.name.clone.of.prefix")+" "+r.name;delete r.uuid;delete r.uid;delete r.slots;delete r.restrictions;delete r.creationtime;delete r.modifiedtime;var a={smarteditComponentType:e.dragInfo.componentType,catalogVersionUuid:i.pageContext.catalogVersionUuid,content:o(r),initialDirty:true};return l.open(a,e.targetSlotId,e.position).then((function(t){m.checkAndAlertOnComponentVisibility({itemId:t.uuid,itemType:t.itemtype,catalogVersion:t.catalogVersion,restricted:t.restricted,slotId:e.targetSlotId,visible:t.visible});s.publish(h,t);return _renderSlots(e.targetSlotId,t.uid,e.targetSlotId,true)}))}))}),(function(n){_generateAndAlertErrorMessage(e.dragInfo.componentId,e.targetSlotId,n);return t.reject()}))};this.moveComponent=function(e,n,o,i){var r=p+"/pages/:pageId/contentslots/:currentSlotId/components/:componentId";y=y||c.get(r,"componentId");return a.getPageUID().then((function(r){return y.update({pageId:r,currentSlotId:e,componentId:o,slotId:n,position:i}).then((function(){return _renderSlots([e,n],o,n)}),(function(e){_generateAndAlertErrorMessage(o,n,e,{message:"se.cms.draganddrop.move.failed",messagePlaceholders:{slotID:n,componentID:o}});return t.reject()}))}))}}])},function(e,t){angular.module("slotRestrictionsServiceModule",["yLoDashModule","slotSharedServiceModule","functionsModule","cmsSmarteditServicesModule"]).constant("CONTENT_SLOTS_TYPE_RESTRICTION_FETCH_LIMIT",100).constant("COMPONENT_IN_SLOT_STATUS",{ALLOWED:"allowed",DISALLOWED:"disallowed",MAYBEALLOWED:"mayBeAllowed"}).service("slotRestrictionsService",["$log","lodash","isBlank","yjQuery","gatewayProxy","crossFrameEventService","EVENTS","componentHandlerService","pageInfoService","slotSharedService","restServiceFactory","pageContentSlotsComponentsRestService","typePermissionsRestService","CONTENT_SLOTS_TYPE_RESTRICTION_RESOURCE_URI","CONTENT_SLOTS_TYPE_RESTRICTION_FETCH_LIMIT","COMPONENT_IN_SLOT_STATUS","CONTENT_SLOT_TYPE",function(e,t,n,o,i,r,s,a,c,l,d,u,p,m,S,v,h){var f={};var g=null;var y;this.getAllComponentTypesSupportedOnPage=function(){var n=o(a.getAllSlotsSelector());var i=Array.prototype.slice.call(n.map((function(){return a.getId(o(this))})));return Promise.all(i.map(function(e){return this.getSlotRestrictions(e)}.bind(this))).then((function(e){return t.flatten(e)}),(function(t){e.info(t)}))};this.getSlotRestrictions=function(e){return this._getPageUID(g).then(function(t){g=t;var n=this._getEntryId(g,e);if(f[n]){return Promise.resolve(f[n])}else if(this._isExternalSlot(e)){f[n]=[];return Promise.resolve([])}return Promise.resolve()}.bind(this))};this._cacheSlotsRestrictions=function(){var e=a.getAllSlotUids()||[];e=e.filter(function(e){return!this._isExternalSlot(e,h)}.bind(this));var n=t.uniq(e);var o=t.chunk(n,S);return this._recursiveFetchSlotsRestrictions(o,0)};this._recursiveFetchSlotsRestrictions=function(e,t){if(t===e.length){return Promise.resolve()}return this._fetchSlotsRestrictions(e[t]).then(function(){return this._recursiveFetchSlotsRestrictions(e,t+1)}.bind(this))};this._fetchSlotsRestrictions=function(t){return this._getPageUID(g).then(function(n){g=n;y=y||d.get(m,g);return y.save({slotIds:t,pageUid:g}).then(function(e){var t=e||[];t.forEach(function(e){var t=this._getEntryId(g,e.contentSlotUid);f[t]=e.validComponentTypes}.bind(this));return Promise.resolve()}.bind(this),(function(t){e.info(t);return Promise.reject()}))}.bind(this))};this.isComponentAllowedInSlot=function(e,n){return this.getSlotRestrictions(e.id).then((function(o){return u.getComponentsForSlot(e.id).then((function(i){var r=e.id===n.slotId||!i.some((function(e){return e.uid===n.componentId}));if(r){if(o){return t.includes(o,n.componentType)?Promise.resolve(v.ALLOWED):Promise.resolve(v.DISALLOWED)}else{return Promise.resolve(v.MAYBEALLOWED)}}return Promise.resolve(v.DISALLOWED)}))}))};this.isSlotEditable=function(e){return p.hasUpdatePermissionForTypes([h]).then(function(t){return l.isSlotShared(e).then(function(n){var o=t[h];if(n){var i=this._isExternalSlot(e);o=o&&!i&&!l.areSharedSlotsDisabled()}return o}.bind(this))}.bind(this))};this._emptyCache=function(){f={};g=null};this._getEntryId=function(e,t){return e+"_"+t};this._isExternalSlot=function(e){return a.isExternalComponent(e,h)};this._getPageUID=function(e){return!n(e)?Promise.resolve(e):c.getPageUID()};r.subscribe(s.PAGE_CHANGE,function(){this._emptyCache();this._cacheSlotsRestrictions()}.bind(this));i.initForService(this,["getAllComponentTypesSupportedOnPage","getSlotRestrictions"],"SLOT_RESTRICTIONS")}])},function(e,t){angular.module("editorEnablerServiceModule",["componentVisibilityAlertServiceModule","slotRestrictionsServiceModule","cmsSmarteditServicesModule"]).factory("editorEnablerService",["COMPONENT_UPDATED_EVENT","systemEventService","componentVisibilityAlertService","componentHandlerService","editorModalService","featureService","slotRestrictionsService",function(e,t,n,o,i,r,s){function EditorEnablerService(){this._editButtonCallback=this._editButtonCallback.bind(this)}EditorEnablerService.prototype._key="se.cms.edit";EditorEnablerService.prototype._nameI18nKey="se.cms.contextmenu.nameI18nKey.edit";EditorEnablerService.prototype._i18nKey="se.cms.contextmenu.title.edit";EditorEnablerService.prototype._descriptionI18nKey="se.cms.contextmenu.descriptionI18n.edit";EditorEnablerService.prototype._editDisplayClass="editbutton";EditorEnablerService.prototype._editDisplayIconClass="sap-icon--edit";EditorEnablerService.prototype._editDisplaySmallIconClass="sap-icon--edit";EditorEnablerService.prototype._editButtonCallback=function(o){var r=o.slotUuid;if(!this.inUse){this.inUse=true;i.open(o.componentAttributes).then(function(o){this.inUse=false;t.publish(e,o);return n.checkAndAlertOnComponentVisibility({itemId:o.uuid,itemType:o.itemtype,catalogVersion:o.catalogVersion,restricted:o.restricted,slotId:r,visible:o.visible})}.bind(this),function(){this.inUse=false}.bind(this))}};EditorEnablerService.prototype._condition=function(e){var t=o.getParentSlotForComponent(e.element);return s.isSlotEditable(t).then((function(t){return t&&!o.isExternalComponent(e.componentId,e.componentType)}))};EditorEnablerService.prototype.enableForComponents=function(e){var t={key:this._key,nameI18nKey:this._nameI18nKey,descriptionI18nKey:this._descriptionI18nKey,priority:400,regexpKeys:e,displayClass:this._editDisplayClass,displayIconClass:this._editDisplayIconClass,displaySmallIconClass:this._editDisplaySmallIconClass,i18nKey:this._i18nKey,condition:this._condition,permissions:["se.context.menu.edit.component"],action:{callback:this._editButtonCallback}};r.addContextualMenuButton(t)};return new EditorEnablerService}])},function(e,t){angular.module("pageContentSlotsServiceModule",["resourceModule","smarteditServicesModule","cmsResourceLocationsModule","yLoDashModule"]).service("pageContentSlotsService",["$q","lodash","restServiceFactory","crossFrameEventService","EVENTS","pageInfoService","PAGES_CONTENT_SLOT_RESOURCE_URI",function(e,t,n,o,i,r,s){var a=n.get(s);var c;this._reloadPageContentSlots=function(){return r.getPageUID().then((function(n){c=a.get({pageId:n}).then((function(n){return e.when(t.uniq(n.pageContentSlotList||[]))}));return c}))};this.getPageContentSlots=function(){return c?e.when(c):this._reloadPageContentSlots()};this.getSlotStatus=function(n){return(c?e.when(c):this._reloadPageContentSlots()).then((function(e){var o=t.first(e.filter((function(e){return e.slotId===n})));return o?o.slotStatus:undefined}))};o.subscribe(i.PAGE_CHANGE,function(){this._reloadPageContentSlots()}.bind(this))}])},function(e,t){angular.module("removeComponentServiceModule",["smarteditServicesModule","removeComponentServiceInterfaceModule","functionsModule","resourceLocationsModule"]).constant("COMPONENT_REMOVED_EVENT","componentRemovedEvent").factory("removeComponentService",["crossFrameEventService","restServiceFactory","renderService","extend","gatewayProxy","$q","$log","RemoveComponentServiceInterface","systemEventService","componentInfoService","PAGES_CONTENT_SLOT_COMPONENT_RESOURCE_URI","COMPONENT_REMOVED_EVENT",function(e,t,n,o,i,r,s,a,c,l,d,u){var p="RemoveComponent";var RemoveComponentService=function(e){this.gatewayId=e;i.initForService(this,["removeComponent"])};RemoveComponentService=o(a,RemoveComponentService);var m=t.get(d+"/contentslots/:slotId/components/:componentId","componentId");RemoveComponentService.prototype.removeComponent=function(e){return m.remove({slotId:e.slotId,componentId:e.slotOperationRelatedId}).then((function(){return l.getById(e.componentUuid)})).then((function(t){c.publish(u,t);return l.getById(e.componentUuid,true)})).then((function(t){n.renderSlots(e.slotId);return t}))};return new RemoveComponentService(p)}])},function(e,t){angular.module("slotSharedServiceModule",["pageContentSlotsServiceModule","yLoDashModule","cmsSmarteditServicesModule"]).service("slotSharedService",["pageContentSlotsService","lodash","cmsitemsRestService","pageInfoService","$translate","confirmationModalService",function(e,t,n,o,i,r){this.isSlotShared=function(n){return e.getPageContentSlots().then((function(e){var o=t.first(e.filter((function(e){return e.slotId===n})));return o?o.slotShared:undefined}))};this.setSharedSlotEnablementStatus=function(e){this.disableShareSlotStatus=e};this.areSharedSlotsDisabled=function(){return this.disableShareSlotStatus};this.convertSharedSlotToNonSharedSlot=function(e,t){this._validateComponentAttributes(e);return this._constructCmsItemParameter(e,t).then((function(e){var o={};o.title="se.cms.slot.shared.convert.to.unshared.confirmation.title";o.description=t?"se.cms.slot.shared.convert.to.unshared.clone.components.confirmation.message":"se.cms.slot.shared.convert.to.unshared.remove.components.confirmation.message";return r.confirm(o).then((function(){return n.create(e)}))}))};this._constructCmsItemParameter=function(e,t){return i("se.cms.slot.shared.clone").then(function(n){return o.getPageUID().then((function(o){var i=o+"-"+e.smarteditComponentId+"-"+n;var r={name:i,smarteditComponentId:e.smarteditComponentId,contentSlotUuid:e.contentSlotUuid,itemtype:e.componentType,catalogVersion:e.catalogVersionUuid,pageUuid:o,cloneComponents:t};return r}))}.bind(this))};this._validateComponentAttributes=function(e){if(!e){throw new Error("Parameter: componentAttributes needs to be supplied!")}var t=["smarteditComponentId","contentSlotUuid","componentType","catalogVersionUuid"];for(var n=0;n<t.length;n++){var o=t[n];if(!e[o]){throw new Error("Parameter: componentAttributes."+o+" needs to be supplied!")}}}}])},function(e,t){angular.module("slotSynchronizationServiceModule",[]).constant("SYNCHRONIZATION_SLOTS_SELECT_ALL_COMPONENTS_LABEL","se.cms.synchronization.slots.select.all.components").service("slotSynchronizationService",["SYNCHRONIZATION_SLOTS_SELECT_ALL_COMPONENTS_LABEL","syncPollingService",function(e,t){this.getSyncStatus=function(n,o){return t.getSyncStatus(n).then((function(t){var n=(t.selectedDependencies||[]).concat(t.sharedDependencies||[]).find((function(e){return e.name===o}))||{};n.selectAll=e;return n}))};this.performSync=function(e,n){return t.performSync(e,n)}}])},function(e,t){angular.module("slotUnsharedServiceModule",["cmsSmarteditServicesModule","pageContentSlotsServiceModule"]).service("slotUnsharedService",["$q","cmsitemsRestService","pageContentSlotsService",function(e,t,n){var o="OVERRIDE";this.isSlotUnshared=function(e){return n.getSlotStatus(e).then((function(e){return e===o}))};this.revertToSharedSlot=function(e){return t.delete(e)}}])},function(e,t){angular.module("slotVisibilityServiceModule",["resourceModule","cmsSmarteditServicesModule"]).service("slotVisibilityService",["COMPONENT_CREATED_EVENT","COMPONENT_UPDATED_EVENT","COMPONENT_REMOVED_EVENT","$log","crossFrameEventService","componentHandlerService","pageInfoService","pageContentSlotsComponentsRestService",function(e,t,n,o,i,r,s,a){var _filterVisibleComponents=function(e){Object.keys(e).forEach((function(t){var n=[];r.getOriginalComponentsWithinSlot(t).get().forEach((function(e){n.push(r.getId(e))}));var o=e[t].filter((function(e){return n.indexOf(e.uid)===-1}));e[t]=o}));return e};this.reloadSlotsInfo=function(){return s.getPageUID().then(function(e){a.clearCache();return a.getSlotsToComponentsMapForPageUid(e)}.bind(this),(function(e){o.error("slotVisibilityService::reloadSlotsInfo - failed call to pageInfoService.getPageUID");throw e}))};var _getSlotToComponentsMap=function(){return s.getPageUID().then(function(e){return a.getSlotsToComponentsMapForPageUid(e)}.bind(this),(function(e){o.error("slotVisibilityService::_getSlotToComponentsMap - failed call to pageInfoService.getPageUID");throw e}))};this.getHiddenComponents=function(e){return _getSlotToComponentsMap().then(_filterVisibleComponents).then((function(t){return t[e]||[]}),(function(){return[]}))};this._clearComponentsCache=function(){a.clearCache()};i.subscribe(e,this._clearComponentsCache);i.subscribe(t,this._clearComponentsCache);i.subscribe(n,this._clearComponentsCache)}])},function(e,t){angular.module("cmssmarteditTemplates",[]).run(["$templateCache",function(e){"use strict";e.put("web/features/cmssmartedit/components/externalComponent/externalComponentButtonTemplate.html",'<div class="se-ctx-menu-btn__msg" data-ng-if="ctrl.isReady">{{ctrl.catalogVersion}}</div>\n');e.put("web/features/cmssmartedit/components/externalComponent/externalComponentDecoratorTemplate.html","<div\n"+'    data-ng-class="{\n'+"    'cms-external-component-decorator': !ctrl.isExtenalSlot, \n"+"    'disabled-shared-slot-hovered': ctrl.active && !ctrl.isExtenalSlot, \n"+"    'cms-external-component-decorator--versioning': ctrl.isVersioningPerspective}\"\n"+">\n"+'    <div class="se-ctx-menu__overlay" data-ng-if="!ctrl.isExtenalSlot && ctrl.isReady">\n'+"        <span\n"+'            data-ng-if="!ctrl.active || ctrl.isVersioningPerspective"\n'+"            data-y-popover\n"+"            data-placement=\"'bottom'\"\n"+'            data-template="ctrl.getTooltipTemplate()"\n'+"            data-trigger=\"'hover'\"\n"+'            class="sap-icon--globe se-ctx-menu-element__btn"\n'+"            data-ng-class=\"{'sap-icon--globe--version': ctrl.isVersioningPerspective}\"\n"+"        ></span>\n"+"    </div>\n"+"    <div\n"+'        class="se-wrapper-data"\n'+"        data-ng-class=\"{'disabled-shared-slot-versioning-mode': ctrl.isVersioningPerspective && !ctrl.isExtenalSlot}\"\n"+"        data-ng-transclude\n"+"    ></div>\n"+"</div>\n");e.put("web/features/cmssmartedit/components/sharedComponent/sharedComponentButtonTemplate.html",'<div class="se-ctx-menu-btn__msg">\n'+"    <div\n"+'        class="se-ctx-menu-btn__msg-title"\n'+'        data-translate="se.cms.contextmenu.shared.component.info.title"\n'+"    ></div>\n"+'    <div data-ng-if="$ctrl.isReady" class="se-ctx-menu-btn__msg-description">\n'+"        {{ $ctrl.message | translate }}\n"+"    </div>\n"+'    <div data-ng-if="!$ctrl.isReady"><div class="spinner-sm spinner-light"></div></div>\n'+"</div>\n");e.put("web/features/cmssmartedit/components/slotShared/slotSharedButtonTemplate.html",'<div class="se-shared-slot-button-template" data-ng-if="ctrl.slotSharedFlag">\n'+"    <div\n"+'        class="se-slot-ctx-menu__dropdown-toggle-wrapper se-slot-ctx-menu__divider"\n'+"        data-uib-dropdown\n"+"        data-dropdown-append-to=\"'#smarteditoverlay'\"\n"+'        data-auto-close="outsideClick"\n'+'        data-is-open="ctrl.isPopupOpened"\n'+"    >\n"+"        <button\n"+'            type="button"\n'+"            data-uib-dropdown-toggle\n"+'            class="se-slot-ctx-menu__dropdown-toggle sap-icon--chain-link se-slot-ctx-menu__dropdown-toggle-icon"\n'+"            data-ng-class=\"{'se-slot-ctx-menu__dropdown-toggle--open': ctrl.isPopupOpened}\"\n"+'            id="sharedSlotButton-{{::ctrl.slotId}}"\n'+"        ></button>\n"+"        <div\n"+'            class="dropdown-menu dropdown-menu-right se-slot__dropdown-menu"\n'+"            data-uib-dropdown-menu\n"+"        >\n"+"            <div\n"+'                class="se-slot-contextual-menu__header"\n'+'                data-translate="se.sharedslot.decorator.label"\n'+"            ></div>\n"+"\n"+'            <div class="se-shared-slot__body">\n'+"                <div\n"+'                    class="se-shared-slot__description"\n'+'                    data-translate="se.cms.slot.shared.popover.message"\n'+"                ></div>\n"+"\n"+"                <div has-operation-permission=\"'se.shared.slot.override.options'\">\n"+"                    <div\n"+'                        class="se-shared-slot__sub-header"\n'+'                        data-translate="se.cms.slot.shared.popover.convertoptions.title"\n'+"                    ></div>\n"+"\n"+'                    <div class="se-shared-slot__option">\n'+"                        <a\n"+'                            class="se-shared-slot__link fd-link"\n'+'                            data-ng-click="ctrl.convertToNonSharedSlotAndCloneComponents()"\n'+'                            data-translate="se.cms.slot.shared.popover.button.clonecomponents"\n'+"                        >\n"+"                        </a>\n"+"                        <div\n"+'                            class="se-shared-slot__link-description"\n'+'                            data-translate="se.cms.slot.shared.popover.text.clonecomponents"\n'+"                        ></div>\n"+"                    </div>\n"+'                    <div class="se-shared-slot__option">\n'+"                        <a\n"+'                            class="se-shared-slot__link fd-link"\n'+'                            data-ng-click="ctrl.convertToNonSharedSlotAndRemoveComponents()"\n'+'                            data-translate="se.cms.slot.shared.popover.button.removecomponents"\n'+"                        >\n"+"                        </a>\n"+"                        <div\n"+'                            class="se-shared-slot__link-description"\n'+'                            data-translate="se.cms.slot.shared.popover.text.removecomponents"\n'+"                        ></div>\n"+"                    </div>\n"+"                </div>\n"+"            </div>\n"+"        </div>\n"+"    </div>\n"+"</div>\n");e.put("web/features/cmssmartedit/components/slotShared/slotSharedTemplate.html","<slot-shared-button\n"+'    data-slot-id="{{::ctrl.smarteditComponentId}}"\n'+'    data-component-attributes="ctrl.componentAttributes"\n'+'    data-set-remain-open="ctrl.setRemainOpen(button, remainOpen)"\n'+">\n"+"</slot-shared-button>\n");e.put("web/features/cmssmartedit/components/slotSharedDisabled/externalSlotDisabledDecoratorTemplate.html",'<div class="se-decorator-wrap">\n'+"    <slot-disabled-component\n"+'        data-active="ctrl.active"\n'+'        data-component-attributes="ctrl.componentAttributes"\n'+"    />\n"+"    <div ng-transclude></div>\n"+"</div>\n");e.put("web/features/cmssmartedit/components/slotSharedDisabled/sharedSlotDisabledDecoratorTemplate.html",'<div class="se-decorator-wrap">\n'+"    <slot-disabled-component\n"+'        data-active="ctrl.active"\n'+'        data-component-attributes="ctrl.componentAttributes"\n'+"    />\n"+"    <div ng-transclude></div>\n"+"</div>\n");e.put("web/features/cmssmartedit/components/slotSharedDisabled/slotDisabledTemplate.html","<div\n"+'    class="disabled-shared-slot se-slot-popover external-shared-slot"\n'+"    data-ng-class=\"{ 'disabled-shared-slot-hovered': ctrl.active, 'external-shared-slot': ctrl.isExternalSlot, 'disabled-shared-slot-versioning-mode': ctrl.isVersioningPerspective, 'disabled-shared-slot': !ctrl.isVersioningPerspective}\"\n"+'    data-popover-content="{{ctrl.getPopoverMessage()}}"\n'+">\n"+'    <div class="se-slot-popover__arrow"><div class="se-slot-popover__arrow--fill"></div></div>\n'+"    <div\n"+'        class="disabled-shared-slot__icon--outer disabled-shared-slot__icon--outer-linked"\n'+"        data-ng-class=\"[ctrl.getOuterSlotClass(), { 'disabled-shared-slot__icon--outer-hovered': ctrl.active && !ctrl.isVersioningPerspective}]\"\n"+"    >\n"+"        <span\n"+'            class="hyicon shared_slot_disabled_icon disabled-shared-slot__icon--inner"\n'+'            data-ng-class="ctrl.getSlotIconClass()"\n'+"        >\n"+"        </span>\n"+"    </div>\n"+"</div>\n");e.put("web/features/cmssmartedit/components/slotUnshared/slotUnsharedButtonTemplate.html",'<div class="slot-unshared-button-template" data-ng-if="ctrl.slotUnsharedFlag">\n'+"    <div\n"+'        class="se-slot-ctx-menu__dropdown-toggle-wrapper se-slot-ctx-menu__divider"\n'+"        data-uib-dropdown\n"+"        data-dropdown-append-to=\"'#smarteditoverlay'\"\n"+'        data-auto-close="outsideClick"\n'+'        data-is-open="ctrl.isPopupOpened"\n'+"    >\n"+"        <button\n"+'            type="button"\n'+"            data-uib-dropdown-toggle\n"+'            class="se-slot-ctx-menu__dropdown-toggle sap-icon--broken-link se-slot-ctx-menu__dropdown-toggle-icon"\n'+"            data-ng-class=\"{'se-slot-ctx-menu__dropdown-toggle--open': ctrl.isPopupOpened}\"\n"+'            id="slot-unshared-button-{{::ctrl.slotUid}}"\n'+"        ></button>\n"+"        <div\n"+'            class="dropdown-menu dropdown-menu-right se-toolbar-menu-content se-slot__dropdown-menu"\n'+"            data-uib-dropdown-menu\n"+"        >\n"+"            <div\n"+'                class="se-slot-contextual-menu__header"\n'+'                data-translate="se.cms.unshared.slot.header"\n'+"            ></div>\n"+'            <div class="shared-slot__divider"></div>\n'+'            <div class="se-shared-slot__body">\n'+"                <div\n"+'                    class="se-shared-slot__link-description se-shared-slot__link-description__unshared"\n'+'                    data-translate="se.cms.slot.unshared.popover.message"\n'+"                ></div>\n"+"                <div data-has-operation-permission=\"'se.revert.to.shared.slot.link'\">\n"+"                    <a\n"+'                        class="se-shared-slot__link fd-link"\n'+'                        data-ng-click="ctrl.revertToSharedSlot()"\n'+'                        data-translate="se.cms.slot.unshared.revert.to.shared.title"\n'+"                    >\n"+"                    </a>\n"+"                </div>\n"+"            </div>\n"+"        </div>\n"+"    </div>\n"+"</div>\n");e.put("web/features/cmssmartedit/components/slotUnshared/slotUnsharedButtonWrapperTemplate.html","<slot-unshared-button\n"+'    data-slot-uuid="{{::ctrl.componentAttributes.smarteditComponentUuid}}"\n'+'    data-slot-uid="{{::ctrl.smarteditComponentId}}"\n'+'    data-set-remain-open="ctrl.setRemainOpen(button, remainOpen)"\n'+"></slot-unshared-button>\n");e.put("web/features/cmssmartedit/components/slotVisibility/hiddenComponentMenu/hiddenComponentMenuItemsTemplate.html",'<div class="se-hidden-component-menu fd-menu__list">\n'+"    <div\n"+'        class="se-hidden-component-menu__item fd-menu__item"\n'+'        data-ng-repeat="dropdownItem in ctrl.menuItems"\n'+'        data-ng-click="ctrl.executeItemCallback(dropdownItem, $event)"\n'+"    >\n"+"        <span\n"+'            class="se-hidden-component-menu__item-icon"\n'+'            data-ng-class="[dropdownItem.displayIconClass]"\n'+"        ></span>\n"+'        <span class="se-hidden-component-menu__item-link">\n'+"            {{ dropdownItem.i18nKey | translate }}\n"+"        </span>\n"+"    </div>\n"+"</div>\n");e.put("web/features/cmssmartedit/components/slotVisibility/hiddenComponentMenu/hiddenComponentMenuTemplate.html","<se-popup-overlay\n"+'    class="se-hidden-component-menu__popup-anchor"\n'+'    [popup-overlay]="ctrl.popupConfig"\n'+'    [popup-overlay-trigger]="ctrl.isMenuOpen"\n'+'    (popup-overlay-on-hide)="ctrl.onMenuHide()"\n'+">\n"+"    <span\n"+'        data-ng-if="ctrl.menuItems.length > 0"\n'+'        data-ng-click="ctrl.onButtonClick($event)"\n'+'        class="sap-icon--overflow se-hidden-component-menu__toggle"\n'+"    ></span>\n"+"</se-popup-overlay>\n");e.put("web/features/cmssmartedit/components/slotVisibility/slotVisibilityButtonTemplate.html","<div\n"+'    class="se-slot-ctx-menu__dropdown-toggle-wrapper \n'+"        se-slot-ctx-menu__dropdown-toggle-wrapper--slot-visibility \n"+'        se-slot-ctx-menu__divider"\n'+"    data-uib-dropdown\n"+"    data-dropdown-append-to=\"'#smarteditoverlay'\"\n"+'    data-ng-if="ctrl.buttonVisible"\n'+'    data-is-open="ctrl.isComponentListOpened"\n'+">\n"+"    <button\n"+'        type="button"\n'+"        data-uib-dropdown-toggle\n"+'        class="se-slot-ctx-menu__dropdown-toggle--slot-visibility se-slot-ctx-menu__dropdown-toggle"\n'+"        data-ng-class=\"{'se-slot-ctx-menu__dropdown-toggle--open': ctrl.isComponentListOpened}\"\n"+'        id="slot-visibility-button-{{::ctrl.slotId}}"\n'+"    >\n"+'        <span class="se-slot-ctx-menu__dropdown-toggle-icon sap-icon--hide"></span>\n'+'        <span class="se-slot-ctx-menu__dropdown-toggle-add-on"\n'+"            >{{ ::ctrl.hiddenComponentCount }}</span\n"+"        >\n"+"    </button>\n"+"\n"+"    <div\n"+'        class="dropdown-menu dropdown-menu-right se-slot__dropdown-menu"\n'+"        data-uib-dropdown-menu\n"+'        data-ng-click="ctrl.onInsideClick($event)"\n'+'        role="menu"\n'+'        id="slot-visibility-list-{{::ctrl.slotId}}"\n'+"    >\n"+"        <div\n"+'            class="se-slot-contextual-menu__header"\n'+'            data-translate="se.cms.slotvisibility.list.title"\n'+"        ></div>\n"+"\n"+'        <ul class="se-slot-visility__component-list">\n'+"            <li\n"+'                data-ng-repeat="component in ctrl.hiddenComponents track by $index"\n'+'                class="se-slot-visility__component-list-item"\n'+"            >\n"+"                <span\n"+"                    data-y-popover\n"+'                    data-ng-if="component.isExternal"\n'+"                    data-trigger=\"'hover'\"\n"+'                    data-template="ctrl.getTemplateInfoForExternalComponent()"\n'+"                >\n"+"                    <slot-visibility-component\n"+'                        data-component="component"\n'+'                        data-component-id="{{::component.uid}}"\n'+'                        data-slot-id="{{::ctrl.slotId}}"\n'+"                    ></slot-visibility-component>\n"+"                </span>\n"+"                <slot-visibility-component\n"+'                    data-component="component"\n'+'                    data-ng-if="!component.isExternal"\n'+'                    data-component-id="{{::component.uid}}"\n'+'                    data-slot-id="{{::ctrl.slotId}}"\n'+"                ></slot-visibility-component>\n"+"            </li>\n"+"        </ul>\n"+"    </div>\n"+"</div>\n");e.put("web/features/cmssmartedit/components/slotVisibility/slotVisibilityComponentTemplate.html","<div\n"+'    class="se-slot-visibility-wrapper"\n'+"    data-ng-class=\"{'se-slot-visibility-wrapper__external': ctrl.readOnly}\"\n"+">\n"+'    <div class="se-slot-visiblity-component__content" data-ng-if="ctrl.isReady">\n'+'        <div class="se-slot-visibility__icon-wrapper">\n'+'            <div class="se-slot-visibility__icon sap-icon--home-share"></div>\n'+"            <div\n"+'                data-ng-if="ctrl.isSharedComponent"\n'+'                class="se-slot-visibility__icon--shared sap-icon--chain-link"\n'+"            ></div>\n"+"        </div>\n"+"\n"+'        <div class="se-slot-visiblity-component__description">\n'+'            <div data-ng-if="ctrl.readOnly" class="se-slot-visiblity-component__name">\n'+"                {{ ::ctrl.component.name }}\n"+"            </div>\n"+"            <div\n"+'                data-ng-if="!ctrl.readOnly"\n'+'                class="se-slot-visiblity-component__name--link"\n'+'                data-ng-click="ctrl.openEditorModal()"\n'+"            >\n"+"                {{ ::ctrl.component.name }}\n"+"            </div>\n"+'            <div class="se-slot-visiblity-component__type">{{ ::ctrl.component.typeCode }}</div>\n'+'            <div class="se-slot-visiblity-component__visibility">\n'+"                {{'se.genericeditor.tab.visibility.title' | translate}}\n"+"                {{ctrl.componentVisibilitySwitch | translate}} / {{ctrl.componentRestrictionsCount}}\n"+"                {{'se.cms.restrictions.editor.tab' | translate}}\n"+"            </div>\n"+"            <div\n"+'                data-ng-if="ctrl.component.isExternal === true"\n'+'                class="sap-icon--globe slot-visiblity-component--globe-icon"\n'+"            ></div>\n"+"        </div>\n"+"    </div>\n"+"    <hidden-component-menu\n"+'        class="slot-visiblity-component--hidden-menu"\n'+'        data-slot-id="ctrl.slotId"\n'+'        data-component="ctrl.component"\n'+"    ></hidden-component-menu>\n"+"</div>\n");e.put("web/features/cmssmartedit/components/slotVisibility/slotVisibilityWidgetTemplate.html","<slot-visibility-button\n"+'    data-slot-id="{{::ctrl.smarteditComponentId}}"\n'+'    data-set-remain-open="ctrl.setRemainOpen(button, remainOpen)"\n'+"/>\n");e.put("web/features/cmssmartedit/components/synchronize/slots/slotSyncButtonTemplate.html",'<div class="se-slot-sync-button-template" data-ng-if="ctrl.ready">\n'+"    <div\n"+'        class="se-slot-ctx-menu__dropdown-toggle-wrapper se-slot-ctx-menu__divider"\n'+"        data-uib-dropdown\n"+"        data-dropdown-append-to=\"'#smarteditoverlay'\"\n"+'        data-auto-close="outsideClick"\n'+'        data-is-open="ctrl.isPopupOpened"\n'+"    >\n"+"        <span\n"+"            data-y-popover\n"+'            class="se-slot-ctx-menu__popover-ancor"\n'+"            data-trigger=\"'hover'\"\n"+'            data-template="ctrl.newPageIsNotSynchronizedTemplate"\n'+'            data-ng-if="ctrl.newPageIsNotSynchronized"\n'+"            data-placement=\"'bottom'\"\n"+"        >\n"+"        </span>\n"+"\n"+"        <button\n"+'            type="button"\n'+"            data-uib-dropdown-toggle\n"+'            class="se-slot-ctx-menu__dropdown-toggle"\n'+"            data-ng-class=\"{'se-slot-ctx-menu__dropdown-toggle--open': ctrl.isPopupOpened, \n"+"                'se-slot-ctx-menu__dropdown-toggle--disabled': ctrl.newPageIsNotSynchronized }\"\n"+'            id="slot-sync-button-{{::ctrl.slotId}}"\n'+"        >\n"+'            <span class="sap-icon--synchronize se-slot-ctx-menu__dropdown-toggle-icon"></span>\n'+"            <span\n"+'                data-ng-if="!ctrl.isSlotInSync"\n'+'                class="sap-icon--alert se-slot-sync__btn-status se-slot-ctx-menu__dropdown-toggle-add-on"\n'+"            ></span>\n"+"        </button>\n"+'        <div class="se-slot__dropdown-menu dropdown-menu-right" data-uib-dropdown-menu role="menu">\n'+'            <div class="se-toolbar-menu-content--wrapper">\n'+"                <div\n"+'                    class="se-slot-contextual-menu__header"\n'+'                    data-translate="se.cms.synchronization.slot.header"\n'+"                ></div>\n"+'                <div class="se-slot-sync__body">\n'+"                    <slot-synchronization-panel\n"+'                        data-ng-if="ctrl.isPopupOpened"\n'+'                        data-slot-id="ctrl.slotId"\n'+"                    ></slot-synchronization-panel>\n"+"                </div>\n"+"            </div>\n"+"        </div>\n"+"    </div>\n"+"</div>\n");e.put("web/features/cmssmartedit/components/synchronize/slots/slotSynchronizationPanelTemplate.html","<div data-page-sensitive>\n"+"    <synchronization-panel\n"+'        data-item-id="$ctrl.slotId"\n'+'        data-get-sync-status="$ctrl.getSyncStatus"\n'+'        data-perform-sync="$ctrl.performSync"\n'+'        data-get-api="$ctrl.getApi($api)"\n'+"    >\n"+"    </synchronization-panel>\n"+"</div>\n");e.put("web/features/cmssmartedit/components/synchronize/slots/slotSyncTemplate.html","<slot-sync-button\n"+'    data-slot-id="{{::ctrl.smarteditComponentId}}"\n'+'    data-set-remain-open="ctrl.setRemainOpen(button, remainOpen)"\n'+"></slot-sync-button>\n");e.put("web/features/cmssmartedit/components/synchronize/slots/SyncIndicatorDecoratorTemplate.html","<div\n"+'    class="sync-indicator-decorator"\n'+'    [ngClass]="syncStatus.status"\n'+'    [attr.sync-status]="syncStatus.status"\n'+">\n"+'    <ng-content class="se-wrapper-data"></ng-content>\n'+"</div>\n")}])},function(e,t,n){var o={"./dao/resource.js":78,"./services/componentVisibilityAlertServiceInterface.js":79,"./services/removeComponentServiceInterface.js":80,"./templates.js":81};function webpackContext(e){var t=webpackContextResolve(e);return n(t)}function webpackContextResolve(e){if(!n.o(o,e)){var t=new Error("Cannot find module '"+e+"'");t.code="MODULE_NOT_FOUND";throw t}return o[e]}webpackContext.keys=function webpackContextKeys(){return Object.keys(o)};webpackContext.resolve=webpackContextResolve;e.exports=webpackContext;webpackContext.id=77},function(e,t){(function(){angular.module("resourceModule",["smarteditServicesModule","resourceLocationsModule","cmsResourceLocationsModule","functionsModule"]).factory("itemsResource",["restServiceFactory","ITEMS_RESOURCE_URI","URIBuilder",function(e,t,n){return{getItemResource:function(){return e.get(t)},getItemResourceByContext:function(o){return e.get(new n(t).replaceParams(o).build())}}}]).factory("pagesContentSlotsComponentsResource",["restServiceFactory","PAGES_CONTENT_SLOT_COMPONENT_RESOURCE_URI",function(e,t){return e.get(t)}]).factory("navigationNodeRestService",["restServiceFactory","NAVIGATION_MANAGEMENT_RESOURCE_URI",function(e,t){return e.get(t)}]).factory("synchronizationResource",["restServiceFactory","URIBuilder","GET_PAGE_SYNCHRONIZATION_RESOURCE_URI","POST_PAGE_SYNCHRONIZATION_RESOURCE_URI",function(e,t,n,o){return{getPageSynchronizationGetRestService:function(o){var i=new t(n).replaceParams(o).build();return e.get(i)},getPageSynchronizationPostRestService:function(n){var i=new t(o).replaceParams(n).build();return e.get(i)}}}])})()},function(e,t){angular.module("componentVisibilityAlertServiceInterfaceModule",[]).factory("ComponentVisibilityAlertServiceInterface",(function(){var ComponentVisibilityAlertServiceInterface=function(){};ComponentVisibilityAlertServiceInterface.prototype.checkAndAlertOnComponentVisibility=function(){};return ComponentVisibilityAlertServiceInterface}))},function(e,t){angular.module("removeComponentServiceInterfaceModule",[]).factory("RemoveComponentServiceInterface",(function(){function RemoveComponentServiceInterface(){}RemoveComponentServiceInterface.prototype.removeComponent=function(){};return RemoveComponentServiceInterface}))},function(e,t){angular.module("cmscommonsTemplates",[]).run(["$templateCache",function(e){"use strict";e.put("web/features/cmscommons/components/synchronize/synchronizationPanelTemplate.html",'<div class="se-sync-panel">\n'+"    <div\n"+'        class="se-sync-panel__sync-status"\n'+'        data-ng-if="$ctrl.headerTemplateUrl"\n'+'        data-ng-include="$ctrl.headerTemplateUrl"\n'+"    ></div>\n"+"\n"+"    <se-message\n"+'        data-ng-if="$ctrl.message"\n'+'        [type]="$ctrl.message.type"\n'+"        [message-id]=\"'sync-panel-message-{{$index}}'\"\n"+"    >\n"+"        <ng-container se-message-description> {{$ctrl.message.description}} </ng-container>\n"+"    </se-message>\n"+"\n"+'    <div class="se-sync-panel__sync-info" data-ng-show="$ctrl.showItemList">\n'+'        <div data-ng-if="$ctrl.isLoading">\n'+'            <div class="spinner-sm spinner-light">Loading...</div>\n'+"        </div>\n"+"        <div\n"+'            data-ng-if="!$ctrl.isLoading"\n'+'            data-ng-repeat="dependency in $ctrl.getRows()"\n'+"            data-ng-class=\"{active: $index==0, 'se-sync-panel--item__external': dependency.isExternal}\"\n"+'            class="se-sync-panel__sync-info__row"\n'+"        >\n"+'            <div class="se-sync-panel__info-checkbox fd-form__item">\n'+"                <input\n"+'                    type="checkbox"\n'+'                    class="fd-form__control"\n'+'                    data-ng-if="!dependency.isExternal"\n'+'                    data-ng-model="dependency.selected"\n'+'                    data-ng-disabled="$ctrl.isDisabled(dependency)"\n'+'                    data-ng-change="$ctrl.selectionChange($index)"\n'+'                    id="sync-info__checkbox_{{$index}}"\n'+"                />\n"+"                <label\n"+'                    data-ng-if="$index===0"\n'+'                    for="sync-info__checkbox_{{$index}}"\n'+'                    class="se-sync-panel__info-checkbox-label se-sync-panel__info-checkbox-label--select-all fd-form__label"\n'+'                    title="{{::dependency.selectAll | translate}}"\n'+"                >\n"+"                    {{::dependency.selectAll | translate}}</label\n"+"                >\n"+"\n"+"                <label\n"+'                    data-ng-if="$index!==0 && !dependency.isExternal"\n'+'                    for="sync-info__checkbox_{{$index}}"\n'+'                    class="se-sync-panel__info-checkbox-label fd-form__label"\n'+'                    title="{{::dependency.name | translate}}"\n'+"                >\n"+"                    {{::dependency.name | translate}}</label\n"+"                >\n"+"\n"+"                <label\n"+'                    data-ng-if="$index!==0 && dependency.isExternal"\n'+"                    data-y-popover\n"+"                    data-trigger=\"'hover'\"\n"+'                    data-template="$ctrl.getTemplateInfoForExternalComponent()"\n'+'                    for="sync-info__checkbox_{{$index}}"\n'+'                    class="se-sync-panel__info-checkbox-label fd-form__label"\n'+"                >\n"+"                    {{::dependency.name | translate}}\n"+"                </label>\n"+"            </div>\n"+"\n"+"            <span\n"+'                data-ng-if="$ctrl.buildInfoTemplate(dependency)"\n'+"                data-y-popover\n"+"                data-trigger=\"'hover'\"\n"+'                data-title="$ctrl.getInfoTitle(dependency)"\n'+'                data-template="$ctrl.buildInfoTemplate(dependency)"\n'+'                class="pull-right se-sync-panel__sync-info__right-icon"\n'+"                data-ng-class=\"{'se-sync-panel--icon-globe': dependency.isExternal} \"\n"+"            >\n"+"                <span\n"+'                    data-status="{{dependency.status}}"\n'+'                    data-ng-if="!dependency.isExternal"\n'+'                    class="se-sync-panel__sync-info-icon"\n'+'                    data-ng-class="{\n'+"                        'sap-icon--accept':$ctrl.isInSync(dependency), \n"+"                        'sap-icon--message-warning':!$ctrl.isInSync(dependency)}\"\n"+"                ></span>\n"+'                <span data-ng-if="dependency.isExternal" class="sap-icon--globe"></span>\n'+"            </span>\n"+"\n"+"            <span\n"+'                data-ng-if="!$ctrl.buildInfoTemplate(dependency)"\n'+'                class="pull-right se-sync-panel__sync-info__right-icon"\n'+"            >\n"+"                <span\n"+'                    data-status="{{dependency.status}}"\n'+'                    class="se-sync-panel__sync-info-icon"\n'+'                    data-ng-class="{\n'+"                        'sap-icon--accept':$ctrl.isInSync(dependency), \n"+"                        'sap-icon--message-warning':!$ctrl.isInSync(dependency)}\"\n"+"                ></span>\n"+"            </span>\n"+"        </div>\n"+"    </div>\n"+"\n"+'    <div class="se-sync-panel__footer" data-ng-if="$ctrl.showSyncButton">\n'+"        <button\n"+'            class="fd-button--emphasized se-sync-panel__footer__btn se-sync-panel__sync-btn"\n'+'            data-ng-disabled="$ctrl.isSyncButtonDisabled()"\n'+'            data-ng-click="$ctrl.syncItems()"\n'+'            data-translate="se.cms.actionitem.page.sync"\n'+"        ></button>\n"+"    </div>\n"+"</div>\n")}])},function(e,t){e.exports=smarteditcommons},function(e,t,n){var o=n(15);var i=n(84);i=i.__esModule?i.default:i;if(typeof i==="string"){i=[[e.i,i,""]]}var r={};r.insert="head";r.singleton=false;var s=o(i,r);var a=i.locals?i.locals:{};e.exports=a},function(e,t,n){var o=n(16);t=o(false);t.push([e.i,".se-sync-panel-header {\n  padding: 0 20px 20px;\n  border-bottom: 1px solid #d9d9d9;\n  min-width: 400px; }\n\n.se-sync-panel__sub-header {\n  padding-top: 4px;\n  color: #51555a; }\n\n.se-sync-panel-header__new-page-message {\n  padding: 20px; }\n\n.se-sync-panel__message--new-page {\n  font-weight: 700;\n  padding-bottom: 4px; }\n\n.se-sync-panel-header__timestamp {\n  font-size: 0.85714rem;\n  line-height: 1.33333;\n  font-weight: 400;\n  color: #51555a;\n  position: absolute;\n  left: 20px;\n  bottom: 23px;\n  width: 150px; }\n\n.se-sync-panel__sync-info {\n  max-height: 300px;\n  overflow-y: scroll; }\n\n.se-sync-panel__sync-info__row {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: space-between;\n  padding: 0 20px;\n  height: 40px;\n  border-bottom: 1px solid #d9d9d9; }\n  .se-sync-panel__sync-info__row:first-child {\n    height: 50px; }\n  .se-sync-panel__sync-info__row:last-child {\n    border-bottom: none; }\n\n.se-sync-panel__info-checkbox {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  margin: 0 !important; }\n  .se-sync-panel__info-checkbox input {\n    margin: 0; }\n\n.fd-form__label.se-sync-panel__info-checkbox-label {\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  overflow: hidden;\n  word-break: break-all;\n  max-width: 190px !important;\n  margin: 0 !important;\n  padding-left: 8px;\n  color: #32363a;\n  text-transform: capitalize; }\n  .fd-form__label.se-sync-panel__info-checkbox-label--select-all {\n    font-weight: bold !important; }\n\n.se-sync-panel__sync-info__right-icon {\n  font-size: 1.14286rem;\n  line-height: 1.25;\n  font-weight: 400; }\n\n.se-sync-panel__sync-info-icon.sap-icon--accept {\n  font-size: 1.14286rem;\n  line-height: 1.25;\n  font-weight: 400;\n  color: #0a7e3e; }\n\n.se-sync-panel__sync-info-icon.sap-icon--message-warning {\n  font-size: 1.14286rem;\n  line-height: 1.25;\n  font-weight: 400;\n  color: #e9730c; }\n\n.se-sync-panel__footer {\n  padding: 20px;\n  border-top: 1px solid #d9d9d9;\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: flex-end; }\n\nbutton.se-sync-panel__footer__btn {\n  text-transform: capitalize;\n  padding: 0 20px;\n  margin-left: 8px; }\n\n.se-modal__body .se-sync-panel-header,\n.se-modal__body .se-sync-panel__sync-info {\n  padding: 0;\n  border-bottom: none; }\n\n.se-synchronize-catalog {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: flex-end; }\n\n.se-synchronize-catalog__sync-info {\n  display: flex;\n  flex-direction: row;\n  align-items: center; }\n\n.se-synchronize-catalog__sync-btn button {\n  margin-left: 20px; }\n\n.se-synchronize-catalog__sync-info__sync-label,\n.catalog-last-synced {\n  color: #6a6d70;\n  display: block;\n  text-align: right;\n  margin: 0; }\n\n.se-synchronize-catalog__sync-info__sync-cata-name {\n  font-weight: 700;\n  color: #51555a; }\n\n.se-synchronize-catalog__in-progress {\n  color: #0a7e3e; }\n\n.se-synchronize-catalog__sync-failed {\n  color: #bb0000; }\n",""]);e.exports=t},function(e,t,n){var o=n(15);var i=n(86);i=i.__esModule?i.default:i;if(typeof i==="string"){i=[[e.i,i,""]]}var r={};r.insert="head";r.singleton=false;var s=o(i,r);var a=i.locals?i.locals:{};e.exports=a},function(e,t,n){var o=n(16);t=o(false);t.push([e.i,".se-slot-popover {\n  align-items: center;\n  display: flex;\n  flex-direction: column-reverse;\n  justify-content: center; }\n  .se-slot-popover__arrow {\n    opacity: 0;\n    margin-top: 15px;\n    position: relative;\n    width: 0;\n    border-bottom: 12px solid #d9d9d9;\n    border-right: 12px solid transparent;\n    border-left: 12px solid transparent;\n    z-index: 9999; }\n    .se-slot-popover__arrow--fill {\n      position: absolute;\n      top: 1px;\n      left: -11px;\n      width: 0;\n      border-bottom: 11px solid white;\n      border-right: 11px solid transparent;\n      border-left: 11px solid transparent; }\n  .se-slot-popover:before {\n    opacity: 0;\n    box-shadow: 0 0 4px 0 #d9d9d9;\n    z-index: 3125;\n    background-color: white;\n    color: #32363a;\n    border: 1px solid #d9d9d9;\n    border-radius: 4px;\n    content: attr(data-popover-content);\n    margin-bottom: calc(-5.2 * 15px);\n    padding: 10px;\n    white-space: nowrap; }\n\n[data-smartedit-component-type='ContentSlot']:hover .se-slot-popover:before {\n  opacity: 1;\n  margin-top: -1px; }\n\n[data-smartedit-component-type='ContentSlot']:hover .se-slot-popover__arrow {\n  opacity: 1; }\n",""]);e.exports=t},function(e,t,n){var o=n(15);var i=n(88);i=i.__esModule?i.default:i;if(typeof i==="string"){i=[[e.i,i,""]]}var r={};r.insert="head";r.singleton=false;var s=o(i,r);var a=i.locals?i.locals:{};e.exports=a},function(e,t,n){var o=n(16);t=o(false);t.push([e.i,"#smarteditoverlay .se-slot-ctx-menu__divider::after {\n  content: '';\n  background-color: white;\n  display: block;\n  position: absolute;\n  width: 1px;\n  height: 16px;\n  top: 8px;\n  left: -2px;\n  opacity: 0.6; }\n\n#smarteditoverlay .se-slot-ctx-menu__dropdown-toggle-wrapper {\n  margin-right: 3px;\n  position: relative; }\n\n#smarteditoverlay .se-slot-ctx-menu__dropdown-toggle {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: center;\n  font-size: 1.28571rem;\n  line-height: 1.33333;\n  font-weight: 400;\n  background-color: transparent;\n  color: white;\n  width: 55px;\n  height: 32px;\n  border: none; }\n  #smarteditoverlay .se-slot-ctx-menu__dropdown-toggle:hover:not(.se-slot-ctx-menu__dropdown-toggle--open) {\n    opacity: 0.6; }\n  #smarteditoverlay .se-slot-ctx-menu__dropdown-toggle--open {\n    background-color: white;\n    color: #0a6ed1 !important; }\n    #smarteditoverlay .se-slot-ctx-menu__dropdown-toggle--open .se-slot-ctx-menu__dropdown-toggle-add-on {\n      color: #0a6ed1; }\n  #smarteditoverlay .se-slot-ctx-menu__dropdown-toggle-icon {\n    font-size: 1.28571rem;\n    line-height: 1.33333;\n    font-weight: 400; }\n  #smarteditoverlay .se-slot-ctx-menu__dropdown-toggle-icon--disabled {\n    cursor: not-allowed; }\n  #smarteditoverlay .se-slot-ctx-menu__dropdown-toggle-add-on {\n    margin-left: 4px;\n    font-size: 1rem;\n    line-height: 1.42857;\n    font-weight: 400;\n    color: white; }\n\n#smarteditoverlay .se-slot-ctx-menu__popover-ancor {\n  position: absolute;\n  display: block;\n  cursor: not-allowed;\n  height: 100%;\n  width: 100%;\n  top: 0;\n  left: 0; }\n\n#smarteditoverlay .se-slot-contextual-menu__header {\n  padding: 20px;\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: space-between;\n  border-bottom: 1px solid #d9d9d9;\n  height: 53px; }\n  #smarteditoverlay .se-slot-contextual-menu__header:first-child {\n    font-size: 1.14286rem;\n    line-height: 1.25;\n    font-weight: 400;\n    color: #32363a; }\n\n#smarteditoverlay .se-slot__dropdown-menu.dropdown-menu {\n  border: none;\n  border-radius: 0;\n  transform: translateY(-2px);\n  min-width: 265px;\n  max-height: 300px;\n  overflow-y: auto; }\n\n#smarteditoverlay .se-sync-panel__info-checkbox input {\n  margin: 0; }\n\n#smarteditoverlay::before {\n  margin-right: 0 !important;\n  font-size: 1.71429rem;\n  line-height: 1.33333;\n  font-weight: 400; }\n\n#smarteditoverlay .se-sync-panel__sync-btn {\n  color: white; }\n\n#smarteditoverlay .se-slot-visility__component-list {\n  padding: 16px 20px;\n  list-style: none; }\n\n#smarteditoverlay .se-slot-visility__component-list-item {\n  margin-bottom: 16px; }\n  #smarteditoverlay .se-slot-visility__component-list-item:last-child {\n    margin-bottom: 0; }\n\n#smarteditoverlay .se-slot-visibility-wrapper {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  align-items: flex-start; }\n\n#smarteditoverlay .se-slot-visiblity-component__content {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  flex-grow: 1; }\n\n#smarteditoverlay .se-slot-visiblity-component__description {\n  margin-right: 16px; }\n\n#smarteditoverlay .se-slot-visibility__icon-wrapper {\n  position: relative; }\n\n#smarteditoverlay .se-slot-visibility__icon {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: center;\n  font-size: 1.71429rem;\n  line-height: 1.33333;\n  font-weight: 400;\n  height: 48px;\n  width: 48px;\n  border-radius: 4px;\n  background-color: #2b78c5;\n  color: white;\n  margin-right: 16px; }\n  #smarteditoverlay .se-slot-visibility__icon--shared {\n    color: fd-type(\"text\", 5);\n    position: absolute;\n    top: 0;\n    left: 0; }\n\n#smarteditoverlay .se-slot-visibility__icon--shared {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 0;\n  height: 0;\n  border-style: solid;\n  border-width: 14px;\n  border-color: #354a5f transparent transparent #354a5f;\n  border-radius: 4px 0px 0px 0px; }\n  #smarteditoverlay .se-slot-visibility__icon--shared::before {\n    font-size: 1.14286rem;\n    line-height: 1.25;\n    font-weight: 400;\n    position: absolute;\n    left: -12px;\n    top: -15px;\n    color: white; }\n\n#smarteditoverlay .se-slot-visiblity-component__name, #smarteditoverlay .se-slot-visiblity-component__visibility {\n  color: #32363a; }\n\n#smarteditoverlay .se-slot-visiblity-component__name--link {\n  cursor: pointer;\n  color: #0a6ed1; }\n\n#smarteditoverlay .se-slot-visiblity-component__type {\n  color: #6a6d70; }\n\n#smarteditoverlay .slot-visiblity-component--globe-icon {\n  margin-left: 4px; }\n\n#smarteditoverlay .se-hidden-component-menu__toggle {\n  cursor: pointer;\n  color: #0a6ed1; }\n\n#smarteditoverlay .se-hidden-component-menu {\n  box-shadow: 0 6px 12px rgba(0, 0, 0, 0.175);\n  background-color: white;\n  border-radius: 4px !important;\n  min-width: 100px;\n  width: -webkit-fit-content;\n  width: -moz-fit-content;\n  width: fit-content;\n  position: absolute;\n  border: 1px solid #d9d9d9;\n  z-index: 2000;\n  top: 96%;\n  left: initial !important;\n  right: 0; }\n  #smarteditoverlay .se-hidden-component-menu::before {\n    height: 0;\n    width: 0;\n    border-style: solid;\n    border-width: 0 8px 8px 8px;\n    border-bottom-color: #d9d9d9;\n    border-bottom-color: var(var(--fd-color-neutral-4));\n    border-left-color: transparent;\n    border-right-color: transparent;\n    content: '';\n    position: absolute;\n    top: -8px; }\n  #smarteditoverlay .se-hidden-component-menu::after {\n    height: 0;\n    width: 0;\n    border-style: solid;\n    border-width: 0 8px 8px 8px;\n    border-bottom-color: white;\n    border-bottom-color: var(var(--fd-color-background-4));\n    border-left-color: transparent;\n    border-right-color: transparent;\n    content: '';\n    position: absolute;\n    top: -7px; }\n  #smarteditoverlay .se-hidden-component-menu::before, #smarteditoverlay .se-hidden-component-menu::after {\n    right: 10px; }\n  #smarteditoverlay .se-hidden-component-menu::before, #smarteditoverlay .se-hidden-component-menu::after {\n    display: none; }\n\n#smarteditoverlay .se-hidden-component-menu__item {\n  display: flex;\n  flex-direction: row;\n  align-items: center; }\n\n#smarteditoverlay .se-hidden-component-menu__item-icon {\n  font-size: 0.85714rem;\n  line-height: 1.33333;\n  font-weight: 400;\n  margin-right: 8px; }\n\n#smarteditoverlay .se-shared-slot__body {\n  padding: 16px 20px;\n  width: 350px; }\n\n#smarteditoverlay .se-shared-slot__sub-header {\n  margin-bottom: 12px; }\n\n#smarteditoverlay .se-shared-slot__option {\n  margin-bottom: 8px; }\n  #smarteditoverlay .se-shared-slot__option:last-child {\n    margin-bottom: 0; }\n\n#smarteditoverlay .se-shared-slot__description {\n  margin-bottom: 16px; }\n\n#smarteditoverlay .se-shared-slot__link {\n  cursor: pointer;\n  color: #0a6ed1;\n  text-decoration: none;\n  text-transform: capitalize; }\n  #smarteditoverlay .se-shared-slot__link:hover {\n    text-decoration: none;\n    color: #085caf; }\n",""]);e.exports=t},function(e,t,n){"use strict";n.r(t);n.d(t,"Cmssmartedit",(function(){return P}));n.d(t,"CmssmarteditModule",(function(){return w}));var o=n(1);function importAll(e){e.keys().forEach((function(t){e(t)}))}function doImport(){importAll(n(52));importAll(n(77))}var i=n(0);var r=n(2);var s=n(45);var a=n(4);var c=function(){SlotContainerService.$inject=["$q","lodash","restServiceFactory","experienceService","PAGE_CONTEXT_SITE_ID","PAGE_CONTEXT_CATALOG","PAGE_CONTEXT_CATALOG_VERSION"];function SlotContainerService(e,t,n,o,i,r,s){this.$q=e;this.lodash=t;this.experienceService=o;var a="/cmswebservices/v1/sites/"+i+"/catalogs/"+r+"/versions/"+s+"/pagescontentslotscontainers?pageId=:pageId";this.containersRestService=n.get(a)}SlotContainerService.prototype.getComponentContainer=function(e,t){var n=this;return this.loadContainersInPageInfo().then((function(o){var i=o.filter((function(o){return o.slotId===e&&n.lodash.includes(o.components,t)}));return i.length>0?i[0]:null}))};SlotContainerService.prototype.loadContainersInPageInfo=function(){var e=this;if(this.containersInPage){return this.$q.when(this.containersInPage)}else{var t=this.experienceService.getCurrentExperience().then((function(t){return e.containersRestService.get({pageId:t.pageId})})).then((function(t){e.containersInPage=t.pageContentSlotContainerList;return e.containersInPage}));return this.$q.when(t)}};var e,t,n;SlotContainerService=o["__decorate"]([Object(i["SeInjectable"])(),o["__metadata"]("design:paramtypes",[typeof(e=typeof angular!=="undefined"&&angular.IQService)==="function"?e:Object,Object,typeof(t=typeof i["IRestServiceFactory"]!=="undefined"&&i["IRestServiceFactory"])==="function"?t:Object,typeof(n=typeof i["IExperienceService"]!=="undefined"&&i["IExperienceService"])==="function"?n:Object,String,String,String])],SlotContainerService);return SlotContainerService}();var l=function(){HiddenComponentMenuService.$inject=["$q","contextualMenuService","slotContainerService"];function HiddenComponentMenuService(e,t,n){this.$q=e;this.contextualMenuService=t;this.slotContainerService=n;this.MENU_ITEM_EXTERNAL="externalcomponentbutton";this.MENU_ITEM_CLONE="clonecomponentbutton";this.MENU_ITEM_REMOVE="se.cms.remove";this.allowedItems={};this._setDefaultItemsAllowed()}HiddenComponentMenuService.prototype.allowItemsInHiddenComponentMenu=function(e){var t=this;e.forEach((function(e){t.allowedItems[e]=true}))};HiddenComponentMenuService.prototype.removeAllowedItemsInHiddenComponentMenu=function(e){var t=this;e.forEach((function(e){delete t.allowedItems[e]}))};HiddenComponentMenuService.prototype.getAllowedItemsInHiddenComponentMenu=function(){return Object.keys(this.allowedItems)};HiddenComponentMenuService.prototype.getItemsForHiddenComponent=function(e,t){var n=this;this._validateComponent(e);return this._buildComponentInfo(t,e).then((function(t){return n._getAllowedItemsForComponent(e,t)}))};HiddenComponentMenuService.prototype._validateComponent=function(e){if(!e){throw new Error("HiddenComponentMenuService - Component cannot be null.")}if(!e.uid){throw new Error("HiddenComponentMenuService - Component needs a uid.")}if(!e.typeCode){throw new Error("HiddenComponentMenuService - Component needs a type code.")}if(!e.uuid){throw new Error("HiddenComponentMenuService - Component needs a uuid.")}};HiddenComponentMenuService.prototype._setDefaultItemsAllowed=function(){this.allowItemsInHiddenComponentMenu([this.MENU_ITEM_EXTERNAL,this.MENU_ITEM_CLONE,this.MENU_ITEM_REMOVE])};HiddenComponentMenuService.prototype._buildComponentInfo=function(e,t){return this.slotContainerService.getComponentContainer(e,t.uuid).then((function(n){return{componentType:t.typeCode,componentId:t.uid,componentAttributes:{smarteditCatalogVersionUuid:t.catalogVersion,smarteditComponentId:t.uid,smarteditComponentType:t.componentType,smarteditComponentUuid:t.uuid,smarteditElementUuid:null},containerType:n?n.containerType:null,containerId:n?n.containerId:null,element:null,isComponentHidden:true,slotId:e,iLeftBtns:0}}))};HiddenComponentMenuService.prototype._getAllowedItemsForComponent=function(e,t){var n=this;var o=[];var i=[];var r=this.contextualMenuService.getContextualMenuByType(e.typeCode);r=a["copy"](r);r.filter((function(e){return n.allowedItems[e.key]})).forEach((function(e){var r=n.$q.defer();i.push(r.promise);n.$q.when(e.condition?e.condition(t):true).then((function(t){if(t){o.push(e)}r.resolve()}))}));return this.$q.all(i).then((function(){return{buttons:o,configuration:t}}))};var e,t;HiddenComponentMenuService=o["__decorate"]([Object(i["SeInjectable"])(),o["__metadata"]("design:paramtypes",[typeof(e=typeof a!=="undefined"&&a["IQService"])==="function"?e:Object,Object,typeof(t=typeof c!=="undefined"&&c)==="function"?t:Object])],HiddenComponentMenuService);return HiddenComponentMenuService}();var d=function(){SyncPollingService.$inject=["systemEventService","SYNCHRONIZATION_POLLING"];function SyncPollingService(e,t){this.systemEventService=e;this.SYNCHRONIZATION_POLLING=t;this.registerSyncPollingEvents()}SyncPollingService.prototype.registerSyncPollingEvents=function(){this.systemEventService.subscribe(this.SYNCHRONIZATION_POLLING.SPEED_UP,this.changePollingSpeed.bind(this));this.systemEventService.subscribe(this.SYNCHRONIZATION_POLLING.SLOW_DOWN,this.changePollingSpeed.bind(this))};SyncPollingService.prototype.changePollingSpeed=function(e,t){"proxyFunction";return null};SyncPollingService.prototype._fetchSyncStatus=function(e,t){"proxyFunction";return null};SyncPollingService.prototype.getSyncStatus=function(e,t){"proxyFunction";return null};SyncPollingService.prototype.performSync=function(e,t){"proxyFunction";return null};var e,t;SyncPollingService=o["__decorate"]([Object(i["GatewayProxied"])("getSyncStatus","_fetchSyncStatus","changePollingSpeed","registerSyncPollingEvents","performSync"),Object(i["SeInjectable"])(),o["__metadata"]("design:paramtypes",[typeof(e=typeof i["SystemEventService"]!=="undefined"&&i["SystemEventService"])==="function"?e:Object,typeof(t=typeof i["TypedMap"]!=="undefined"&&i["TypedMap"])==="function"?t:Object])],SyncPollingService);return SyncPollingService}();var u=n(10);var p=n(8);var m=n(9);var S=function(e){PageContentSlotsComponentsRestService.$inject=["restServiceFactory","pageInfoService","cmsitemsRestService","lodash","PAGE_CONTEXT_SITE_ID","PAGE_CONTEXT_CATALOG","PAGE_CONTEXT_CATALOG_VERSION"];o["__extends"](PageContentSlotsComponentsRestService,e);function PageContentSlotsComponentsRestService(t,n,o,i,r,s,a){var c=e.call(this)||this;c.pageInfoService=n;c.cmsitemsRestService=o;c.lodash=i;var l="/cmswebservices/v1/sites/"+r+"/catalogs/"+s+"/versions/"+a+"/pagescontentslotscomponents?pageId=:pageId";c.pagesContentSlotsComponentsRestService=t.get(l);return c}PageContentSlotsComponentsRestService.prototype.clearCache=function(){return};PageContentSlotsComponentsRestService.prototype.getComponentsForSlot=function(e){var t=this;return this.pageInfoService.getPageUID().then((function(n){return t.getSlotsToComponentsMapForPageUid(n).then((function(t){return t[e]||[]}))}))};PageContentSlotsComponentsRestService.prototype.getSlotsToComponentsMapForPageUid=function(e){var t=this;return this.getCachedSlotsToComponentsMapForPageUid(e).then((function(e){return t.lodash.cloneDeep(e)}))};PageContentSlotsComponentsRestService.prototype.getCachedSlotsToComponentsMapForPageUid=function(e){var t=this;return this.pagesContentSlotsComponentsRestService.get({pageId:e}).then((function(e){var n=e.pageContentSlotComponentList;var o=n.map((function(e){return e.componentUuid}));o=Array.from(new Set(o));return t.cmsitemsRestService.getByIds(o).then((function(e){var t=(e.response||[]).reduce((function(e,t){e[t.uuid]=t;return e}),{});var o=n.reduce((function(e,n){e[n.slotId]=e[n.slotId]||[];if(t[n.componentUuid]){e[n.slotId].push(t[n.componentUuid])}return e}),{});return o}))}))};var t,n,s,a;o["__decorate"]([Object(i["InvalidateCache"])(r["slotEvictionTag"]),o["__metadata"]("design:type",Function),o["__metadata"]("design:paramtypes",[]),o["__metadata"]("design:returntype",void 0)],PageContentSlotsComponentsRestService.prototype,"clearCache",null);o["__decorate"]([Object(i["Cached"])({actions:[i["rarelyChangingContent"]],tags:[m["b"],i["pageChangeEvictionTag"],r["slotEvictionTag"]]}),o["__metadata"]("design:type",Function),o["__metadata"]("design:paramtypes",[String]),o["__metadata"]("design:returntype",typeof(t=typeof Promise!=="undefined"&&Promise)==="function"?t:Object)],PageContentSlotsComponentsRestService.prototype,"getCachedSlotsToComponentsMapForPageUid",null);PageContentSlotsComponentsRestService=o["__decorate"]([Object(i["GatewayProxied"])("clearCache","getSlotsToComponentsMapForPageUid"),Object(i["SeInjectable"])(),o["__metadata"]("design:paramtypes",[typeof(n=typeof i["IRestServiceFactory"]!=="undefined"&&i["IRestServiceFactory"])==="function"?n:Object,typeof(s=typeof i["IPageInfoService"]!=="undefined"&&i["IPageInfoService"])==="function"?s:Object,Object,typeof(a=typeof p!=="undefined"&&p["LoDashStatic"])==="function"?a:Object,String,String,String])],PageContentSlotsComponentsRestService);return PageContentSlotsComponentsRestService}(u["a"]);var v=function(){function IEditorModalService(){}IEditorModalService.prototype.open=function(e,t,n,o,i,r){"proxyFunction";return null};IEditorModalService.prototype.openAndRerenderSlot=function(e,t,n,o,i){"proxyFunction";return null};return IEditorModalService}();var h=function(e){o["__extends"](EditorModalService,e);function EditorModalService(){return e.call(this)||this}EditorModalService=o["__decorate"]([Object(i["GatewayProxied"])("open","openAndRerenderSlot"),Object(i["SeInjectable"])(),o["__metadata"]("design:paramtypes",[])],EditorModalService);return EditorModalService}(v);var f=function(e){ComponentSharedService.$inject=["componentInfoService","$q"];o["__extends"](ComponentSharedService,e);function ComponentSharedService(t,n){var o=e.call(this)||this;o.componentInfoService=t;o.$q=n;return o}ComponentSharedService.prototype.isComponentShared=function(e){var t=this;var n;if(typeof e==="string"){n=this.componentInfoService.getById(e)}else{n=this.$q.when(e)}return n.then((function(e){if(!e.slots){return t.$q.reject("ComponentSharedService::isComponentShared - Component must have slots property.")}return e.slots.length>1}))};var t;ComponentSharedService=o["__decorate"]([Object(i["GatewayProxied"])(),Object(i["SeInjectable"])(),o["__metadata"]("design:paramtypes",[Object,typeof(t=typeof angular!=="undefined"&&angular.IQService)==="function"?t:Object])],ComponentSharedService);return ComponentSharedService}(r["IComponentSharedService"]);var g=function(e){o["__extends"](PageService,e);function PageService(){return e.call(this)||this}PageService=o["__decorate"]([Object(i["SeInjectable"])(),Object(i["GatewayProxied"])(),o["__metadata"]("design:paramtypes",[])],PageService);return PageService}(r["IPageService"]);var y=function(e){o["__extends"](ContextAwareEditableItemService,e);function ContextAwareEditableItemService(){return e.call(this)||this}ContextAwareEditableItemService=o["__decorate"]([Object(i["SeInjectable"])(),Object(i["GatewayProxied"])(),o["__metadata"]("design:paramtypes",[])],ContextAwareEditableItemService);return ContextAwareEditableItemService}(r["IContextAwareEditableItemService"]);var _=function(){function CmsSmarteditServicesModule(){}CmsSmarteditServicesModule=o["__decorate"]([Object(i["SeModule"])({imports:["yLoDashModule","smarteditServicesModule",r["CmsConstantsModule"]],providers:[i["diNameUtils"].makeValueProvider({cmsitemsUri:m["c"]}),m["a"],h,d,c,f,l,r["AssetsService"],r["CMSModesService"],r["CMSTimeService"],S,r["AttributePermissionsRestService"],r["TypePermissionsRestService"],g,y,r["ComponentService"],r["SynchronizationService"]]})],CmsSmarteditServicesModule);return CmsSmarteditServicesModule}();window.__smartedit__.addDecoratorPayload("SeComponent","SlotSynchronizationPanel",{templateUrl:"slotSynchronizationPanelTemplate.html",inputs:["slotId"]});var C=function(){SlotSynchronizationPanel.$inject=["pageService","pageInfoService","slotSynchronizationService","pageContentSlotsService","$translate","$q"];function SlotSynchronizationPanel(e,t,n,o,i,r){var s=this;this.pageService=e;this.pageInfoService=t;this.slotSynchronizationService=n;this.pageContentSlotsService=o;this.$translate=i;this.$q=r;this.getSyncStatus=function(){var e=s.pageInfoService.getPageUID().then((function(e){return s.slotSynchronizationService.getSyncStatus(e,s.slotId).then((function(e){return s.isSyncDisallowed().then((function(t){if(t){s.disableSync()}return e}))}))}));return s.$q.when(e)};this.performSync=function(e){return s.slotSynchronizationService.performSync(e)}}SlotSynchronizationPanel.prototype.getApi=function(e){this.synchronizationPanelApi=e};SlotSynchronizationPanel.prototype.isSyncDisallowed=function(){var e=this;return this.isPageSlot().then((function(t){return e.isPageApproved().then((function(e){return t&&!e}))}))};SlotSynchronizationPanel.prototype.isPageSlot=function(){return this.pageContentSlotsService.getSlotStatus(this.slotId).then((function(e){return e===r["SlotStatus"].PAGE||e===r["SlotStatus"].OVERRIDE}))};SlotSynchronizationPanel.prototype.isPageApproved=function(){var e=this;var t=this.pageInfoService.getPageUUID().then((function(t){return e.pageService.isPageApproved(t)}));return this.$q.when(t)};SlotSynchronizationPanel.prototype.disableSync=function(){this.synchronizationPanelApi.setMessage({type:i["IAlertServiceType"].WARNING,description:this.$translate.instant("se.cms.synchronization.slot.disabled.msg")});this.synchronizationPanelApi.disableItemList(true)};var e,t,n,s,a;SlotSynchronizationPanel=o["__decorate"]([Object(i["SeComponent"])({templateUrl:"slotSynchronizationPanelTemplate.html",inputs:["slotId"]}),o["__metadata"]("design:paramtypes",[typeof(e=typeof r["IPageService"]!=="undefined"&&r["IPageService"])==="function"?e:Object,typeof(t=typeof i["IPageInfoService"]!=="undefined"&&i["IPageInfoService"])==="function"?t:Object,Object,Object,typeof(s=typeof angular!=="undefined"&&(n=angular.translate)!==void 0&&n.ITranslateService)==="function"?s:Object,typeof(a=typeof angular!=="undefined"&&angular.IQService)==="function"?a:Object])],SlotSynchronizationPanel);return SlotSynchronizationPanel}();var E=n(12);window.__smartedit__.addDecoratorPayload("SeComponent","SharedComponentButton",{templateUrl:"sharedComponentButtonTemplate.html",inputs:["smarteditComponentId"]});var b=function(){SharedComponentButton.$inject=["contextAwareEditableItemService"];function SharedComponentButton(e){this.contextAwareEditableItemService=e;this.isReady=false}SharedComponentButton.prototype.$onInit=function(){var e=this;this.contextAwareEditableItemService.isItemEditable(this.smarteditComponentId).then((function(t){e.isReady=true;e.message="se.cms.contextmenu.shared.component.info.msg"+(t?".editable":"")}))};var e;SharedComponentButton=o["__decorate"]([Object(i["SeComponent"])({templateUrl:"sharedComponentButtonTemplate.html",inputs:["smarteditComponentId"]}),o["__metadata"]("design:paramtypes",[typeof(e=typeof E["IContextAwareEditableItemService"]!=="undefined"&&E["IContextAwareEditableItemService"])==="function"?e:Object])],SharedComponentButton);return SharedComponentButton}();var I=function(){function CmsComponentsModule(){}CmsComponentsModule=o["__decorate"]([Object(i["SeModule"])({imports:["slotSynchronizationServiceModule","pageContentSlotsServiceModule",_,r["SynchronizationPanelModule"]],declarations:[C,b]})],CmsComponentsModule);return CmsComponentsModule}();var T=n(85);var O=function(){CmsDragAndDropService.$inject=["$q","$window","$translate","yjQuery","dragAndDropService","componentHandlerService","systemEventService","gatewayFactory","slotRestrictionsService","alertService","assetsService","browserService","componentEditingFacade","waitDialogService","pageContentSlotsComponentsRestService","DRAG_AND_DROP_EVENTS","COMPONENT_REMOVED_EVENT","CONTENT_SLOT_TYPE","OVERLAY_RERENDERED_EVENT","CONTRACT_CHANGE_LISTENER_PROCESS_EVENTS","SMARTEDIT_COMPONENT_PROCESS_STATUS","CONTRACT_CHANGE_LISTENER_COMPONENT_PROCESS_STATUS","COMPONENT_IN_SLOT_STATUS","domain"];function CmsDragAndDropService(e,t,n,o,i,r,s,a,c,l,d,u,p,m,S,v,h,f,g,y,_,C,E,b){this.$q=e;this.$window=t;this.$translate=n;this.yjQuery=o;this.dragAndDropService=i;this.componentHandlerService=r;this.systemEventService=s;this.gatewayFactory=a;this.slotRestrictionsService=c;this.alertService=l;this.assetsService=d;this.browserService=u;this.componentEditingFacade=p;this.waitDialogService=m;this.pageContentSlotsComponentsRestService=S;this.DRAG_AND_DROP_EVENTS=v;this.COMPONENT_REMOVED_EVENT=h;this.CONTENT_SLOT_TYPE=f;this.OVERLAY_RERENDERED_EVENT=g;this.CONTRACT_CHANGE_LISTENER_PROCESS_EVENTS=y;this.SMARTEDIT_COMPONENT_PROCESS_STATUS=_;this.CONTRACT_CHANGE_LISTENER_COMPONENT_PROCESS_STATUS=C;this.COMPONENT_IN_SLOT_STATUS=E;this.domain=b;this.cachedSlots={};this.highlightedSlot=null;this.highlightedComponent=null;this.highlightedHint=null;this.dragInfo=null;this.overlayRenderedUnSubscribeFn=null;this.componentRemovedUnSubscribeFn=null;this.gateway=this.gatewayFactory.createGateway("cmsDragAndDrop")}e=CmsDragAndDropService;CmsDragAndDropService.prototype.register=function(){this.dragAndDropService.register({id:e.CMS_DRAG_AND_DROP_ID,sourceSelector:[e.SOURCE_SELECTOR,e.MORE_MENU_SOURCE_SELECTOR],targetSelector:e.TARGET_SELECTOR,startCallback:this.onStart.bind(this),dragEnterCallback:this.onDragEnter.bind(this),dragOverCallback:this.onDragOver.bind(this),dropCallback:this.onDrop.bind(this),outCallback:this.onDragLeave.bind(this),stopCallback:this.onStop.bind(this),enableScrolling:true,helper:this.getDragImageSrc.bind(this)})};CmsDragAndDropService.prototype.unregister=function(){this.dragAndDropService.unregister([e.CMS_DRAG_AND_DROP_ID]);if(this.overlayRenderedUnSubscribeFn){this.overlayRenderedUnSubscribeFn()}if(this.componentRemovedUnSubscribeFn){this.componentRemovedUnSubscribeFn()}};CmsDragAndDropService.prototype.apply=function(){var t=this;this.dragAndDropService.apply(e.CMS_DRAG_AND_DROP_ID);this.addUIHelpers();this.overlayRenderedUnSubscribeFn=this.systemEventService.subscribe(this.OVERLAY_RERENDERED_EVENT,this.onOverlayUpdate.bind(this));this.componentRemovedUnSubscribeFn=this.systemEventService.subscribe(this.COMPONENT_REMOVED_EVENT,this.onOverlayUpdate.bind(this));this.gateway.subscribe(this.DRAG_AND_DROP_EVENTS.DRAG_STARTED,(function(e,n){t.dragAndDropService.markDragStarted();t.initializeDragOperation(n)}));this.gateway.subscribe(this.DRAG_AND_DROP_EVENTS.DRAG_STOPPED,(function(){t.dragAndDropService.markDragStopped();t.cleanDragOperation()}))};CmsDragAndDropService.prototype.update=function(){this.dragAndDropService.update(e.CMS_DRAG_AND_DROP_ID);this.addUIHelpers();this.cacheElements()};CmsDragAndDropService.prototype.onOverlayUpdate=function(){this.update();return this.$q.resolve()};CmsDragAndDropService.prototype.onStart=function(t){var n=this.getSelector(t.target);if(!n.attr("data-component-id")){n=this.yjQuery(n).closest("[data-component-id]")}var o=n.closest(e.COMPONENT_SELECTOR);var i=o.closest(e.SLOT_SELECTOR);var r=o.length>0?this.componentHandlerService.getId(o):n.attr("data-component-id");var s=o.length>0?this.componentHandlerService.getSlotOperationRelatedUuid(o):n.attr("data-component-uuid");var a=o.length>0?this.componentHandlerService.getType(o):n.attr("data-component-type");var c=o.length>0?this.componentHandlerService.getSlotOperationRelatedId(o):n.attr("data-component-id");var l=o.length>0?this.componentHandlerService.getSlotOperationRelatedType(o):n.attr("data-component-type");var d=o.length>0?this.componentHandlerService.getId(i):n.attr("data-slot-id");var u=o.length>0?this.componentHandlerService.getId(i):n.attr("data-slot-uuid");var p={componentId:r,componentUuid:s,componentType:a,slotUuid:u,slotId:d,slotOperationRelatedId:c,slotOperationRelatedType:l};o.addClass(e.CSS_CLASSES.COMPONENT_DRAGGED);this.initializeDragOperation(p);this.toggleKeepVisibleComponentAndSlot(true)};CmsDragAndDropService.prototype.onDragEnter=function(e){this.highlightSlot(e)};CmsDragAndDropService.prototype.onDragOver=function(t){var n=this;this.highlightSlot(t).then((function(){if(!n.highlightedSlot||!n.highlightedSlot.isAllowed){return}var o=n.componentHandlerService.getId(n.highlightedSlot.original);if(n.highlightedHint&&n.isMouseInRegion(t,n.highlightedHint)){return}else if(n.highlightedHint){n.clearHighlightedHint()}var i=n.cachedSlots[o];if(i.components.length>0){if(!n.highlightedComponent||!n.isMouseInRegion(t,n.highlightedComponent)){n.clearHighlightedComponent();i.components.forEach((function(e){if(n.isMouseInRegion(t,e)){n.highlightedComponent=e;return false}return true}))}if(n.highlightedComponent&&n.highlightedComponent.hints){n.highlightedComponent.hints.forEach((function(e){if(n.isMouseInRegion(t,e)){n.highlightedHint=e;return false}return true}))}}if(n.highlightedComponent&&n.highlightedComponent.id===n.dragInfo.slotOperationRelatedId){n.highlightedComponent.original.addClass(e.CSS_CLASSES.COMPONENT_DRAGGED_HOVERED)}else if(n.highlightedHint){if(n.highlightedSlot.isAllowed){n.highlightedHint.original.addClass(e.CSS_CLASSES.DROPZONE_HOVERED);if(n.highlightedSlot.mayBeAllowed){n.highlightedHint.original.addClass(e.CSS_CLASSES.DROPZONE_MAY_BE_ALLOWED)}}}}))};CmsDragAndDropService.prototype.onDrop=function(e){var t=this;if(this.highlightedSlot){var n=this.dragInfo.slotId;var o=this.componentHandlerService.getId(this.highlightedSlot.original);var i=this.componentHandlerService.getUuid(this.highlightedSlot.original);var r=this.dragInfo.componentId;var s=this.dragInfo.slotOperationRelatedId||this.dragInfo.componentId;var a=this.dragInfo.slotOperationRelatedType||this.dragInfo.componentType;if(!this.highlightedSlot.isAllowed){var c=this.$translate.instant("se.drag.and.drop.not.valid.component.type",{slotUID:o,componentUID:s});this.alertService.showDanger({message:c});return}if(this.highlightedHint||this.highlightedSlot.components.length===0){var l=this.highlightedHint?this.highlightedHint.position:0;var d=void 0;this.waitDialogService.showWaitModal();if(!n){if(!r){var u={targetSlotId:o,targetSlotUUId:i};var p=this.componentHandlerService.getCatalogVersionUuid(this.highlightedSlot.original);d=this.componentEditingFacade.addNewComponentToSlot(u,p,a,l)}else{var m={componentId:r,componentUuid:this.dragInfo.componentUuid,componentType:a};var S={targetSlotId:o,dragInfo:m,position:l};d=this.dragInfo.cloneOnDrop?this.componentEditingFacade.cloneExistingComponentToSlot(S):this.componentEditingFacade.addExistingComponentToSlot(o,m,l)}}else{if(n===o){var v=this.getComponentPositionFromCachedSlot(n,r);if(v<l){l--}else if(v===l){this.waitDialogService.hideWaitModal();return}}d=this.componentEditingFacade.moveComponent(n,o,s,l)}d.then((function(){t.scrollToModifiedSlot(o)}),(function(){t.onStop(e)})).finally((function(){t.waitDialogService.hideWaitModal()}))}}};CmsDragAndDropService.prototype.getComponentPositionFromCachedSlot=function(e,t){var n=this;var o=this.cachedSlots[e];var i=o&&o.components?o.components:[];var r=i.find((function(e){return n.componentHandlerService.getId(e.original)===t}));var s=r?r.position:this.componentHandlerService.getComponentPositionInSlot(e,t);return s};CmsDragAndDropService.prototype.onDragLeave=function(e){if(this.highlightedSlot){var t=this.componentHandlerService.getId(this.highlightedSlot.original);var n=this.cachedSlots[t];if(!this.isMouseInRegion(e,n)){this.clearHighlightedSlot()}}};CmsDragAndDropService.prototype.onStop=function(t){var n=this.getSelector(t.target).closest(e.COMPONENT_SELECTOR);this.toggleKeepVisibleComponentAndSlot(false);this.cleanDragOperation(n);this.systemEventService.publish(this.CONTRACT_CHANGE_LISTENER_PROCESS_EVENTS.RESTART_PROCESS)};CmsDragAndDropService.prototype.getDragImageSrc=function(){var t="";if(this.browserService.isSafari()){t=this.assetsService.getAssetsRoot()+e.DEFAULT_DRAG_IMG}return this.domain+t};CmsDragAndDropService.prototype.initializeDragOperation=function(t){this.dragInfo=t;this.cacheElements();var n=this.componentHandlerService.getOverlay();n.addClass(e.CSS_CLASSES.OVERLAY_IN_DRAG_DROP);this.systemEventService.publishAsync(this.DRAG_AND_DROP_EVENTS.DRAG_STARTED)};CmsDragAndDropService.prototype.cleanDragOperation=function(t){this.clearHighlightedSlot();if(t){t.removeClass(e.CSS_CLASSES.COMPONENT_DRAGGED)}var n=this.componentHandlerService.getOverlay();n.removeClass(e.CSS_CLASSES.OVERLAY_IN_DRAG_DROP);this.systemEventService.publishAsync(this.DRAG_AND_DROP_EVENTS.DRAG_STOPPED);this.dragInfo=null;this.cachedSlots={};this.highlightedSlot=null};CmsDragAndDropService.prototype.highlightSlot=function(t){var n=this;var i=this.yjQuery(t.target).closest(e.SLOT_SELECTOR);var r=this.componentHandlerService.getId(i);var s;if(this.highlightedSlot){s=this.componentHandlerService.getId(this.highlightedSlot.original);if(s!==r){this.clearHighlightedSlot()}}if(!this.highlightedSlot||this.highlightedSlot.isAllowed===undefined){this.highlightedSlot=this.cachedSlots[r];var a=o["__assign"]({},this.dragInfo);a.componentId=this.dragInfo.slotOperationRelatedId||this.dragInfo.componentId;a.componentType=this.dragInfo.slotOperationRelatedType||this.dragInfo.componentType;if(a.cloneOnDrop){delete a.componentId}return this.slotRestrictionsService.isComponentAllowedInSlot(this.highlightedSlot,a).then((function(o){n.slotRestrictionsService.isSlotEditable(r).then((function(a){if(n.highlightedSlot&&n.highlightedSlot.id===r){var c=o===n.COMPONENT_IN_SLOT_STATUS.ALLOWED&&a;var l=o===n.COMPONENT_IN_SLOT_STATUS.MAYBEALLOWED&&a;n.highlightedSlot.isAllowed=c||l;n.highlightedSlot.mayBeAllowed=l;if(n.highlightedSlot.isAllowed){i.addClass(e.CSS_CLASSES.SLOT_ALLOWED);if(l){i.addClass(e.CSS_CLASSES.SLOT_MAY_BE_ALLOWED)}}else{i.addClass(e.CSS_CLASSES.SLOT_NOT_ALLOWED)}if(t.type==="dragenter"&&(!s||s!==r)){if(n.highlightedSlot&&n.highlightedSlot.id===r){n.systemEventService.publish(r+"_SHOW_SLOT_MENU");n.systemEventService.publish(n.DRAG_AND_DROP_EVENTS.DRAG_OVER,r)}}}}))}))}return this.$q.resolve()};CmsDragAndDropService.prototype.addUIHelpers=function(){var t=this.componentHandlerService.getOverlay();t.find("."+e.CSS_CLASSES.UI_HELPER_OVERLAY).remove();var n=this;t.find(e.SLOT_SELECTOR).each((function(){var t=n.yjQuery(this);var o=t[0].offsetHeight;var i=t[0].offsetWidth;var r=t.find(e.COMPONENT_SELECTOR);if(r.length===0){var s=n.yjQuery("<div></div>");s.addClass(e.CSS_CLASSES.UI_HELPER_OVERLAY);var a=n.yjQuery("<div></div>");a.addClass(e.CSS_CLASSES.DROPZONE);a.addClass(e.CSS_CLASSES.DROPZONE_FULL);s.height(o);s.width(i);s.append(a);t.append(s)}else{r.each((function(){var t=n.yjQuery(this);var o=t[0].offsetHeight;var r=t[0].offsetWidth;var s=n.yjQuery("<div></div>");s.addClass(e.CSS_CLASSES.UI_HELPER_OVERLAY);s.height(o);s.width(r);var a=n.yjQuery("<div></div>");var c=n.yjQuery("<div></div>");a.addClass(e.CSS_CLASSES.DROPZONE);c.addClass(e.CSS_CLASSES.DROPZONE);if(r===i){a.addClass(e.CSS_CLASSES.DROPZONE_TOP);c.addClass(e.CSS_CLASSES.DROPZONE_BOTTOM)}else{a.addClass(e.CSS_CLASSES.DROPZONE_LEFT);c.addClass(e.CSS_CLASSES.DROPZONE_RIGHT)}s.append(a);s.append(c);t.append(s)}))}}))};CmsDragAndDropService.prototype.cacheElements=function(){var t=this.componentHandlerService.getOverlay();if(!t){return}var n=this.getWindowScrolling();var o=this;t.find(e.SLOT_SELECTOR).each((function(){var t=o.yjQuery(this);var i=o.componentHandlerService.getId(t);var r=o.componentHandlerService.getUuid(t);o.pageContentSlotsComponentsRestService.getComponentsForSlot(i).then((function(s){var a={id:i,uuid:r,original:t,components:[],rect:o.getElementRects(t,n),hint:null};var c=t.children(e.COMPONENT_SELECTOR);if(c.length===0){var l=t.find(e.HINT_SELECTOR);a.hint=l.length>0?{original:l,rect:o.getElementRects(l,n)}:null}else{c.each((function(t){var i=o.yjQuery(this);var r=s.findIndex((function(e){return e.uuid===o.componentHandlerService.getUuid(i)}));if(r===-1){r=t}var c={id:o.componentHandlerService.getSlotOperationRelatedId(i),type:o.componentHandlerService.getSlotOperationRelatedType(i),original:i,position:r,hints:[],rect:o.getElementRects(i,n)};var l=r++;i.find(e.HINT_SELECTOR).each((function(){var e=o.yjQuery(this);var t={original:e,position:l++,rect:o.getElementRects(e,n)};c.hints.push(t)}));a.components.push(c)}))}o.cachedSlots[a.id]=a}))}))};CmsDragAndDropService.prototype.clearHighlightedHint=function(){if(this.highlightedHint){this.highlightedHint.original.removeClass(e.CSS_CLASSES.DROPZONE_HOVERED);this.highlightedHint.original.removeClass(e.CSS_CLASSES.DROPZONE_MAY_BE_ALLOWED);this.highlightedHint=null}};CmsDragAndDropService.prototype.clearHighlightedComponent=function(){this.clearHighlightedHint();if(this.highlightedComponent){this.highlightedComponent.original.removeClass(e.CSS_CLASSES.COMPONENT_DRAGGED_HOVERED);this.highlightedComponent=null}};CmsDragAndDropService.prototype.clearHighlightedSlot=function(){this.clearHighlightedComponent();if(this.highlightedSlot){this.highlightedSlot.original.removeClass(e.CSS_CLASSES.SLOT_ALLOWED);this.highlightedSlot.original.removeClass(e.CSS_CLASSES.SLOT_NOT_ALLOWED);this.highlightedSlot.original.removeClass(e.CSS_CLASSES.SLOT_MAY_BE_ALLOWED);this.systemEventService.publish("HIDE_SLOT_MENU");this.systemEventService.publish(this.DRAG_AND_DROP_EVENTS.DRAG_LEAVE)}this.highlightedSlot=null};CmsDragAndDropService.prototype.isMouseInRegion=function(e,t){var n=t.rect;return e.pageX>=n.left&&e.pageX<=n.right&&e.pageY>=n.top&&e.pageY<=n.bottom};CmsDragAndDropService.prototype.getElementRects=function(e,t){var n=e[0].getBoundingClientRect();return{left:n.left,right:n.right,bottom:n.bottom+t,top:n.top+t}};CmsDragAndDropService.prototype.getWindowScrolling=function(){return this.$window.pageYOffset};CmsDragAndDropService.prototype.scrollToModifiedSlot=function(e){var t=this.componentHandlerService.getComponentInOverlay(e,this.CONTENT_SLOT_TYPE);if(t&&t.length>0){t[0].scrollIntoView()}};CmsDragAndDropService.prototype.getSelector=function(e){return this.yjQuery(e)};CmsDragAndDropService.prototype.toggleKeepVisibleComponentAndSlot=function(e){var t=this;if(this.dragInfo){var n=e?this.CONTRACT_CHANGE_LISTENER_COMPONENT_PROCESS_STATUS.KEEP_VISIBLE:this.CONTRACT_CHANGE_LISTENER_COMPONENT_PROCESS_STATUS.PROCESS;this.yjQuery.each(this.componentHandlerService.getComponentUnderSlot(this.dragInfo.componentId,this.dragInfo.componentType,this.dragInfo.slotId),(function(e,o){o.dataset[t.SMARTEDIT_COMPONENT_PROCESS_STATUS]=n}));this.yjQuery.each(this.componentHandlerService.getComponent(this.dragInfo.slotId,this.CONTENT_SLOT_TYPE),(function(e,o){o.dataset[t.SMARTEDIT_COMPONENT_PROCESS_STATUS]=n}))}};var e,t,n,s,c,l,d,u,p,m,S,v,h,f,g,y,_,C;CmsDragAndDropService.CMS_DRAG_AND_DROP_ID="se.cms.dragAndDrop";CmsDragAndDropService.TARGET_SELECTOR="#smarteditoverlay .smartEditComponentX[data-smartedit-component-type='ContentSlot']";CmsDragAndDropService.SOURCE_SELECTOR="#smarteditoverlay .smartEditComponentX[data-smartedit-component-type!='ContentSlot'] .movebutton";CmsDragAndDropService.MORE_MENU_SOURCE_SELECTOR=".movebutton";CmsDragAndDropService.SLOT_SELECTOR=".smartEditComponentX[data-smartedit-component-type='ContentSlot']";CmsDragAndDropService.COMPONENT_SELECTOR=".smartEditComponentX[data-smartedit-component-type!='ContentSlot']";CmsDragAndDropService.HINT_SELECTOR=".overlayDropzone";CmsDragAndDropService.CSS_CLASSES={UI_HELPER_OVERLAY:"overlayDnd",DROPZONE:"overlayDropzone",DROPZONE_FULL:"overlayDropzone--full",DROPZONE_TOP:"overlayDropzone--top",DROPZONE_BOTTOM:"overlayDropzone--bottom",DROPZONE_LEFT:"overlayDropzone--left",DROPZONE_RIGHT:"overlayDropzone--right",DROPZONE_HOVERED:"overlayDropzone--hovered",DROPZONE_MAY_BE_ALLOWED:"overlayDropzone--mayBeAllowed",OVERLAY_IN_DRAG_DROP:"smarteditoverlay_dndRendering",COMPONENT_DRAGGED:"component_dragged",COMPONENT_DRAGGED_HOVERED:"component_dragged_hovered",SLOTS_MARKED:"slot-marked",SLOT_ALLOWED:"over-slot-enabled",SLOT_NOT_ALLOWED:"over-slot-disabled",SLOT_MAY_BE_ALLOWED:"over-slot-maybeenabled"};CmsDragAndDropService.DEFAULT_DRAG_IMG="/images/contextualmenu_move_on.png";CmsDragAndDropService=e=o["__decorate"]([Object(i["SeInjectable"])(),o["__metadata"]("design:paramtypes",[typeof(t=typeof a!=="undefined"&&a["IQService"])==="function"?t:Object,typeof(n=typeof a!=="undefined"&&a["IWindowService"])==="function"?n:Object,typeof(c=typeof a!=="undefined"&&(s=a["translate"])!==void 0&&s.ITranslateService)==="function"?c:Object,typeof(l=typeof JQueryStatic!=="undefined"&&JQueryStatic)==="function"?l:Object,typeof(d=typeof i["DragAndDropService"]!=="undefined"&&i["DragAndDropService"])==="function"?d:Object,Object,typeof(u=typeof i["SystemEventService"]!=="undefined"&&i["SystemEventService"])==="function"?u:Object,typeof(p=typeof i["GatewayFactory"]!=="undefined"&&i["GatewayFactory"])==="function"?p:Object,Object,typeof(m=typeof i["IAlertService"]!=="undefined"&&i["IAlertService"])==="function"?m:Object,typeof(S=typeof r["AssetsService"]!=="undefined"&&r["AssetsService"])==="function"?S:Object,typeof(v=typeof i["IBrowserService"]!=="undefined"&&i["IBrowserService"])==="function"?v:Object,Object,typeof(h=typeof i["IWaitDialogService"]!=="undefined"&&i["IWaitDialogService"])==="function"?h:Object,typeof(f=typeof r["IPageContentSlotsComponentsRestService"]!=="undefined"&&r["IPageContentSlotsComponentsRestService"])==="function"?f:Object,typeof(g=typeof i["TypedMap"]!=="undefined"&&i["TypedMap"])==="function"?g:Object,String,String,String,typeof(y=typeof i["TypedMap"]!=="undefined"&&i["TypedMap"])==="function"?y:Object,String,typeof(_=typeof i["TypedMap"]!=="undefined"&&i["TypedMap"])==="function"?_:Object,typeof(C=typeof i["TypedMap"]!=="undefined"&&i["TypedMap"])==="function"?C:Object,String])],CmsDragAndDropService);return CmsDragAndDropService}();var R=function(){function CmsDragAndDropServiceModule(){}CmsDragAndDropServiceModule=o["__decorate"]([Object(i["SeModule"])({imports:["yLoDashModule","legacySmarteditCommonsModule","slotRestrictionsServiceModule","componentEditingFacadeModule","translationServiceModule","removeComponentServiceModule","cmsSmarteditServicesModule","browserServiceModule","seConstantsModule"],providers:[O,{provide:"DRAG_AND_DROP_EVENTS",useValue:{DRAG_STARTED:"CMS_DRAG_STARTED",DRAG_STOPPED:"CMS_DRAG_STOPPED",DRAG_OVER:"CMS_DRAG_OVER",DRAG_LEAVE:"CMS_DRAG_LEAVE"}},{provide:"ENABLE_CLONE_ON_DROP",useValue:"enableCloneComponentOnDrop"}]})],CmsDragAndDropServiceModule);return CmsDragAndDropServiceModule}();doImport();var P=function(){function Cmssmartedit(){}Cmssmartedit=o["__decorate"]([Object(i["SeModule"])({imports:[_,I,r["CmsResourceLocationsModule"],"resourceLocationsModule","decoratorServiceModule","removeComponentServiceModule","editorEnablerServiceModule","alertServiceModule","translationServiceModule","slotVisibilityButtonModule","slotVisibilityServiceModule","cmssmarteditTemplates","cmscommonsTemplates","smarteditServicesModule","slotSharedButtonModule",R,"slotSyncButtonModule","confirmationModalServiceModule","sharedSlotDisabledDecoratorModule","externalSlotDisabledDecoratorModule","slotRestrictionsServiceModule","slotSharedServiceModule","contextualMenuDropdownServiceModule","externalComponentDecoratorModule","externalComponentButtonModule","componentEditingFacadeModule","slotUnsharedButtonModule","componentInfoServiceModule"],initialize:["$rootScope","$q","$translate","alertService","assetsService","cmsDragAndDropService","componentHandlerService","pageInfoService","confirmationModalService","contextualMenuService","decoratorService","editorEnablerService","featureService","removeComponentService","slotRestrictionsService","slotSharedService","slotVisibilityService","componentEditingFacade","cmsitemsRestService","componentInfoService","componentSharedService","crossFrameEventService","EVENT_SMARTEDIT_COMPONENT_UPDATED","typePermissionsRestService",function(e,t,n,o,i,r,s,a,c,l,d,u,p,m,S,v,h,f,g,y,_,C,E,b){"ngInject";u.enableForComponents(["^((?!Slot).)*$"]);d.addMappings({"^((?!Slot).)*$":["se.contextualMenu","externalComponentDecorator"],"^.*Slot$":["se.slotContextualMenu","se.basicSlotContextualMenu","syncIndicator","sharedSlotDisabledDecorator","externalSlotDisabledDecorator"]});p.addContextualMenuButton({key:"externalcomponentbutton",priority:100,nameI18nKey:"se.cms.contextmenu.title.externalcomponent",i18nKey:"se.cms.contextmenu.title.externalcomponentbutton",regexpKeys:["^((?!Slot).)*$"],condition:function(e){var t=s.getParentSlotForComponent(e.element);return S.isSlotEditable(t).then((function(t){if(!t){return false}var n=e.componentAttributes&&e.componentAttributes.smarteditCatalogVersionUuid;if(n){return a.getCatalogVersionUUIDFromPage().then((function(e){return n!==e}))}return s.isExternalComponent(e.componentId,e.componentType)}))},action:{template:'<external-component-button data-catalog-version-uuid="ctrl.componentAttributes.smarteditCatalogVersionUuid"></external-component-button>'},displayClass:"externalcomponentbutton",displayIconClass:"hyicon hyicon-globe",displaySmallIconClass:"hyicon hyicon-globe"});p.addContextualMenuButton({key:"se.cms.dragandropbutton",priority:200,nameI18nKey:"se.cms.contextmenu.title.dragndrop",i18nKey:"se.cms.contextmenu.title.dragndrop",regexpKeys:["^((?!Slot).)*$"],condition:function(e){var t=s.getParentSlotForComponent(e.element);return S.isSlotEditable(t).then((function(t){if(t){return b.hasUpdatePermissionForTypes([e.componentType]).then((function(t){return t[e.componentType]}))}return false}))},action:{callbacks:{mousedown:function(){r.update()}}},displayClass:"movebutton",displayIconClass:"sap-icon--move",displaySmallIconClass:"sap-icon--move",permissions:["se.context.menu.drag.and.drop.component"]});p.register({key:"se.cms.html5DragAndDrop",nameI18nKey:"se.cms.dragAndDrop.name",descriptionI18nKey:"se.cms.dragAndDrop.description",enablingCallback:function(){r.register();r.apply()},disablingCallback:function(){r.unregister()}});p.addContextualMenuButton({key:"se.cms.sharedcomponentbutton",priority:300,nameI18nKey:"se.cms.contextmenu.title.shared.component",i18nKey:"se.cms.contextmenu.title.shared.component",regexpKeys:["^((?!Slot).)*$"],condition:function(e){var t=s.getParentSlotForComponent(e.element);return Promise.all([s.isExternalComponent(e.componentId,e.componentType),S.isSlotEditable(t)]).then((function(t){if(t[0]||!t[1]){return false}return _.isComponentShared(e.componentAttributes.smarteditComponentUuid)}))},action:{template:'<shared-component-button data-smartedit-component-id="ctrl.componentAttributes.smarteditComponentId"></shared-component-button>'},displayClass:"shared-component-button",displayIconClass:"sap-icon--chain-link",displaySmallIconClass:"sap-icon--chain-link",permissions:[]});p.addContextualMenuButton({key:"se.cms.remove",priority:500,customCss:"se-contextual-more-menu__item--delete",i18nKey:"se.cms.contextmenu.title.remove",nameI18nKey:"se.cms.contextmenu.title.remove",regexpKeys:["^((?!Slot).)*$"],condition:function(e){if(!e.isComponentHidden){var t=s.getParentSlotForComponent(e.element);return S.isSlotEditable(t).then((function(t){if(t){return b.hasDeletePermissionForTypes([e.componentType]).then((function(t){return t[e.componentType]}))}return false}))}return b.hasDeletePermissionForTypes([e.componentType]).then((function(t){return t[e.componentType]}))},action:{callback:function(e,t){var i;var r;if(e.element){i=s.getSlotOperationRelatedId(e.element);r=s.getSlotOperationRelatedType(e.element)}else{i=e.containerId?e.containerId:e.componentId;r=e.containerId&&e.containerType?e.containerType:e.componentType}var a={};a.description="se.cms.contextmenu.removecomponent.confirmation.message";a.title="se.cms.contextmenu.removecomponent.confirmation.title";c.confirm(a).then((function(){m.removeComponent({slotId:e.slotId,slotUuid:e.slotUuid,componentId:e.componentId,componentType:e.componentType,componentUuid:e.componentAttributes.smarteditComponentUuid,slotOperationRelatedId:i,slotOperationRelatedType:r}).then((function(){h.reloadSlotsInfo();C.publish(E,{componentId:e.componentId,componentType:e.componentType,requiresReplayingDecorators:true});n("se.cms.alert.component.removed.from.slot",{componentID:i,slotID:e.slotId}).then((function(e){o.showSuccess({message:e});t.preventDefault();t.stopPropagation()}))}))}))}},displayClass:"removebutton",displayIconClass:"sap-icon--decline",displaySmallIconClass:"sap-icon--decline",permissions:["se.context.menu.remove.component"]});p.addContextualMenuButton({key:"se.slotContextualMenuVisibility",nameI18nKey:"slotcontextmenu.title.visibility",regexpKeys:["^.*ContentSlot$"],action:{templateUrl:"slotVisibilityWidgetTemplate.html"},permissions:["se.slot.context.menu.visibility"]});p.addContextualMenuButton({key:"se.slotSharedButton",nameI18nKey:"slotcontextmenu.title.shared.button",regexpKeys:["^.*Slot$"],action:{templateUrl:"slotSharedTemplate.html"},permissions:["se.slot.context.menu.shared.icon"]});p.addContextualMenuButton({key:"slotUnsharedButton",nameI18nKey:"slotcontextmenu.title.unshared.button",regexpKeys:["^.*Slot$"],action:{templateUrl:"slotUnsharedButtonWrapperTemplate.html"},permissions:["se.slot.context.menu.unshared.icon"]});p.addContextualMenuButton({key:"se.slotSyncButton",nameI18nKey:"slotcontextmenu.title.sync.button",regexpKeys:["^.*Slot$"],action:{templateUrl:"slotSyncTemplate.html"},permissions:["se.sync.slot.context.menu"]});p.addDecorator({key:"syncIndicator",nameI18nKey:"syncIndicator",permissions:["se.sync.slot.indicator"]});p.register({key:"disableSharedSlotEditing",nameI18nKey:"se.cms.disableSharedSlotEditing",descriptionI18nKey:"se.cms.disableSharedSlotEditing.description",enablingCallback:function(){v.setSharedSlotEnablementStatus(true)},disablingCallback:function(){v.setSharedSlotEnablementStatus(false)}});p.addDecorator({key:"sharedSlotDisabledDecorator",nameI18nKey:"se.cms.shared.slot.disabled.decorator",displayCondition:function(e,t){return Promise.all([S.isSlotEditable(t),s.isExternalComponent(t,e),v.isSlotShared(t)]).then((function(e){return!e[0]&&!e[1]&&e[2]}))}});p.addDecorator({key:"externalSlotDisabledDecorator",nameI18nKey:"se.cms.external.slot.disabled.decorator",displayCondition:function(e,t){return Promise.resolve(s.isExternalComponent(t,e))}});p.addDecorator({key:"externalComponentDecorator",nameI18nKey:"se.cms.external.component.decorator",displayCondition:function(e,t){return Promise.resolve(s.isExternalComponent(t,e))}});p.addContextualMenuButton({key:"clonecomponentbutton",priority:600,nameI18nKey:"se.cms.contextmenu.title.clone.component",i18nKey:"se.cms.contextmenu.title.clone.component",regexpKeys:["^((?!Slot).)*$"],condition:function(e){var n=e.componentAttributes.smarteditComponentUuid;if(!e.isComponentHidden){var o=s.getParentSlotForComponent(e.element);return S.isSlotEditable(o).then((function(o){if(o){return b.hasCreatePermissionForTypes([e.componentType]).then((function(o){if(o[e.componentType]){return y.getById(n).then((function(e){return e.cloneable}))}else{return t.when(false)}}))}return false}))}return g.getById(n).then((function(e){return e.cloneable}))},action:{callback:function(e){var t=s.getComponentPositionInSlot(e.slotId,e.componentAttributes.smarteditComponentId);f.cloneExistingComponentToSlot({targetSlotId:e.slotId,dragInfo:{componentId:e.componentAttributes.smarteditComponentId,componentType:e.componentType,componentUuid:e.componentAttributes.smarteditComponentUuid},position:t+1})}},displayClass:"clonebutton",displayIconClass:"sap-icon--duplicate",displaySmallIconClass:"sap-icon--duplicate",permissions:["se.clone.component"]})}]})],Cmssmartedit);return Cmssmartedit}();var A=n(50);var N=n(51);var D=n(5);window.__smartedit__.addDecoratorPayload("Component","SyncIndicatorDecorator",{selector:"sync-indicator",template:n(46)});var M=function(e){SyncIndicatorDecorator.$inject=["$q","catalogService","slotSynchronizationService","crossFrameEventService","pageInfoService","SYNCHRONIZATION_STATUSES","SYNCHRONIZATION_POLLING"];o["__extends"](SyncIndicatorDecorator,e);function SyncIndicatorDecorator(t,n,o,i,r,s,a){var c=e.call(this)||this;c.$q=t;c.catalogService=n;c.slotSynchronizationService=o;c.crossFrameEventService=i;c.pageInfoService=r;c.SYNCHRONIZATION_STATUSES=s;c.SYNCHRONIZATION_POLLING=a;c.isVersionNonActive=false;return c}SyncIndicatorDecorator.prototype.ngOnInit=function(){var e=this;this.syncStatus={status:this.SYNCHRONIZATION_STATUSES.UNAVAILABLE};this.pageInfoService.getPageUUID().then((function(t){e.pageUUID=t;e.unRegisterSyncPolling=e.crossFrameEventService.subscribe(e.SYNCHRONIZATION_POLLING.FAST_FETCH,e.fetchSyncStatus.bind(e));e.catalogService.isContentCatalogVersionNonActive().then((function(t){e.isVersionNonActive=t;if(e.isVersionNonActive){e.fetchSyncStatus()}}))}))};SyncIndicatorDecorator.prototype.ngOnDestroy=function(){if(this.unRegisterSyncPolling){this.unRegisterSyncPolling()}};SyncIndicatorDecorator.prototype.fetchSyncStatus=function(){var e=this;return this.isVersionNonActive?this.slotSynchronizationService.getSyncStatus(this.pageUUID,this.componentAttributes.smarteditComponentId).then((function(t){e.syncStatus=t}),(function(){e.syncStatus.status=e.SYNCHRONIZATION_STATUSES.UNAVAILABLE})):this.$q.when()};var t,r,s,a,c,l;SyncIndicatorDecorator=o["__decorate"]([Object(i["SeDecorator"])(),Object(D["Component"])({selector:"sync-indicator",template:n(46)}),o["__param"](0,Object(D["Inject"])("$q")),o["__param"](2,Object(D["Inject"])("slotSynchronizationService")),o["__param"](4,Object(D["Inject"])("pageInfoService")),o["__param"](5,Object(D["Inject"])("SYNCHRONIZATION_STATUSES")),o["__param"](6,Object(D["Inject"])("SYNCHRONIZATION_POLLING")),o["__metadata"]("design:paramtypes",[typeof(t=typeof angular!=="undefined"&&angular.IQService)==="function"?t:Object,typeof(r=typeof i["ICatalogService"]!=="undefined"&&i["ICatalogService"])==="function"?r:Object,Object,typeof(s=typeof i["CrossFrameEventService"]!=="undefined"&&i["CrossFrameEventService"])==="function"?s:Object,typeof(a=typeof i["IPageInfoService"]!=="undefined"&&i["IPageInfoService"])==="function"?a:Object,typeof(c=typeof i["TypedMap"]!=="undefined"&&i["TypedMap"])==="function"?c:Object,typeof(l=typeof i["TypedMap"]!=="undefined"&&i["TypedMap"])==="function"?l:Object])],SyncIndicatorDecorator);return SyncIndicatorDecorator}(i["AbstractDecorator"]);var x=n(87);var w=function(){function CmssmarteditModule(){}CmssmarteditModule=o["__decorate"]([Object(i["SeEntryModule"])("cmssmartedit"),Object(D["NgModule"])({imports:[r["CmsCommonsModule"],A["BrowserModule"],N["UpgradeModule"]],declarations:[M],entryComponents:[M],providers:[i["diBridgeUtils"].upgradeProvider("$q"),i["diBridgeUtils"].upgradeProvider("catalogService",i["ICatalogService"]),i["diBridgeUtils"].upgradeProvider("slotSynchronizationService"),i["diBridgeUtils"].upgradeProvider("pageInfoService"),i["diBridgeUtils"].upgradeProvider("SYNCHRONIZATION_STATUSES"),i["diBridgeUtils"].upgradeProvider("SYNCHRONIZATION_POLLING")]})],CmssmarteditModule);return CmssmarteditModule}()},function(e,t,n){e.exports=n(7)(65)}]);